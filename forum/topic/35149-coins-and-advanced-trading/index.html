<!DOCTYPE html>

<html dir="ltr" lang="en-US">

<!-- Added by HTTrack --><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8"/>
<title>Coins and Advanced Trading - Scripting - Epoch Mod Community</title>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52081052-1', 'auto');
  ga('send', 'pageview');

</script>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="https://epochmod.com/forum/uploads/monthly_2018_04/logo_only_black.png.c85695b79cad231dd136cd63c4db8256.png" property="og:image"/>
<meta content="summary_large_image" name="twitter:card">
<meta content="@EpochMod" name="twitter:site">
<meta content="Coins and Advanced Trading" property="og:title"/>
<meta content="website" property="og:type"/>
<meta content="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/" property="og:url"/>
<meta content="Hello, I Have a Problem with i trade normal with the Trader i get coins for items, but if i trade with Advanced Trading with Trader he get my Items but i get no coins any ideas? my advanced Trading / init.sqf -&gt; disableSerialization; Z_traderData = (_this select 3); // gets the trader data ( m..." name="description"/>
<meta content="Hello, I Have a Problem with i trade normal with the Trader i get coins for items, but if i trade with Advanced Trading with Trader he get my Items but i get no coins any ideas? my advanced Trading / init.sqf -&gt; disableSerialization; Z_traderData = (_this select 3); // gets the trader data ( m..." property="og:description"/>
<meta content="2015-05-09T07:19:12Z" property="og:updated_time"/>
<meta content="Epoch Mod Community" property="og:site_name"/>
<meta content="en_US" property="og:locale"/>
<link href="index.html" rel="canonical"/>
<link href="https://epochmod.com/forum/manifest.webmanifest/" rel="manifest"/>
<meta content="https://epochmod.com/forum/browserconfig.xml/" name="msapplication-config"/>
<meta content="/" name="msapplication-starturl"/>
<meta content="Epoch Mod Community" name="application-name"/>
<meta content="Epoch Mod Community" name="apple-mobile-web-app-title"/>
<meta content="#000000" name="theme-color"/>
<link as="font" crossorigin="anonymous" href="http://epochmod.com/forum/applications/core/interface/font/fontawesome-webfont.woff2?v=4.7.0" rel="preload"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/341e4a57816af3ba440d891ca87450ff_framework.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/05e81b71abe4f22d6eb8d1a929494829_responsive.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/90eb5adf50a8c640f633d47fd7eb1778_core.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/5a0da001ccc2200dc5625c3f3934497d_core_responsive.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/62e269ced0fdab7e30e026f1d30ae516_forums.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/76e62c573090645fb99a15a363d8620e_forums_responsive.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/ebdea0c6a7dab6d37900b9190d3ac77b_topics.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/css_built_19/258adbb6e4f3e83cd3b355f84e3fa002_custom.css" media="all" rel="stylesheet"/>
<link href="https://epochmod.com/forum/uploads/monthly_2018_04/favicon.ico.c690be06d87a954c1dce2d924fe2a0f2.ico" rel="shortcut icon" type="image/x-icon"/>
</meta></meta></head>
<body class="ipsApp ipsApp_front ipsJS_none ipsClearfix" data-controller="core.front.core.app" data-message="" data-pageapp="forums" data-pagecontroller="topic" data-pageid="35149" data-pagelocation="front" data-pagemodule="forums">
<a accesskey="m" class="ipsHide" href="#ipsLayout_mainArea" title="Go to main content on this page">Jump to content</a>
<div class="ipsClearfix" id="ipsLayout_header">
<header>
<div class="ipsLayout_container">
<a accesskey="1" href="../../index.html" id="elLogo"><img alt="Epoch Mod Community" src="https://epochmod.com/forum/uploads/monthly_2023_04/text_only.png.512d7d1c1eb3e42e7aae78351fa37e02.png"/></a>
<ul class="ipsList_inline cSignedOut ipsResponsive_showDesktop" id="elUserNav">
<li id="elSignInLink">
<a data-ipsmenu="" data-ipsmenu-closeonclick="false" href="https://epochmod.com/forum/login/" id="elUserSignIn">
                    Existing user? Sign In Â <i class="fa fa-caret-down"></i>
</a>
<div class="ipsMenu ipsMenu_auto ipsHide" id="elUserSignIn_menu">
<form accept-charset="utf-8" action="https://epochmod.com/forum/login/" method="post">
<input name="csrfKey" type="hidden" value="bbd96aef55be1a90d685e56a4524d73a"/>
<input name="ref" type="hidden" value="aHR0cHM6Ly9kNDIyLmVwb2NobW9kLmNvbS9mb3J1bS90b3BpYy8zNTE0OS1jb2lucy1hbmQtYWR2YW5jZWQtdHJhZGluZy8="/>
<div data-role="loginForm">
<div class="ipsPad ipsForm ipsForm_vertical">
<h4 class="ipsType_sectionHead">Sign In</h4>
<br/><br/>
<ul class="ipsList_reset">
<li class="ipsFieldRow ipsFieldRow_noLabel ipsFieldRow_fullWidth">
<input autocomplete="email" name="auth" placeholder="Display Name or Email Address" type="text"/>
</li>
<li class="ipsFieldRow ipsFieldRow_noLabel ipsFieldRow_fullWidth">
<input autocomplete="current-password" name="password" placeholder="Password" type="password"/>
</li>
<li class="ipsFieldRow ipsFieldRow_checkbox ipsClearfix">
<span class="ipsCustomInput">
<input aria-checked="true" checked="" id="remember_me_checkbox" name="remember_me" type="checkbox" value="1"/>
<span></span>
</span>
<div class="ipsFieldRow_content">
<label class="ipsFieldRow_label" for="remember_me_checkbox">Remember me</label>
<span class="ipsFieldRow_desc">Not recommended on shared computers</span>
</div>
</li>
<li class="ipsFieldRow ipsFieldRow_fullWidth">
<button class="ipsButton ipsButton_primary ipsButton_small" id="elSignIn_submit" name="_processLogin" type="submit" value="usernamepassword">Sign In</button>
<p class="ipsType_right ipsType_small">
<a data-ipsdialog="" data-ipsdialog-title="Forgot your password?" href="https://epochmod.com/forum/lostpassword/">
					
					Forgot your password?</a>
</p>
</li>
</ul>
</div>
</div>
</form>
</div>
</li>
</ul>
<ul class="ipsMobileHamburger ipsList_reset ipsResponsive_hideDesktop">
<li data-ipsdrawer="" data-ipsdrawer-drawerelem="#elMobileDrawer">
<a href="#">
<i class="fa fa-navicon"></i>
</a>
</li>
</ul>
</div>
</header>
<nav class="ipsResponsive_showDesktop" data-controller="core.front.core.navBar">
<div class="ipsNavBar_primary ipsLayout_container">
<ul class="ipsClearfix" data-role="primaryNavBar">
<li data-navapp="core" data-navext="CustomItem" data-role="navBarItem" id="elNavSecondary_18">
<a data-navitem-id="18" href="http://epochmod.com/">
					Home<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="cms" data-navext="Pages" data-role="navBarItem" id="elNavSecondary_12">
<a data-navitem-id="12" href="https://epochmod.com/forum/projects/">
					Downloads<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li class="ipsNavBar_active" data-active="" data-navapp="forums" data-navext="Forums" data-role="navBarItem" id="elNavSecondary_8">
<a data-navdefault="" data-navitem-id="8" href="../../index.html">
					Forums<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="core" data-navext="CustomItem" data-role="navBarItem" id="elNavSecondary_13">
<a data-navitem-id="13" href="http://epochmod.gamepedia.com/" rel="noopener" target="_blank">
					Wiki<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="core" data-navext="CustomItem" data-role="navBarItem" id="elNavSecondary_1">
<a data-navitem-id="1" href="../../index.html">
					Browse<span class="ipsNavBar_active__identifier"></span>
</a>
<ul class="ipsNavBar_secondary ipsHide" data-role="secondaryNavBar">
<li data-navapp="core" data-navext="StaffDirectory" data-role="navBarItem" id="elNavSecondary_10">
<a data-navitem-id="10" href="https://epochmod.com/forum/staff/">
					Staff<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="core" data-navext="OnlineUsers" data-role="navBarItem" id="elNavSecondary_11">
<a data-navitem-id="11" href="https://epochmod.com/forum/online/">
					Online Users<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li class="ipsHide" data-role="navMore" id="elNavigationMore_1">
<a data-ipsmenu="" data-ipsmenu-appendto="#elNavigationMore_1" href="#" id="elNavigationMore_1_dropdown">More <i class="fa fa-caret-down"></i></a>
<ul class="ipsHide ipsMenu ipsMenu_auto" data-role="moreDropdown" id="elNavigationMore_1_dropdown_menu"></ul>
</li>
</ul>
</li>
<li data-navapp="core" data-navext="CustomItem" data-role="navBarItem" id="elNavSecondary_2">
<a data-navitem-id="2" href="https://epochmod.com/forum/discover/">
					Activity<span class="ipsNavBar_active__identifier"></span>
</a>
<ul class="ipsNavBar_secondary ipsHide" data-role="secondaryNavBar">
<li data-navapp="core" data-navext="AllActivity" data-role="navBarItem" id="elNavSecondary_3">
<a data-navitem-id="3" href="https://epochmod.com/forum/discover/">
					All Activity<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="core" data-navext="YourActivityStreams" data-role="navBarItem" id="elNavSecondary_4">
<a data-navitem-id="4" href="#">
					My Activity Streams<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="core" data-navext="YourActivityStreamsItem" data-role="navBarItem" id="elNavSecondary_5">
<a data-navitem-id="5" href="https://epochmod.com/forum/discover/unread/">
					Unread Content<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="core" data-navext="YourActivityStreamsItem" data-role="navBarItem" id="elNavSecondary_6">
<a data-navitem-id="6" href="https://epochmod.com/forum/discover/content-started/">
					Content I Started<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li data-navapp="core" data-navext="Search" data-role="navBarItem" id="elNavSecondary_7">
<a data-navitem-id="7" href="https://epochmod.com/forum/search/">
					Search<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li class="ipsHide" data-role="navMore" id="elNavigationMore_2">
<a data-ipsmenu="" data-ipsmenu-appendto="#elNavigationMore_2" href="#" id="elNavigationMore_2_dropdown">More <i class="fa fa-caret-down"></i></a>
<ul class="ipsHide ipsMenu ipsMenu_auto" data-role="moreDropdown" id="elNavigationMore_2_dropdown_menu"></ul>
</li>
</ul>
</li>
<li data-navapp="core" data-navext="Leaderboard" data-role="navBarItem" id="elNavSecondary_19">
<a data-navitem-id="19" href="https://epochmod.com/forum/leaderboard/">
					Leaderboard<span class="ipsNavBar_active__identifier"></span>
</a>
</li>
<li class="ipsHide" data-role="navMore" id="elNavigationMore">
<a data-ipsmenu="" data-ipsmenu-appendto="#elNavigationMore" href="#" id="elNavigationMore_dropdown">More</a>
<ul class="ipsNavBar_secondary ipsHide" data-role="secondaryNavBar">
<li class="ipsHide" data-role="navMore" id="elNavigationMore_more">
<a data-ipsmenu="" data-ipsmenu-appendto="#elNavigationMore_more" href="#" id="elNavigationMore_more_dropdown">More <i class="fa fa-caret-down"></i></a>
<ul class="ipsHide ipsMenu ipsMenu_auto" data-role="moreDropdown" id="elNavigationMore_more_dropdown_menu"></ul>
</li>
</ul>
</li>
</ul>
<div id="elSearchWrapper">
<div data-controller="core.front.core.quickSearch" id="elSearch">
<form accept-charset="utf-8" action="http://epochmod.com/forum/search/?do=quicksearch" method="post">
<input aria-label="Search" autocomplete="off" id="elSearchField" name="q" placeholder="Search..." type="search"/>
<details class="cSearchFilter">
<summary class="cSearchFilter__text"></summary>
<ul class="cSearchFilter__menu">
<li><label><input name="type" type="radio" value="all"/><span class="cSearchFilter__menuText">Everywhere</span></label></li>
<li><label><input checked="" name="type" type="radio" value='contextual_{"type":"forums_topic","nodes":35}'/><span class="cSearchFilter__menuText">This Forum</span></label></li>
<li><label><input checked="" name="type" type="radio" value='contextual_{"type":"forums_topic","item":35149}'/><span class="cSearchFilter__menuText">This Topic</span></label></li>
<li><label><input name="type" type="radio" value="core_statuses_status"/><span class="cSearchFilter__menuText">Status Updates</span></label></li>
<li><label><input name="type" type="radio" value="forums_topic"/><span class="cSearchFilter__menuText">Topics</span></label></li>
<li><label><input name="type" type="radio" value="cms_pages_pageitem"/><span class="cSearchFilter__menuText">Pages</span></label></li>
<li><label><input name="type" type="radio" value="cms_records1"/><span class="cSearchFilter__menuText">Article</span></label></li>
<li><label><input name="type" type="radio" value="core_members"/><span class="cSearchFilter__menuText">Members</span></label></li>
</ul>
</details>
<button aria-label="Search" class="cSearchSubmit" type="submit"><i class="fa fa-search"></i></button>
</form>
</div>
</div>
</div>
</nav>
<ul class="ipsResponsive_hideDesktop" data-controller="core.front.core.mobileNav" id="elMobileNav">
<li id="elMobileBreadcrumb">
<a href="../../forum/35-scripting/index.html">
<span>Scripting</span>
</a>
</li>
<li>
<a data-action="defaultStream" href="https://epochmod.com/forum/discover/"><i aria-hidden="true" class="fa fa-newspaper-o"></i></a>
</li>
<li class="ipsJS_show">
<a href="https://epochmod.com/forum/search/"><i class="fa fa-search"></i></a>
</li>
</ul>
</div>
<main class="ipsLayout_container" id="ipsLayout_body">
<div id="ipsLayout_contentArea">
<div id="ipsLayout_contentWrapper">
<nav class="ipsBreadcrumb ipsBreadcrumb_top ipsFaded_withHover">
<ul class="ipsList_inline ipsPos_right">
<li>
<a class="ipsType_light" data-action="defaultStream" href="https://epochmod.com/forum/discover/"><i aria-hidden="true" class="fa fa-newspaper-o"></i> <span>All Activity</span></a>
</li>
</ul>
<ul data-role="breadcrumbList">
<li>
<a href="../../index.html" title="Home">
<span>Home <i class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
<a href="../../forum/1-arma-2/index.html">
<span>ArmA 2 <i aria-hidden="true" class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
<a href="../../forum/96-qa-section/index.html">
<span>Q&amp;A Section <i aria-hidden="true" class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
<a href="../../forum/35-scripting/index.html">
<span>Scripting <i aria-hidden="true" class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
				
					Coins and Advanced Trading
				
			</li>
</ul>
</nav>
<div id="ipsLayout_mainArea">
<div class="ipsPageHeader ipsResponsive_pull ipsBox ipsPadding sm:ipsPadding:half ipsMargin_bottom">
<div class="ipsFlex ipsFlex-ai:stretch ipsFlex-jc:center">
<ul class="ipsList_reset cRatingColumn cRatingColumn_question ipsType_center ipsMargin_right ipsFlex-flex:00 ipsBorder_right">
<li>
<span class="cAnswerRate cAnswerRate_up cAnswerRate_noPermission" data-ipstooltip="" title="Sign in to rate this question"><i class="fa fa-angle-up"></i></span>
</li>
<li><span class="cAnswerRating" data-role="voteCount" data-votecount="0">0</span></li>
</ul>
<div class="ipsFlex-flex:11">
<div class="ipsFlex ipsFlex-ai:center ipsFlex-fw:wrap ipsGap:4">
<div class="ipsFlex-flex:11">
<h1 class="ipsType_pageTitle ipsContained_container">
<span class="ipsType_break ipsContained">
<span>Coins and Advanced Trading</span>
</span>
</h1>
</div>
</div>
<hr class="ipsHr"/>
<div class="ipsPageHeader__meta ipsFlex ipsFlex-jc:between ipsFlex-ai:center ipsFlex-fw:wrap ipsGap:3">
<div class="ipsFlex-flex:11">
<div class="ipsPhotoPanel ipsPhotoPanel_mini ipsPhotoPanel_notPhone ipsClearfix">
<a class="ipsUserPhoto ipsUserPhoto_mini" data-ipshover="" data-ipshover-target="https://epochmod.com/forum/profile/11373-flashback/?do=hovercard" data-ipshover-width="370" href="../../profile/11373-flashback/index.html" rel="nofollow" title="Go to flashback's profile">
<img alt="flashback" loading="lazy" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201024%201024%22%20style%3D%22background%3A%2362c4c0%22%3E%3Cg%3E%3Ctext%20text-anchor%3D%22middle%22%20dy%3D%22.35em%22%20x%3D%22512%22%20y%3D%22512%22%20fill%3D%22%23ffffff%22%20font-size%3D%22700%22%20font-family%3D%22-apple-system%2C%20BlinkMacSystemFont%2C%20Roboto%2C%20Helvetica%2C%20Arial%2C%20sans-serif%22%3EF%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fsvg%3E"/>
</a>
<div>
<p class="ipsType_reset ipsType_blendLinks">
<span class="ipsType_normal">
<strong>Asked by 


<a class="ipsType_break" data-ipshover="" data-ipshover-target="https://epochmod.com/forum/profile/11373-flashback/?do=hovercard&amp;referrer=https%253A%252F%252Fepochmod.com%252Fforum%252Ftopic%252F35149-coins-and-advanced-trading%252F" data-ipshover-width="370" href="../../profile/11373-flashback/index.html" rel="nofollow" title="Go to flashback's profile">flashback</a>,</strong><br/><span class="ipsType_light"><time data-short="10 yr" datetime="2015-05-09T07:19:12Z" title="05/09/15 07:19  AM">May 9, 2015</time></span>
</span>
</p>
</div>
</div>
</div>
<div class="ipsFlex-flex:01 ipsResponsive_hidePhone">
<div class="ipsShareLinks">
<a class="ipsShareButton ipsButton ipsButton_verySmall ipsButton_link ipsButton_link--light" data-ipsmenu="" href="#elShareItem_menu" id="elShareItem">
<span><i class="fa fa-share-alt"></i></span> Â Share
    </a>
<div class="ipsPadding ipsMenu ipsMenu_auto ipsHide" data-controller="core.front.core.sharelink" id="elShareItem_menu">
<ul class="ipsList_inline">
<li>
<a class="cShareLink cShareLink_twitter" data-ipstooltip="" data-role="shareLink" href="https://twitter.com/share?url=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F" rel="nofollow noopener" target="_blank" title="Share on Twitter">
<i class="fa fa-twitter"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_facebook" data-ipstooltip="" data-role="shareLink" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F" rel="noopener nofollow" target="_blank" title="Share on Facebook">
<i class="fa fa-facebook"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_reddit" data-ipstooltip="" href="https://www.reddit.com/submit?url=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F&amp;title=Coins+and+Advanced+Trading" rel="nofollow noopener" target="_blank" title="Share on Reddit">
<i class="fa fa-reddit"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_pinterest" data-ipstooltip="" data-role="shareLink" href="https://pinterest.com/pin/create/button/?url=https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/&amp;media=https://epochmod.com/forum/uploads/monthly_2018_04/logo_only_black.png.c85695b79cad231dd136cd63c4db8256.png" rel="nofollow noopener" target="_blank" title="Share on Pinterest">
<i class="fa fa-pinterest"></i>
</a></li>
</ul>
<hr class="ipsHr"/>
<button class="ipsHide ipsButton ipsButton_verySmall ipsButton_light ipsButton_fullWidth ipsMargin_top:half" data-controller="core.front.core.webshare" data-role="webShare" data-websharetext="Coins and Advanced Trading" data-websharetitle="Coins and Advanced Trading" data-webshareurl="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/">More sharing options...</button>
</div>
<div data-controller="core.front.core.followButton" data-followapp="forums" data-followarea="topic" data-followid="35149">
<a class="ipsFollow ipsPos_middle ipsButton ipsButton_light ipsButton_verySmall ipsButton_disabled" data-ipstooltip="" data-role="followButton" href="https://epochmod.com/forum/login/" rel="nofollow" title="Sign in to follow this">
<span>Followers</span>
<span class="ipsCommentCount">0</span>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="ipsClearfix">
<ul class="ipsToolList ipsToolList_horizontal ipsClearfix ipsSpacer_both ipsResponsive_hidePhone">
</ul>
</div>
<div class="cTopic ipsClear ipsSpacer_top" data-autopoll="" data-baseurl="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/" data-controller="core.front.core.commentFeed,forums.front.topic.view, core.front.core.ignoredComments" data-feedid="topic-35149" data-lastpage="" id="comments">
<div class="ipsBox ipsResponsive_pull">
<h2 class="ipsType_sectionTitle ipsType_reset">Question</h2>
<a id="comment-238702"></a>
<article class="cPost ipsBox ipsResponsive_pull cPostQuestion ipsBox--child sm:ipsPadding_horizontal:half ipsComment ipsComment_parent ipsClearfix ipsClear ipsColumns ipsColumns_noSpacing ipsColumns_collapsePhone" id="elComment_238702">
<div class="cAuthorPane_mobile ipsResponsive_showPhone">
<div class="cAuthorPane_photo">
<div class="cAuthorPane_photoWrap">
<a class="ipsUserPhoto ipsUserPhoto_large" data-ipshover="" data-ipshover-target="https://epochmod.com/forum/profile/11373-flashback/?do=hovercard" data-ipshover-width="370" href="../../profile/11373-flashback/index.html" rel="nofollow" title="Go to flashback's profile">
<img alt="flashback" loading="lazy" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201024%201024%22%20style%3D%22background%3A%2362c4c0%22%3E%3Cg%3E%3Ctext%20text-anchor%3D%22middle%22%20dy%3D%22.35em%22%20x%3D%22512%22%20y%3D%22512%22%20fill%3D%22%23ffffff%22%20font-size%3D%22700%22%20font-family%3D%22-apple-system%2C%20BlinkMacSystemFont%2C%20Roboto%2C%20Helvetica%2C%20Arial%2C%20sans-serif%22%3EF%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fsvg%3E"/>
</a>
<a href="https://epochmod.com/forum/profile/11373-flashback/badges/" rel="nofollow">
<img alt="Newbie" class="cAuthorPane_badge cAuthorPane_badge--rank ipsOutline ipsOutline:2px" data-ipstooltip="" loading="lazy" src="https://epochmod.com/forum/uploads/monthly_2023_04/1_Newbie.svg" title="Rank: Newbie (1/14)"/>
</a>
</div>
</div>
<div class="cAuthorPane_content">
<h3 class="ipsType_sectionHead cAuthorPane_author ipsType_break ipsType_blendLinks ipsFlex ipsFlex-ai:center">
<a class="ipsType_break" data-ipshover="" data-ipshover-target="https://epochmod.com/forum/profile/11373-flashback/?do=hovercard&amp;referrer=https%253A%252F%252Fepochmod.com%252Fforum%252Ftopic%252F35149-coins-and-advanced-trading%252F" data-ipshover-width="370" href="../../profile/11373-flashback/index.html" rel="nofollow" title="Go to flashback's profile"><span style="color:#">flashback</span></a>
</h3>
<div class="ipsType_light ipsType_reset">
<a class="ipsType_blendLinks" href="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?do=findComment&amp;comment=238702" rel="nofollow">Posted <time data-short="10 yr" datetime="2015-05-09T07:19:12Z" title="05/09/15 07:19  AM">May 9, 2015</time></a>
</div>
</div>
</div>
<aside class="ipsComment_author cAuthorPane ipsColumn ipsColumn_medium ipsResponsive_hidePhone">
<h3 class="ipsType_sectionHead cAuthorPane_author ipsType_blendLinks ipsType_break"><strong>
<a class="ipsType_break" data-ipshover="" data-ipshover-target="https://epochmod.com/forum/profile/11373-flashback/?do=hovercard&amp;referrer=https%253A%252F%252Fepochmod.com%252Fforum%252Ftopic%252F35149-coins-and-advanced-trading%252F" data-ipshover-width="370" href="../../profile/11373-flashback/index.html" rel="nofollow" title="Go to flashback's profile">flashback</a></strong>
</h3>
<ul class="cAuthorPane_info ipsList_reset">
<li class="cAuthorPane_photo" data-role="photo">
<div class="cAuthorPane_photoWrap">
<a class="ipsUserPhoto ipsUserPhoto_large" data-ipshover="" data-ipshover-target="https://epochmod.com/forum/profile/11373-flashback/?do=hovercard" data-ipshover-width="370" href="../../profile/11373-flashback/index.html" rel="nofollow" title="Go to flashback's profile">
<img alt="flashback" loading="lazy" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201024%201024%22%20style%3D%22background%3A%2362c4c0%22%3E%3Cg%3E%3Ctext%20text-anchor%3D%22middle%22%20dy%3D%22.35em%22%20x%3D%22512%22%20y%3D%22512%22%20fill%3D%22%23ffffff%22%20font-size%3D%22700%22%20font-family%3D%22-apple-system%2C%20BlinkMacSystemFont%2C%20Roboto%2C%20Helvetica%2C%20Arial%2C%20sans-serif%22%3EF%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fsvg%3E"/>
</a>
<img alt="Newbie" class="cAuthorPane_badge cAuthorPane_badge--rank ipsOutline ipsOutline:2px" data-ipstooltip="" loading="lazy" src="https://epochmod.com/forum/uploads/monthly_2023_04/1_Newbie.svg" title="Rank: Newbie (1/14)"/>
</div>
</li>
<li data-role="group"><span style="color:#">Member</span></li>
<li class="ipsMargin_top" data-role="stats">
<ul class="ipsList_reset ipsType_light ipsFlex ipsFlex-ai:center ipsFlex-jc:center ipsGap_row:2 cAuthorPane_stats">
<li>
<a class="ipsType_blendLinks" data-ipstooltip="" href="https://epochmod.com/forum/profile/11373-flashback/content/" rel="nofollow" title="25 posts">
<i class="fa fa-comment"></i> 25
							
								</a>
</li>
</ul>
</li>
</ul>
</aside>
<div class="ipsColumn ipsColumn_fluid ipsMargin:none">
<div class="ipsComment_content ipsType_medium" data-commentapp="forums" data-commentid="238702" data-commenttype="forums" data-controller="core.front.core.comment" data-quotedata='{"userid":11373,"username":"flashback","timestamp":1431155952,"contentapp":"forums","contenttype":"forums","contentid":35149,"contentclass":"forums_Topic","contentcommentid":238702}' id="comment-238702_wrap">
<div class="ipsComment_meta ipsType_light ipsFlex ipsFlex-ai:center ipsFlex-jc:between ipsFlex-fd:row-reverse">
<div class="ipsType_light ipsType_reset ipsType_blendLinks ipsComment_toolWrap">
<div class="ipsResponsive_hidePhone ipsComment_badges">
<ul class="ipsList_reset ipsFlex ipsFlex-jc:end ipsFlex-fw:wrap ipsGap:2 ipsGap_row:1">
</ul>
</div>
<ul class="ipsList_reset ipsComment_tools">
<li>
<a class="ipsComment_ellipsis" data-ipsmenu="" data-ipsmenu-appendto="#comment-238702_wrap" href="#elControls_238702_menu" id="elControls_238702" title="More options..."><i class="fa fa-ellipsis-h"></i></a>
<ul class="ipsMenu ipsMenu_narrow ipsHide" id="elControls_238702_menu">
<li class="ipsMenu_item"><a data-action="reportComment" data-ipsdialog="" data-ipsdialog-flashmessage="Thanks for your report." data-ipsdialog-remotesubmit="" data-ipsdialog-size="medium" data-ipsdialog-title="Report post" href="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?do=reportComment&amp;comment=238702" title="Report this content">Report</a></li>
<li class="ipsMenu_item"><a data-ipsdialog="" data-ipsdialog-content="#elShareComment_238702_menu" data-ipsdialog-size="narrow" data-ipsdialog-title="Share this post" data-role="shareComment" href="index.html" id="elSharePost_238702" title="Share this post">Share</a></li>
</ul>
</li>
</ul>
</div>
<div class="ipsType_reset ipsResponsive_hidePhone">
<a class="ipsType_blendLinks" href="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?do=findComment&amp;comment=238702" rel="nofollow">Posted <time data-short="10 yr" datetime="2015-05-09T07:19:12Z" title="05/09/15 07:19  AM">May 9, 2015</time></a>
<span class="ipsResponsive_hidePhone">
</span>
</div>
</div>
<div class="cPost_contentWrap">
<div class="ipsType_normal ipsType_richText ipsPadding_bottom ipsContained" data-controller="core.front.core.lightboxedImages" data-role="commentContent">
<p>Hello,</p>
<p>Â </p>
<p>I Have a Problem with <iframe data-embed-src="https://epochmod.com/forum/index.php?/topic/15177-release-single-currency-banking-11/and&amp;do=embed" data-embedcontent="" frameborder="0" src="http://epochmod.com/forum/applications/core/interface/js/spacer.png"></iframe> <iframe data-embed-src="https://epochmod.com/forum/index.php?/topic/20219-alpha-release-advanced-trading-10/when&amp;do=embed" data-embedcontent="" frameborder="0" src="http://epochmod.com/forum/applications/core/interface/js/spacer.png"></iframe> i trade normal with the Trader i get coins for items, but if i trade with Advanced Trading with Trader he get my Items but i get no coins any ideas?</p>
<p>Â </p>
<p>my advanced Trading / init.sqf -&gt;</p>
<pre class="ipsCode prettyprint">
disableSerialization;

Z_traderData = (_this select 3); // gets the trader data ( menu_Functionary1 )

Z_Selling = true;
Z_SellingFrom = 2;

if( isNil "Z_traderData" || count (Z_traderData) == 0)exitWith{
	cutText [format["There went something wrong."], "PLAIN DOWN"];
};

if(isNil "Z_AdvancedTradingInit")then{
// initiate the functions and variables for advanced trading -- easier for the people :) otherwise it would be in compiles or different file.
	Z_SellableArray = [];
	Z_SellArray = [];
	Z_BuyArray = [];
	Z_BuyingArray = [];
	Z_vehicle = objNull;
	Z_VehicleDistance = 30;
	Z_MoneyVariable = "headShots"; // Change this to whichever currency You are using.
	Z_NormalCurrency = false; // No effect yet. Not supported yet
	
	if(isNil 'CurrencyName')then{
		CurrencyName = 'Coins';
	};

	Z_filleTradeTitle = {
		_text = _this select 0;
		ctrlSetText [7408, _text];
	};

	Z_clearLists = {
		lbClear 7401;
		lbClear 7402;
	};

	Z_clearBuyList = {
	  lbClear 7421;
	};

	Z_clearBuyingList = {
	  lbClear 7422;
	};

	Z_getContainer = {
		_dialog = findDisplay 711197;
		(_dialog displayCtrl 7404) ctrlSetText format["Free Slots: 0 / 0 / 0"];
		Z_clearBuyingList;
		Z_clearLists;
		Z_SellableArray = [];
		Z_SellArray = [];
		Z_BuyingArray = [];
		
		_lbIndex= _this select 0;

		if(Z_Selling)then{
			switch (_lbIndex) do {
				case 0: { 
					["Selling from backpack."] call Z_filleTradeTitle;
					Z_SellingFrom = 0;
					call Z_getBackpackItems; 
				};
				case 1: { 
					["Selling from vehicle."] call Z_filleTradeTitle;
					Z_SellingFrom = 1;
					call Z_getVehicleItems; 
				};
				case 2: { 
					["Selling from gear."] call Z_filleTradeTitle;
					Z_SellingFrom = 2;
					call Z_getGearItems; 
				};
			};
		}else{
			_ctrltext = format[" "];
			ctrlSetText [7413, _ctrltext];
			
			_ctrltext = format["These are all the items I'm selling!"];
			ctrlSetText [7412, _ctrltext];
			switch (_lbIndex) do {
			
				case 0: { 
					Z_SellingFrom = 0;
					["Buying in backpack."] call Z_filleTradeTitle;
					[0] call Z_calculateFreeSpace;
				};
				case 1: { 
					Z_SellingFrom = 1;
					["Buying in vehicle."] call Z_filleTradeTitle;
					_canBuyInVehicle = call Z_CheckCloseVehicle;
					if(_canBuyInVehicle)then{
						[1] call Z_calculateFreeSpace; 
					}else{
						systemChat format["Get in driver seat to be able to trade to your vehicle."];						
						(_dialog displayCtrl 7404) ctrlSetText format["Free Slots: %1 / %2 / %3",0,0,0];
					};
				};
				case 2: {
					Z_SellingFrom = 2;				
					["Buying in gear."] call Z_filleTradeTitle;
					[2] call Z_calculateFreeSpace;
				};
			};
		};
	};

	Z_getBackpackItems = {
		call Z_clearLists;
		Z_SellableArray = [];
		Z_SellArray = [];
		_backpack = unitBackpack player;
		if (!isNil "_backpack") then {    				
			_mags = getMagazineCargo _backpack;
			_weaps = getWeaponCargo _backpack;		
			_normalMags = [];
			_normalWeaps = [];			
			_kinds = _mags select 0;
			_ammmounts = _mags select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts select _forEachIndex)}do{
				_normalMags set [count(_normalMags),_x];
				_counter = _counter + 1;
				};
			}forEach _kinds;
			
			_kinds2 = _weaps select 0;
			_ammmounts2 = _weaps select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts2 select _forEachIndex)}do{
				_normalWeaps set [count(_normalWeaps),_x];
				_counter = _counter + 1;
				};
			}forEach _kinds2;
		
			[_normalMags,_normalWeaps, typeOf _backpack] call	Z_checkArrayInConfig;	
		}else{
			_ctrltext = format["I'm not stupid."];
			ctrlSetText [7413, _ctrltext];
			
			_ctrltext = format["You are not wearing a backpack."];
			ctrlSetText [7412, _ctrltext];
		};
	};

	Z_getVehicleItems = {
		Z_vehicle = objNull;
		call Z_clearLists;
		Z_SellableArray = [];
		Z_SellArray = [];
		_vehicle = objNull;
		
		_list = nearestObjects [(getPosATL player), ["AllVehicles"], Z_VehicleDistance];	
		{	
			if(!isNull _x &amp;&amp; local _x &amp;&amp; !isPlayer _x &amp;&amp; alive _x &amp;&amp; !(_x isKindOf "zZombie_base"))then{
				systemChat format["Selected %1",typeOf _x];
				_vehicle = _x;
			};
		}count _list;
		
		if(!isNull _vehicle)then{
			Z_vehicle = _vehicle;
			_mags = getMagazineCargo _vehicle;
			_weaps = getWeaponCargo _vehicle;
			
			_normalMags = [];
			_normalWeaps = [];
			
			_kinds = _mags select 0;
			_ammmounts = _mags select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts select _forEachIndex)}do{
				_normalMags set [count(_normalMags),_x];
						_counter = _counter + 1;
				};
			}forEach _kinds;
			
			_kinds2 = _weaps select 0;
			_ammmounts2 = _weaps select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts2 select _forEachIndex)}do{
					_normalWeaps set [count(_normalWeaps),_x];
					_counter = _counter + 1;
				};
			}forEach _kinds2;
			
			
			[_normalWeaps,_normalMags, typeOf _vehicle] call Z_checkArrayInConfig;
		}else{
			_ctrltext = format["Get in driver seat first!"];
			ctrlSetText [7413, _ctrltext];
			
			_ctrltext = format["I do not see any vehicle."];
			ctrlSetText [7412, _ctrltext];
		};	
	};

	Z_getGearItems = {
		call Z_clearLists;
		Z_SellArray = [];
		Z_SellableArray = [];
		 _mags = magazines player;
		 _weaps = weapons player;
		[_weaps,_mags,"your gear"] call	Z_checkArrayInConfig;			
	};

	Z_checkArrayInConfig = {
		_weaps = _this select 0;
		_mags = _this select 1;
		_extraText = _this select 2;
		_all = _weaps + _mags ;
		_total = count(_all);
		_arrayOfTraderCat = Z_traderData;
		_totalPrice = 0;
		if(_total &gt; 0)then{
			{
				_y = _x;				
				{	
						_cat =  format["Category_%1",(_arrayOfTraderCat select _forEachIndex select 1)];
						_excists = false;
						if(isClass(missionConfigFile &gt;&gt; "CfgTraderCategory"  &gt;&gt; _cat &gt;&gt; _y ))then{
						_excists = isClass(missionConfigFile &gt;&gt; "CfgTraderCategory"  &gt;&gt; _cat &gt;&gt; _y );		
						};					
					if(_excists)exitWith{
						_pic = "";
						_text = "";
						_type = getText(missionConfigFile &gt;&gt; "CfgTraderCategory"  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; "type");
						_sell = getArray(missionConfigFile &gt;&gt; "CfgTraderCategory"  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; "sell");									
						
						switch (true) do {
							case (_type == "trade_items") :
							{
								_pic = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'picture');
								_text = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'displayName');
							};
							case (_type == "trade_weapons") :
							{
								_pic = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'picture');
								_text = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'displayName');
							};
							case (_type == "trade_backpacks") :
							{
								_pic = getText (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; _y &gt;&gt; 'picture');
								_text = getText (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; _y &gt;&gt; 'displayName');
							};
						};
						
						
						if( isNil '_text')then{_text = _y;};
						Z_SellableArray set [count(Z_SellableArray) , [_y,_type,_sell select 0,_text,_pic]];
						_totalPrice = _totalPrice + (_sell select 0);				
					};					
				}forEach _arrayOfTraderCat;				
			}count _all;	
					
			_backUpText = _extraText;
			if(Z_SellingFrom != 2)then{
				_extraText = getText (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; _extraText &gt;&gt; 'displayName');
			};
			if (isNil '_extraText')then{_extraText = _backUpText;};
			
			_ctrltext = format["I would offer %1 %2.", _totalPrice,CurrencyName];
			ctrlSetText [7413, _ctrltext];		
			_ctrltext = format["I accept %1 items from %2.", count(Z_SellableArray) , _extraText];
			ctrlSetText [7412, _ctrltext];	
			call Z_fillSellList;
		};		
	};

	Z_calcPrice = {
		_sellPrice = 0;
		if(Z_Selling)then{	
			{  		
				_sellPrice = _sellPrice +  (_x select 2);
			}count Z_SellArray;
		}else{
			{
				_sellPrice = _sellPrice +  ((_x select 2) * (_x select 5));
			}count Z_BuyingArray;
		};
		_ctrltext = format["%1 %2", _sellPrice , CurrencyName];
		ctrlSetText [7410, _ctrltext];	
	};

	Z_fillSellList = {
		
		{
			_index = lbAdd [7401,  _x select 3];
			lbSetPicture [7401, _index, _x select 4 ];
		}count Z_SellableArray;
	};

	Z_fillSellingList = {
		{  		
			_index = lbAdd [7402, _x select 3];
			lbSetPicture [7402, _index,  _x select 4];
		}count Z_SellArray;
	};

	Z_pushItemToList = {
		_index = _this select 0;
		if(!isNil"_index" &amp;&amp; _index &gt; -1)then {
			lbDelete [7401, _index];
			_temp = Z_SellableArray select _index;
			//_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];
			Z_SellArray set [count(Z_SellArray),_temp];
			Z_SellableArray set [_index,"deleted"];
			Z_SellableArray = Z_SellableArray - ["deleted"];
			_index2 = lbAdd [7402, _temp select 3];
			lbSetPicture [7402, _index2, _temp select 4];
			call Z_calcPrice;
		};
	};

	Z_removeItemFromList = {
		_index = _this select 0;
		if(!isNil"_index" &amp;&amp; _index &gt; -1)then {
			lbDelete [7402, _index];
			_temp = Z_SellArray select _index;
			_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];
			Z_SellableArray set [count(Z_SellableArray),_item];
			Z_SellArray set [_index,"deleted"];
			Z_SellArray = Z_SellArray - ["deleted"];
			_index2 = lbAdd [7401,  _item select 3];
			lbSetPicture [7401, _index2, _item select 4];
			call Z_calcPrice;	
		};
	};

	Z_pushAllToList = {
		Z_SellArray = Z_SellArray + Z_SellableArray;
		Z_SellableArray = [];
		call Z_clearLists;
		call Z_fillSellList;
		call Z_fillSellingList;
		call Z_calcPrice;
	};

	Z_removeAllToList = {
		Z_SellableArray = Z_SellableArray + Z_SellArray;
		Z_SellArray = [];
		call Z_clearLists;
		call Z_fillSellList;
		call Z_fillSellingList;
		call Z_calcPrice;
	};

	Z_SellItems = {
		_index = count (Z_SellArray) - 1;	
		_tempArray = Z_SellArray;
		if(_index &gt; -1)then{
			systemChat "Selling items.";	
			closeDialog 2;
			_outcome = [];
			_weaponsArray = [];
			_itemsArray = [];	
			_bpArray = [];	
			_bpCheckArray = [];
			_weaponsCheckArray = [];
			_itemsCheckArray = [];
			{ 		
				_type = _x select 1;
				_name = _x select 0;						

				switch (true) do {
					case (_type == "trade_items") :
					{
						_itemsArray set [count(_itemsArray),_name];
						_itemsCheckArray set [count(_itemsCheckArray),_x select 2];									
					};
					case (_type == "trade_weapons") :
					{
						_weaponsArray set [count(_weaponsArray),_name];
						_weaponsCheckArray set [count(_weaponsCheckArray),_x select 2];
					};
					case (_type == "trade_backpacks") :
					{
						_bpArray set [count(_bpArray),_name];
						_bpCheckArray set [count(_bpCheckArray),_x select 2];
					};
				};


				
			}count Z_SellArray;
			
			// closeDialog 2;
					
			if(Z_SellingFrom == 0)then{
				_outcome = [unitBackpack player,_itemsArray,_weaponsArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;
			};
			if(Z_SellingFrom == 1)then{	
				_outcome = [Z_vehicle,_itemsArray,_weaponsArray,_bpArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;		
			};
								
			//gear
			if(Z_SellingFrom == 2)then{
				_wA = [];
				_mA = [];
				{
					_localResult = [player,(_x select 0),1] call BIS_fnc_invRemove;
					if( _localResult != 1)then{
						if(_x select 1 == "trade_items")then{
							_mA set [count(_mA),0];
						}else{
							_wA set [count(_wA),0];
						};
					}else{
						if(_x select 1 == "trade_items")then{
							_mA set [count(_mA),1];
						}else{
							_wA set [count(_wA),1];
						};
					};
					
				}count Z_SellArray;
					
				_outcome set [0,_mA];	
				_outcome set [1,_wA];
				_outcome set [2,[]];					
			};
				
			_money = 0;		
			{
				_money = _money + ( ((_itemsCheckArray select _forEachIndex)) * _x) ;			
			}forEach (_outcome select 0);
			{
				_money = _money + ( ((_weaponsCheckArray select _forEachIndex)) * _x) ;				
			}forEach (_outcome select 1);
			
			{
				_money = _money + ( ( (_bpCheckArray select _forEachIndex) ) * _x) ;	
			}forEach (_outcome select 2);
			
			if(typeName _money  == "SCALAR")then{
				[player,_money] call SC_fnc_addCoins;	
				systemChat format["Received %1 %2", _money , CurrencyName];			
			}else{
				systemChat format["Money is not a number. Something went wrong."];			
			};									
		}else{
			systemChat format["No Items to Sell"];
		};						
	};
	
	Z_BuyItems = {	
		_magazinesToBuy = 0;
		_weaponsToBuy = 0;
		_backpacksToBuy = 0;
		
		_priceToBuy = 0;
		
		{
			if( _x select 1 == "trade_weapons")then{
				_weaponsToBuy = _weaponsToBuy + (_x select 5) ;
				_priceToBuy	= _priceToBuy + ((_x select 5)*(_x select 2));			
			};
			if( _x select 1 == "trade_items")then{
				_magazinesToBuy = _magazinesToBuy + (_x select 5) ;
				_priceToBuy	= _priceToBuy + ((_x select 2)*(_x select 5));
			};
			if( _x select 1 == "trade_backpacks")then{
				_backpacksToBuy = _backpacksToBuy + (_x select 5) ;
				_priceToBuy	= _priceToBuy + ((_x select 2)*(_x select 5));
			};	
		} count Z_BuyingArray;

		//recheck if there is enough space -&gt; not that some douche put extra stuff in.
		
		_canBuy = [_weaponsToBuy,_magazinesToBuy,_backpacksToBuy] call Z_allowBuying;
		
		_myMoney = player getVariable[Z_MoneyVariable,0];
		
		if(_myMoney &gt;= _priceToBuy)then{
		    
			
		
			if(_canBuy)then{	
			systemChat format["Start Buying for %1 %2",_priceToBuy,CurrencyName];
			
			closeDialog 2;
			
				if(Z_SellingFrom == 0)then{//backpack
				systemChat format["Adding %1 Items in backpack",count (Z_BuyingArray)];
					{
						if( _x select 1 == "trade_weapons")then{
							(unitBackpack player) addWeaponCargoGlobal [_x select 0, _x select 5];
							diag_log format ["%1 x %2 added", _x select 0, _x select 5];							
						};
						if( _x select 1 == "trade_items")then{
							(unitBackpack player) addMagazineCargoGlobal  [_x select 0, _x select 5];	
							diag_log format ["%1 x %2 added", _x select 0, _x select 5];	
						};					
					} count Z_BuyingArray;			
				};
				
				if(Z_SellingFrom == 1)then{//vehicle
					{
						systemChat format["Adding %1 Items in %2",count (Z_BuyingArray), typeOf Z_vehicle];
						if( _x select 1 == "trade_weapons")then{
							Z_vehicle addWeaponCargoGlobal [_x select 0, _x select 5];	
							diag_log format ["%1 x %2 added", _x select 0, _x select 5];								
						};
						if( _x select 1 == "trade_items")then{
							Z_vehicle addMagazineCargoGlobal [_x select 0, _x select 5];
							diag_log format ["%1 x %2 added", _x select 0, _x select 5];			
						};	
						if( _x select 1 == "trade_backpacks")then{
							Z_vehicle addBackpackCargoGlobal [_x select 0, _x select 5];	
							diag_log format ["%1 x %2 added", _x select 0, _x select 5];	
						};	
					} count Z_BuyingArray;	
				};
				
				if(Z_SellingFrom == 2)then{//gear	
					systemChat format["Adding %1 Items in gear",count (Z_BuyingArray)];
					{
						if( _x select 1 == "trade_weapons")then{
							_count = 0;
							while(_count &lt; _x select 5)do{
								player addWeapon (_x select 0);	
								diag_log format ["%1 added", _x select 0];	
								_count = _count + 1;
							};							 
						};
						if( _x select 1 == "trade_items")then{
							_count = 0;						
							 while{_count &lt; _x select 5}do{
								player addMagazine (_x select 0);	
								diag_log format ["%1 added", _x select 0];	
								_count = _count + 1;
							};	
						};					
					} count Z_BuyingArray;										
				};	
				systemChat format["removing %1 coins ",_priceToBuy];
				[player,_priceToBuy] call SC_fnc_removeCoins;	
				systemChat format["removed %1 coins ",_priceToBuy];				
			};				
		}else{
			systemChat format["You need %1 %2 to buy all these items.",_priceToBuy,CurrencyName];
		};
	
	};

	/* ----------------------------------------------------------------------------
	Examples:
	   _result = [_backpack, ["SmokeShell","M16_AMMO"],["M16","M16","M240"]] call ZUPA_fnc_removeWeaponsAndMagazinesCargo; 
	   _result == [[1,0,0,1,1,1,0],[1,0,0,1],[1,0]]; // 1 = success, 0 = fail -&gt;( item was not in cargo)
	   
	Author:
	   Zupa 2014-09-30
	---------------------------------------------------------------------------- */
	ZUPA_fnc_removeWeaponsAndMagazinesCargo = {
		private ["_unit", "_items","_weaps","_normalItems","_normalWeaps", "_count", "_i", "_unit_allItems", "_unit_allItems_types", "_unit_allItems_count", "_item_type", "_item_count", "__returnVar"];
		_unit = _this select 0;
		_items = _this select 1; 
		_weaps = _this select 2; 
		_bags = [];
		if(count _this &gt; 3)then{
			_bags = _this select 3; 
		};
		
		_normalItems = [];
		_normalWeaps = [];
		_normalBags = [];
		
		_unit_allItems = getMagazineCargo _unit; //  [[type1, typeN, ...],[count1, countN, ...]]
		_unit_allItems_types = _unit_allItems select 0;
		_unit_allItems_count = _unit_allItems select 1;	
		
		_unit_allWeaps = getWeaponCargo _unit; 
		_unit_allWeaps_types = _unit_allWeaps select 0;
		_unit_allWeaps_count = _unit_allWeaps select 1;	
		
		_unit_allBags = getBackpackCargo _unit; 
		_unit_allBags_types = _unit_allBags select 0;
		_unit_allBags_count = _unit_allBags select 1;	
		
		clearMagazineCargoGlobal _unit;	
		clearWeaponCargoGlobal _unit;
		
		if( count _bags &gt; 0 )then{					
			clearBackpackCargoGlobal  _unit;
		};	
		
		{
			_counter = 0 ;
			while{	_counter &lt; ( _unit_allItems_count select _forEachIndex)}do{
			_normalItems set [count(_normalItems),_x];
					_counter = _counter + 1;
			};
		}forEach _unit_allItems_types;				
		{
			_counter = 0 ;
			while{	_counter &lt; ( _unit_allWeaps_count select _forEachIndex)}do{
			_normalWeaps set [count(_normalWeaps),_x];
					_counter = _counter + 1;
			};
		}forEach _unit_allWeaps_types;	
		{
			_counter = 0 ;
			while{	_counter &lt; ( _unit_allBags_count select _forEachIndex)}do{
			_normalBagss set [count(_normalBags),_x];
					_counter = _counter + 1;
			};
		}forEach _unit_allBags_types;	
		
		_returnVar = [];	
		_returnMag = [];	
		_returnWeap = [];
		_returnBag = [];
		{		
			_inCargo = _normalItems find _x;
			if(_inCargo &gt; -1)then{
				_normalItems set [_inCargo, "soldItem"];
				_returnMag set [count(_returnMag),1];
			}else{
				_returnMag set [count(_returnMag),0];	
			};
		}count _items;	
		_normalItems = _normalItems - ["soldItem"];
		{				
			_unit addMagazineCargoGlobal [_x, 1];				
		}count _normalItems;	
		
		{		
			_inCargo = _normalWeaps find _x;
			if(_inCargo &gt; -1)then{
				_normalWeaps set [_inCargo, "soldItem"];
				_returnWeap set [count(_returnWeap),1];
			}else{
				_returnWeap set [count(_returnWeap),0];	
			};
		}count _weaps;	
		_normalWeaps = _normalWeaps - ["soldItem"];
		{				
			_unit addWeaponCargoGlobal [_x, 1];				
		}count _normalWeaps;
		
		{		
			_inCargo = _normalBags find _x;
			if(_inCargo &gt; -1)then{
				_normalBags set [_inCargo, "soldItem"];
				_returnBag set [count(_returnBag),1];
			}else{
				_returnBag set [count(_returnBag),0];	
			};
		}count _bags;	
		_normalWeaps = _normalWeaps - ["soldItem"];
		{				
			_unit addBackpackCargoGlobal [_x, 1];				
		}count _normalBags;
				
		_returnVar set [0,_returnMag];
		_returnVar set [1,_returnWeap];
		_returnVar set [2,_returnBag];
		_returnVar;
	};

	Z_ChangeBuySell = {		
		_dialog = findDisplay 711197;		
		Z_Selling = !Z_Selling;	
		if(Z_Selling)then{	
			(_dialog displayCtrl 7416) ctrlSetText "Buy";
			(_dialog displayCtrl 7409) ctrlSetText "Selling";
			{ctrlShow [_x,true];} forEach [7401,7402,7435,7430,7431,7432,7433]; // show
			{ctrlShow [_x,false];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // hide											
		}else{
			(_dialog displayCtrl 7416) ctrlSetText "Sell";
			(_dialog displayCtrl 7409) ctrlSetText "Buying";
			{ctrlShow [_x,true];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // show
			{ctrlShow [_x,false];} forEach [7401,7402,7435,7430,7431,7432,7433]; // hide	
			call Z_fillBuyList;
		};	
		[2] call Z_getContainer; // default gear		
	};

	Z_removeAllFromBuyingList = {
		Z_clearBuyingList;
		Z_BuyingArray = [];
	};

	Z_removeItemFromBuyingList = {
		_index = _this select 0;
		if(!isNil"_index" &amp;&amp; _index &gt; -1)then {
			lbDelete [7422, _index];
			Z_BuyingArray set [_index,"deleted"];
			Z_BuyingArray = Z_BuyingArray - ["deleted"];		
			call Z_calcPrice;	
		};
	};

	Z_toBuyingList = {
		_index = _this select 0;
		_amount = parseNumber(_this select 1);		
		if(!isNil"_index" &amp;&amp; _index &gt; -1 &amp;&amp; (typeName _amount == "SCALAR") &amp;&amp; _amount &gt; 0 )then {
			_temp = Z_BuyArray select _index;
			_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4, _amount ];
			Z_BuyingArray set [count(Z_BuyingArray),_item];		
			_index2 = lbAdd [7422, format["%1x: %2",_item select 5,_item select 3]];
			lbSetPicture [7422, _index2, _item select 4];
			call Z_calcPrice;
		};	
	};

	Z_fillBuyList = {
			call Z_clearBuyList;
			call Z_clearBuyingList;
			Z_BuyArray = [];
			Z_BuyingArray = [];
			_arrayOfTraderCat = Z_traderData;	
			_counter = 0;
			{	
						_cat =  format["Category_%1",(_arrayOfTraderCat select _forEachIndex select 1)];
						_cfgtraders = missionConfigFile &gt;&gt; "CfgTraderCategory"  &gt;&gt; _cat;
						for "_i" from 0 to (count _cfgtraders)-1 do
						{					
							_y  = _cfgtraders select _i;														
							if (isClass _y) then
							{
								_y  = configName (_y );
								_type =  getText(missionConfigFile &gt;&gt; "CfgTraderCategory"  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; "type");
								_buy = getArray(missionConfigFile &gt;&gt; "CfgTraderCategory"  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; "buy");
								_pic = "";
								_text = "";	
								if(_type == "trade_items")then{
									_pic = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'picture');
									_text = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'displayName');
									Z_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];
									_totalPrice = _totalPrice + (_buy select 0);																				
								};
								if(_type == "trade_weapons")then{
									_pic = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'picture');
									_text = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'displayName');
									Z_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];
									_totalPrice = _totalPrice + (_buy select 0);	
								};
							};																									
						};																	
			}forEach _arrayOfTraderCat;	
			call Z_fillBuylList;
			call Z_calcPrice;
	};

	Z_fillBuylList = {	
		{
			_index = lbAdd [7421,  _x select 3];
			lbSetPicture [7421, _index, _x select 4 ];
		}count Z_BuyArray;
	};

	Z_fillBuyingList = {
		{  		
			_index = lbAdd [7422, _x select 3];
			lbSetPicture [7422, _index,  _x select 4];
		}count Z_BuyingArray;
	};


	Z_calculateFreeSpace = {
		_selection = _this select 0;
		_returnArray = [0,0,0];
		if(_selection == 2) then{ //gear
			systemChat format["No advanced buying of weapons/backpacks currently into gear for security reasons!"];
			_allowedMags = 20 - count(magazines player);
			_allowedWeapons = 0;
			_allowedBackpacks = 0;		
			_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];
		};		
		if(_selection == 1) then{ //vehicle
			_allowedMags = 0;
			_allowedWeapons = 0;
			_allowedBackpacks = 0;
			if (!isNull Z_vehicle) then {   
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxWeapons');
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxMagazines');
				_allowedBackpacks = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportmaxbackpacks ');
			};									
			_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];
		};		
		if(_selection == 0) then{ //backpack
			_allowedWeapons = 0;
			_allowedMags = 0;
			_allowedBackpacks = 0;
			_backpack = unitBackpack player;
			if (!isNil "_backpack") then {   
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxWeapons');
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxMagazines');
				_allowedBackpacks = 0;
			};		
			_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];
		};				
		_dialog = findDisplay 711197;
		(_dialog displayCtrl 7404) ctrlSetText format["Free Slots: %1 / %2 / %3",_returnArray select 1,_returnArray select 0,_returnArray select 2];
	};
	
	Z_CheckCloseVehicle = {	
		Z_vehicle = objNull;
		_vehicle = objNull;
		_list = nearestObjects [(getPosATL player), ["AllVehicles"], Z_VehicleDistance];	
		{	
			if(!isNull _x &amp;&amp; local _x &amp;&amp; !isPlayer _x &amp;&amp; alive _x &amp;&amp; !(_x isKindOf "zZombie_base"))then{
				systemChat format["Selected %1",typeOf _x];
				_vehicle = _x;
			};
		}count _list;		
		_result = false;		
		if(!isNull _vehicle)then{
			Z_vehicle = _vehicle;
			_result = true;
			[format["Buying in %1.", typeOf Z_vehicle]] call Z_filleTradeTitle;				
		};						
		_result
	};
	
	Z_allowBuying = {
		//	Z_SellingFrom = 0 - backpack, 1 - car, 2 -gear
		_selection = Z_SellingFrom;
		_return = false;
		_toBuyWeaps = _this select 0;
		_toBuyMags = _this select 1;
		_toBuyBags = _this select 2;
		if(_selection == 2) then{ //gear
			systemChat format["Only 0 weapon /  backpack allowed to buy at a time for security reasons!"];
			_allowedMags = 20 - count(magazines player);
			_allowedWeapons = 0;
			_allowedBackpacks = 0;	
			
			_check1 = false;
			_check2 = false;
			_check3 = false;

			if( _allowedWeapons &gt;=_toBuyWeaps)then{
				_check1 = true;
			}else{
				systemChat format["You can only buy %1 weapons in your gear.",_allowedWeapons];
			};
			if( _allowedMags &gt;= _toBuyMags)then{
				_check2 = true;
			}else{
				systemChat format["You can only buy %1 magazines  in your gear.",_allowedMags];
			};		
			if( _allowedBackpacks &gt;= _toBuyBags)then{
				_check3 = true;
			}else{
				systemChat format["You can only buy %1 backpacks  in your gear.",_allowedBackpacks];
			};
			
			if(_check1 &amp;&amp; _check2 &amp;&amp; _check3)then{
				_return = true;
			};
			
		};		
		if(_selection == 1) then{ //vehicle
			_allowedMags = 0;
			_allowedWeapons = 0;
			_allowedBackpacks = 0;
			if ( !isNull Z_vehicle) then {   
			
				_mags = getMagazineCargo Z_vehicle;
				_weaps = getWeaponCargo Z_vehicle;
				_bags = getBackpackCargo Z_vehicle;
				
				_normalMags = [];
				_normalWeaps = [];
				_normalBags = [];
				
				_kinds = _mags select 0;
				_ammmounts = _mags select 1;
				{
					_counter = 0 ;
					while{	_counter &lt; ( 	_ammmounts select _forEachIndex)}do{
					_normalMags set [count(_normalMags),_x];
							_counter = _counter + 1;
					};
				}forEach _kinds;
				
				_kinds2 = _weaps select 0;
				_ammmounts2 = _weaps select 1;
				{
					_counter = 0 ;
					while{	_counter &lt; ( 	_ammmounts2 select _forEachIndex)}do{
						_normalWeaps set [count(_normalWeaps),_x];
						_counter = _counter + 1;
					};
				}forEach _kinds2;
				
				_kinds3 = _bags select 0;
				_ammmounts3 = _bags select 1;
				{
					_counter = 0 ;
					while{	_counter &lt; ( 	_ammmounts3 select _forEachIndex)}do{
						_normalBags set [count(_normalBags),_x];
						_counter = _counter + 1;
					};
				}forEach _kinds3;
			
						
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxWeapons') - count(_normalWeaps);
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxMagazines') - count(_normalMags);
				_allowedBackpacks = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportmaxbackpacks ') - count(_normalBags);
			}else{
				systemChat format["%1", typeName "Z_vehicle"];
			};	
			
			_check1 = false;
			_check2 = false;
			_check3 = false;

			if( _allowedWeapons &gt;= _toBuyWeaps)then{
				_check1 = true;
			}else{
				systemChat format["You can only buy %1 weapons in your vehicle.",_allowedWeapons];
			};
			if( _allowedMags &gt;= _toBuyMags)then{
				_check2 = true;
			}else{
				systemChat format["You can only buy %1 magazines in your vehicle.",_allowedMags];
			};			
			if( _allowedBackpacks &gt;= _toBuyBags)then{
				_check3 = true;
			}else{
				systemChat format["You can only buy %1 backpacks in your vehicle.",_allowedBackpacks];
			};
			
			if(_check1 &amp;&amp; _check2 &amp;&amp; _check3)then{
				_return = true;
			};					
		};		
		if(_selection == 0) then{ //backpack
			_allowedWeapons = 0;
			_allowedMags = 0;
			_allowedBackpacks = 0;
			_backpack = unitBackpack player;
			if (!isNil "_backpack") then {   
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxWeapons');
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxMagazines');
				_allowedBackpacks = 0;
			};		
			
			_check1 = false;
			_check2 = false;
			_check3 = false;
			_check4 = false;

			if( _allowedWeapons &gt;= _toBuyWeaps)then{
				_check1 = true;
			};
			if( _allowedMags &gt;= _toBuyMags)then{
				_check2 = true;
			};			
			if( _allowedBackpacks &gt;= _toBuyBags)then{
				_check3 = true;
			};									
			if(_check1 &amp;&amp; _check2 &amp;&amp; _check3 &amp;&amp; _check4)then{
				_return = true;			
			};	
			
			systemChat format["Buying to backpack is currently disabled for security reasons"];
		};

		_return
	};

	Z_AdvancedTradingInit = true;

};

createDialog "AdvancedTrading";

_dialog = findDisplay 711197;
(_dialog displayCtrl 7432) ctrlSetText " &lt; ";
(_dialog displayCtrl 7433) ctrlSetText " &lt;&lt; ";
(_dialog displayCtrl 7442) ctrlSetText " &lt; ";
(_dialog displayCtrl 7443) ctrlSetText " &lt;&lt; ";
{ctrlShow [_x,false];} forEach [7441,7436,7404,7422,7421,7436,7440,7442,7443,7404]; // hide	- double hide ( first one didn't work it seems.
call Z_getGearItems; 
</pre>
</div>
</div>
<div class="ipsPadding ipsHide cPostShareMenu" id="elShareComment_238702_menu">
<h5 class="ipsType_normal ipsType_reset">Link to comment</h5>
<input class="ipsField_fullWidth" type="text" value="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/"/>
<h5 class="ipsType_normal ipsType_reset ipsSpacer_top">Share on other sites</h5>
<ul class="ipsList_inline ipsList_noSpacing ipsClearfix" data-controller="core.front.core.sharelink">
<li>
<a class="cShareLink cShareLink_twitter" data-ipstooltip="" data-role="shareLink" href="https://twitter.com/share?url=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F%3Fdo%3DfindComment%26comment%3D238702" rel="nofollow noopener" target="_blank" title="Share on Twitter">
<i class="fa fa-twitter"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_facebook" data-ipstooltip="" data-role="shareLink" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F%3Fdo%3DfindComment%26comment%3D238702" rel="noopener nofollow" target="_blank" title="Share on Facebook">
<i class="fa fa-facebook"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_reddit" data-ipstooltip="" href="https://www.reddit.com/submit?url=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F%3Fdo%3DfindComment%26comment%3D238702&amp;title=Coins+and+Advanced+Trading" rel="nofollow noopener" target="_blank" title="Share on Reddit">
<i class="fa fa-reddit"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_pinterest" data-ipstooltip="" data-role="shareLink" href="https://pinterest.com/pin/create/button/?url=https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?do=findComment%26comment=238702&amp;media=https://epochmod.com/forum/uploads/monthly_2018_04/logo_only_black.png.c85695b79cad231dd136cd63c4db8256.png" rel="nofollow noopener" target="_blank" title="Share on Pinterest">
<i class="fa fa-pinterest"></i>
</a></li>
</ul>
<hr class="ipsHr"/>
<button class="ipsHide ipsButton ipsButton_small ipsButton_light ipsButton_fullWidth ipsMargin_top:half" data-controller="core.front.core.webshare" data-role="webShare" data-websharetext="Hello, 
Â  
I Have a Problem with   i trade normal with the Trader i get coins for items, but if i trade with Advanced Trading with Trader he get my Items but i get no coins any ideas? 
Â  
my advanced Trading / init.sqf -&gt; 

disableSerialization;

Z_traderData = (_this select 3); // gets the trader data ( menu_Functionary1 )

Z_Selling = true;
Z_SellingFrom = 2;

if( isNil &quot;Z_traderData&quot; || count (Z_traderData) == 0)exitWith{
	cutText [format[&quot;There went something wrong.&quot;], &quot;PLAIN DOWN&quot;];
};

if(isNil &quot;Z_AdvancedTradingInit&quot;)then{
// initiate the functions and variables for advanced trading -- easier for the people :) otherwise it would be in compiles or different file.
	Z_SellableArray = [];
	Z_SellArray = [];
	Z_BuyArray = [];
	Z_BuyingArray = [];
	Z_vehicle = objNull;
	Z_VehicleDistance = 30;
	Z_MoneyVariable = &quot;headShots&quot;; // Change this to whichever currency You are using.
	Z_NormalCurrency = false; // No effect yet. Not supported yet
	
	if(isNil 'CurrencyName')then{
		CurrencyName = 'Coins';
	};

	Z_filleTradeTitle = {
		_text = _this select 0;
		ctrlSetText [7408, _text];
	};

	Z_clearLists = {
		lbClear 7401;
		lbClear 7402;
	};

	Z_clearBuyList = {
	  lbClear 7421;
	};

	Z_clearBuyingList = {
	  lbClear 7422;
	};

	Z_getContainer = {
		_dialog = findDisplay 711197;
		(_dialog displayCtrl 7404) ctrlSetText format[&quot;Free Slots: 0 / 0 / 0&quot;];
		Z_clearBuyingList;
		Z_clearLists;
		Z_SellableArray = [];
		Z_SellArray = [];
		Z_BuyingArray = [];
		
		_lbIndex= _this select 0;

		if(Z_Selling)then{
			switch (_lbIndex) do {
				case 0: { 
					[&quot;Selling from backpack.&quot;] call Z_filleTradeTitle;
					Z_SellingFrom = 0;
					call Z_getBackpackItems; 
				};
				case 1: { 
					[&quot;Selling from vehicle.&quot;] call Z_filleTradeTitle;
					Z_SellingFrom = 1;
					call Z_getVehicleItems; 
				};
				case 2: { 
					[&quot;Selling from gear.&quot;] call Z_filleTradeTitle;
					Z_SellingFrom = 2;
					call Z_getGearItems; 
				};
			};
		}else{
			_ctrltext = format[&quot; &quot;];
			ctrlSetText [7413, _ctrltext];
			
			_ctrltext = format[&quot;These are all the items I'm selling!&quot;];
			ctrlSetText [7412, _ctrltext];
			switch (_lbIndex) do {
			
				case 0: { 
					Z_SellingFrom = 0;
					[&quot;Buying in backpack.&quot;] call Z_filleTradeTitle;
					[0] call Z_calculateFreeSpace;
				};
				case 1: { 
					Z_SellingFrom = 1;
					[&quot;Buying in vehicle.&quot;] call Z_filleTradeTitle;
					_canBuyInVehicle = call Z_CheckCloseVehicle;
					if(_canBuyInVehicle)then{
						[1] call Z_calculateFreeSpace; 
					}else{
						systemChat format[&quot;Get in driver seat to be able to trade to your vehicle.&quot;];						
						(_dialog displayCtrl 7404) ctrlSetText format[&quot;Free Slots: %1 / %2 / %3&quot;,0,0,0];
					};
				};
				case 2: {
					Z_SellingFrom = 2;				
					[&quot;Buying in gear.&quot;] call Z_filleTradeTitle;
					[2] call Z_calculateFreeSpace;
				};
			};
		};
	};

	Z_getBackpackItems = {
		call Z_clearLists;
		Z_SellableArray = [];
		Z_SellArray = [];
		_backpack = unitBackpack player;
		if (!isNil &quot;_backpack&quot;) then {    				
			_mags = getMagazineCargo _backpack;
			_weaps = getWeaponCargo _backpack;		
			_normalMags = [];
			_normalWeaps = [];			
			_kinds = _mags select 0;
			_ammmounts = _mags select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts select _forEachIndex)}do{
				_normalMags set [count(_normalMags),_x];
				_counter = _counter + 1;
				};
			}forEach _kinds;
			
			_kinds2 = _weaps select 0;
			_ammmounts2 = _weaps select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts2 select _forEachIndex)}do{
				_normalWeaps set [count(_normalWeaps),_x];
				_counter = _counter + 1;
				};
			}forEach _kinds2;
		
			[_normalMags,_normalWeaps, typeOf _backpack] call	Z_checkArrayInConfig;	
		}else{
			_ctrltext = format[&quot;I'm not stupid.&quot;];
			ctrlSetText [7413, _ctrltext];
			
			_ctrltext = format[&quot;You are not wearing a backpack.&quot;];
			ctrlSetText [7412, _ctrltext];
		};
	};

	Z_getVehicleItems = {
		Z_vehicle = objNull;
		call Z_clearLists;
		Z_SellableArray = [];
		Z_SellArray = [];
		_vehicle = objNull;
		
		_list = nearestObjects [(getPosATL player), [&quot;AllVehicles&quot;], Z_VehicleDistance];	
		{	
			if(!isNull _x &amp;&amp; local _x &amp;&amp; !isPlayer _x &amp;&amp; alive _x &amp;&amp; !(_x isKindOf &quot;zZombie_base&quot;))then{
				systemChat format[&quot;Selected %1&quot;,typeOf _x];
				_vehicle = _x;
			};
		}count _list;
		
		if(!isNull _vehicle)then{
			Z_vehicle = _vehicle;
			_mags = getMagazineCargo _vehicle;
			_weaps = getWeaponCargo _vehicle;
			
			_normalMags = [];
			_normalWeaps = [];
			
			_kinds = _mags select 0;
			_ammmounts = _mags select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts select _forEachIndex)}do{
				_normalMags set [count(_normalMags),_x];
						_counter = _counter + 1;
				};
			}forEach _kinds;
			
			_kinds2 = _weaps select 0;
			_ammmounts2 = _weaps select 1;
			{
				_counter = 0 ;
				while{	_counter &lt; ( 	_ammmounts2 select _forEachIndex)}do{
					_normalWeaps set [count(_normalWeaps),_x];
					_counter = _counter + 1;
				};
			}forEach _kinds2;
			
			
			[_normalWeaps,_normalMags, typeOf _vehicle] call Z_checkArrayInConfig;
		}else{
			_ctrltext = format[&quot;Get in driver seat first!&quot;];
			ctrlSetText [7413, _ctrltext];
			
			_ctrltext = format[&quot;I do not see any vehicle.&quot;];
			ctrlSetText [7412, _ctrltext];
		};	
	};

	Z_getGearItems = {
		call Z_clearLists;
		Z_SellArray = [];
		Z_SellableArray = [];
		 _mags = magazines player;
		 _weaps = weapons player;
		[_weaps,_mags,&quot;your gear&quot;] call	Z_checkArrayInConfig;			
	};

	Z_checkArrayInConfig = {
		_weaps = _this select 0;
		_mags = _this select 1;
		_extraText = _this select 2;
		_all = _weaps + _mags ;
		_total = count(_all);
		_arrayOfTraderCat = Z_traderData;
		_totalPrice = 0;
		if(_total &gt; 0)then{
			{
				_y = _x;				
				{	
						_cat =  format[&quot;Category_%1&quot;,(_arrayOfTraderCat select _forEachIndex select 1)];
						_excists = false;
						if(isClass(missionConfigFile &gt;&gt; &quot;CfgTraderCategory&quot;  &gt;&gt; _cat &gt;&gt; _y ))then{
						_excists = isClass(missionConfigFile &gt;&gt; &quot;CfgTraderCategory&quot;  &gt;&gt; _cat &gt;&gt; _y );		
						};					
					if(_excists)exitWith{
						_pic = &quot;&quot;;
						_text = &quot;&quot;;
						_type = getText(missionConfigFile &gt;&gt; &quot;CfgTraderCategory&quot;  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; &quot;type&quot;);
						_sell = getArray(missionConfigFile &gt;&gt; &quot;CfgTraderCategory&quot;  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; &quot;sell&quot;);									
						
						switch (true) do {
							case (_type == &quot;trade_items&quot;) :
							{
								_pic = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'picture');
								_text = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'displayName');
							};
							case (_type == &quot;trade_weapons&quot;) :
							{
								_pic = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'picture');
								_text = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'displayName');
							};
							case (_type == &quot;trade_backpacks&quot;) :
							{
								_pic = getText (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; _y &gt;&gt; 'picture');
								_text = getText (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; _y &gt;&gt; 'displayName');
							};
						};
						
						
						if( isNil '_text')then{_text = _y;};
						Z_SellableArray set [count(Z_SellableArray) , [_y,_type,_sell select 0,_text,_pic]];
						_totalPrice = _totalPrice + (_sell select 0);				
					};					
				}forEach _arrayOfTraderCat;				
			}count _all;	
					
			_backUpText = _extraText;
			if(Z_SellingFrom != 2)then{
				_extraText = getText (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; _extraText &gt;&gt; 'displayName');
			};
			if (isNil '_extraText')then{_extraText = _backUpText;};
			
			_ctrltext = format[&quot;I would offer %1 %2.&quot;, _totalPrice,CurrencyName];
			ctrlSetText [7413, _ctrltext];		
			_ctrltext = format[&quot;I accept %1 items from %2.&quot;, count(Z_SellableArray) , _extraText];
			ctrlSetText [7412, _ctrltext];	
			call Z_fillSellList;
		};		
	};

	Z_calcPrice = {
		_sellPrice = 0;
		if(Z_Selling)then{	
			{  		
				_sellPrice = _sellPrice +  (_x select 2);
			}count Z_SellArray;
		}else{
			{
				_sellPrice = _sellPrice +  ((_x select 2) * (_x select 5));
			}count Z_BuyingArray;
		};
		_ctrltext = format[&quot;%1 %2&quot;, _sellPrice , CurrencyName];
		ctrlSetText [7410, _ctrltext];	
	};

	Z_fillSellList = {
		
		{
			_index = lbAdd [7401,  _x select 3];
			lbSetPicture [7401, _index, _x select 4 ];
		}count Z_SellableArray;
	};

	Z_fillSellingList = {
		{  		
			_index = lbAdd [7402, _x select 3];
			lbSetPicture [7402, _index,  _x select 4];
		}count Z_SellArray;
	};

	Z_pushItemToList = {
		_index = _this select 0;
		if(!isNil&quot;_index&quot; &amp;&amp; _index &gt; -1)then {
			lbDelete [7401, _index];
			_temp = Z_SellableArray select _index;
			//_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];
			Z_SellArray set [count(Z_SellArray),_temp];
			Z_SellableArray set [_index,&quot;deleted&quot;];
			Z_SellableArray = Z_SellableArray - [&quot;deleted&quot;];
			_index2 = lbAdd [7402, _temp select 3];
			lbSetPicture [7402, _index2, _temp select 4];
			call Z_calcPrice;
		};
	};

	Z_removeItemFromList = {
		_index = _this select 0;
		if(!isNil&quot;_index&quot; &amp;&amp; _index &gt; -1)then {
			lbDelete [7402, _index];
			_temp = Z_SellArray select _index;
			_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];
			Z_SellableArray set [count(Z_SellableArray),_item];
			Z_SellArray set [_index,&quot;deleted&quot;];
			Z_SellArray = Z_SellArray - [&quot;deleted&quot;];
			_index2 = lbAdd [7401,  _item select 3];
			lbSetPicture [7401, _index2, _item select 4];
			call Z_calcPrice;	
		};
	};

	Z_pushAllToList = {
		Z_SellArray = Z_SellArray + Z_SellableArray;
		Z_SellableArray = [];
		call Z_clearLists;
		call Z_fillSellList;
		call Z_fillSellingList;
		call Z_calcPrice;
	};

	Z_removeAllToList = {
		Z_SellableArray = Z_SellableArray + Z_SellArray;
		Z_SellArray = [];
		call Z_clearLists;
		call Z_fillSellList;
		call Z_fillSellingList;
		call Z_calcPrice;
	};

	Z_SellItems = {
		_index = count (Z_SellArray) - 1;	
		_tempArray = Z_SellArray;
		if(_index &gt; -1)then{
			systemChat &quot;Selling items.&quot;;	
			closeDialog 2;
			_outcome = [];
			_weaponsArray = [];
			_itemsArray = [];	
			_bpArray = [];	
			_bpCheckArray = [];
			_weaponsCheckArray = [];
			_itemsCheckArray = [];
			{ 		
				_type = _x select 1;
				_name = _x select 0;						

				switch (true) do {
					case (_type == &quot;trade_items&quot;) :
					{
						_itemsArray set [count(_itemsArray),_name];
						_itemsCheckArray set [count(_itemsCheckArray),_x select 2];									
					};
					case (_type == &quot;trade_weapons&quot;) :
					{
						_weaponsArray set [count(_weaponsArray),_name];
						_weaponsCheckArray set [count(_weaponsCheckArray),_x select 2];
					};
					case (_type == &quot;trade_backpacks&quot;) :
					{
						_bpArray set [count(_bpArray),_name];
						_bpCheckArray set [count(_bpCheckArray),_x select 2];
					};
				};


				
			}count Z_SellArray;
			
			// closeDialog 2;
					
			if(Z_SellingFrom == 0)then{
				_outcome = [unitBackpack player,_itemsArray,_weaponsArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;
			};
			if(Z_SellingFrom == 1)then{	
				_outcome = [Z_vehicle,_itemsArray,_weaponsArray,_bpArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;		
			};
								
			//gear
			if(Z_SellingFrom == 2)then{
				_wA = [];
				_mA = [];
				{
					_localResult = [player,(_x select 0),1] call BIS_fnc_invRemove;
					if( _localResult != 1)then{
						if(_x select 1 == &quot;trade_items&quot;)then{
							_mA set [count(_mA),0];
						}else{
							_wA set [count(_wA),0];
						};
					}else{
						if(_x select 1 == &quot;trade_items&quot;)then{
							_mA set [count(_mA),1];
						}else{
							_wA set [count(_wA),1];
						};
					};
					
				}count Z_SellArray;
					
				_outcome set [0,_mA];	
				_outcome set [1,_wA];
				_outcome set [2,[]];					
			};
				
			_money = 0;		
			{
				_money = _money + ( ((_itemsCheckArray select _forEachIndex)) * _x) ;			
			}forEach (_outcome select 0);
			{
				_money = _money + ( ((_weaponsCheckArray select _forEachIndex)) * _x) ;				
			}forEach (_outcome select 1);
			
			{
				_money = _money + ( ( (_bpCheckArray select _forEachIndex) ) * _x) ;	
			}forEach (_outcome select 2);
			
			if(typeName _money  == &quot;SCALAR&quot;)then{
				[player,_money] call SC_fnc_addCoins;	
				systemChat format[&quot;Received %1 %2&quot;, _money , CurrencyName];			
			}else{
				systemChat format[&quot;Money is not a number. Something went wrong.&quot;];			
			};									
		}else{
			systemChat format[&quot;No Items to Sell&quot;];
		};						
	};
	
	Z_BuyItems = {	
		_magazinesToBuy = 0;
		_weaponsToBuy = 0;
		_backpacksToBuy = 0;
		
		_priceToBuy = 0;
		
		{
			if( _x select 1 == &quot;trade_weapons&quot;)then{
				_weaponsToBuy = _weaponsToBuy + (_x select 5) ;
				_priceToBuy	= _priceToBuy + ((_x select 5)*(_x select 2));			
			};
			if( _x select 1 == &quot;trade_items&quot;)then{
				_magazinesToBuy = _magazinesToBuy + (_x select 5) ;
				_priceToBuy	= _priceToBuy + ((_x select 2)*(_x select 5));
			};
			if( _x select 1 == &quot;trade_backpacks&quot;)then{
				_backpacksToBuy = _backpacksToBuy + (_x select 5) ;
				_priceToBuy	= _priceToBuy + ((_x select 2)*(_x select 5));
			};	
		} count Z_BuyingArray;

		//recheck if there is enough space -&gt; not that some douche put extra stuff in.
		
		_canBuy = [_weaponsToBuy,_magazinesToBuy,_backpacksToBuy] call Z_allowBuying;
		
		_myMoney = player getVariable[Z_MoneyVariable,0];
		
		if(_myMoney &gt;= _priceToBuy)then{
		    
			
		
			if(_canBuy)then{	
			systemChat format[&quot;Start Buying for %1 %2&quot;,_priceToBuy,CurrencyName];
			
			closeDialog 2;
			
				if(Z_SellingFrom == 0)then{//backpack
				systemChat format[&quot;Adding %1 Items in backpack&quot;,count (Z_BuyingArray)];
					{
						if( _x select 1 == &quot;trade_weapons&quot;)then{
							(unitBackpack player) addWeaponCargoGlobal [_x select 0, _x select 5];
							diag_log format [&quot;%1 x %2 added&quot;, _x select 0, _x select 5];							
						};
						if( _x select 1 == &quot;trade_items&quot;)then{
							(unitBackpack player) addMagazineCargoGlobal  [_x select 0, _x select 5];	
							diag_log format [&quot;%1 x %2 added&quot;, _x select 0, _x select 5];	
						};					
					} count Z_BuyingArray;			
				};
				
				if(Z_SellingFrom == 1)then{//vehicle
					{
						systemChat format[&quot;Adding %1 Items in %2&quot;,count (Z_BuyingArray), typeOf Z_vehicle];
						if( _x select 1 == &quot;trade_weapons&quot;)then{
							Z_vehicle addWeaponCargoGlobal [_x select 0, _x select 5];	
							diag_log format [&quot;%1 x %2 added&quot;, _x select 0, _x select 5];								
						};
						if( _x select 1 == &quot;trade_items&quot;)then{
							Z_vehicle addMagazineCargoGlobal [_x select 0, _x select 5];
							diag_log format [&quot;%1 x %2 added&quot;, _x select 0, _x select 5];			
						};	
						if( _x select 1 == &quot;trade_backpacks&quot;)then{
							Z_vehicle addBackpackCargoGlobal [_x select 0, _x select 5];	
							diag_log format [&quot;%1 x %2 added&quot;, _x select 0, _x select 5];	
						};	
					} count Z_BuyingArray;	
				};
				
				if(Z_SellingFrom == 2)then{//gear	
					systemChat format[&quot;Adding %1 Items in gear&quot;,count (Z_BuyingArray)];
					{
						if( _x select 1 == &quot;trade_weapons&quot;)then{
							_count = 0;
							while(_count &lt; _x select 5)do{
								player addWeapon (_x select 0);	
								diag_log format [&quot;%1 added&quot;, _x select 0];	
								_count = _count + 1;
							};							 
						};
						if( _x select 1 == &quot;trade_items&quot;)then{
							_count = 0;						
							 while{_count &lt; _x select 5}do{
								player addMagazine (_x select 0);	
								diag_log format [&quot;%1 added&quot;, _x select 0];	
								_count = _count + 1;
							};	
						};					
					} count Z_BuyingArray;										
				};	
				systemChat format[&quot;removing %1 coins &quot;,_priceToBuy];
				[player,_priceToBuy] call SC_fnc_removeCoins;	
				systemChat format[&quot;removed %1 coins &quot;,_priceToBuy];				
			};				
		}else{
			systemChat format[&quot;You need %1 %2 to buy all these items.&quot;,_priceToBuy,CurrencyName];
		};
	
	};

	/* ----------------------------------------------------------------------------
	Examples:
	   _result = [_backpack, [&quot;SmokeShell&quot;,&quot;M16_AMMO&quot;],[&quot;M16&quot;,&quot;M16&quot;,&quot;M240&quot;]] call ZUPA_fnc_removeWeaponsAndMagazinesCargo; 
	   _result == [[1,0,0,1,1,1,0],[1,0,0,1],[1,0]]; // 1 = success, 0 = fail -&gt;( item was not in cargo)
	   
	Author:
	   Zupa 2014-09-30
	---------------------------------------------------------------------------- */
	ZUPA_fnc_removeWeaponsAndMagazinesCargo = {
		private [&quot;_unit&quot;, &quot;_items&quot;,&quot;_weaps&quot;,&quot;_normalItems&quot;,&quot;_normalWeaps&quot;, &quot;_count&quot;, &quot;_i&quot;, &quot;_unit_allItems&quot;, &quot;_unit_allItems_types&quot;, &quot;_unit_allItems_count&quot;, &quot;_item_type&quot;, &quot;_item_count&quot;, &quot;__returnVar&quot;];
		_unit = _this select 0;
		_items = _this select 1; 
		_weaps = _this select 2; 
		_bags = [];
		if(count _this &gt; 3)then{
			_bags = _this select 3; 
		};
		
		_normalItems = [];
		_normalWeaps = [];
		_normalBags = [];
		
		_unit_allItems = getMagazineCargo _unit; //  [[type1, typeN, ...],[count1, countN, ...]]
		_unit_allItems_types = _unit_allItems select 0;
		_unit_allItems_count = _unit_allItems select 1;	
		
		_unit_allWeaps = getWeaponCargo _unit; 
		_unit_allWeaps_types = _unit_allWeaps select 0;
		_unit_allWeaps_count = _unit_allWeaps select 1;	
		
		_unit_allBags = getBackpackCargo _unit; 
		_unit_allBags_types = _unit_allBags select 0;
		_unit_allBags_count = _unit_allBags select 1;	
		
		clearMagazineCargoGlobal _unit;	
		clearWeaponCargoGlobal _unit;
		
		if( count _bags &gt; 0 )then{					
			clearBackpackCargoGlobal  _unit;
		};	
		
		{
			_counter = 0 ;
			while{	_counter &lt; ( _unit_allItems_count select _forEachIndex)}do{
			_normalItems set [count(_normalItems),_x];
					_counter = _counter + 1;
			};
		}forEach _unit_allItems_types;				
		{
			_counter = 0 ;
			while{	_counter &lt; ( _unit_allWeaps_count select _forEachIndex)}do{
			_normalWeaps set [count(_normalWeaps),_x];
					_counter = _counter + 1;
			};
		}forEach _unit_allWeaps_types;	
		{
			_counter = 0 ;
			while{	_counter &lt; ( _unit_allBags_count select _forEachIndex)}do{
			_normalBagss set [count(_normalBags),_x];
					_counter = _counter + 1;
			};
		}forEach _unit_allBags_types;	
		
		_returnVar = [];	
		_returnMag = [];	
		_returnWeap = [];
		_returnBag = [];
		{		
			_inCargo = _normalItems find _x;
			if(_inCargo &gt; -1)then{
				_normalItems set [_inCargo, &quot;soldItem&quot;];
				_returnMag set [count(_returnMag),1];
			}else{
				_returnMag set [count(_returnMag),0];	
			};
		}count _items;	
		_normalItems = _normalItems - [&quot;soldItem&quot;];
		{				
			_unit addMagazineCargoGlobal [_x, 1];				
		}count _normalItems;	
		
		{		
			_inCargo = _normalWeaps find _x;
			if(_inCargo &gt; -1)then{
				_normalWeaps set [_inCargo, &quot;soldItem&quot;];
				_returnWeap set [count(_returnWeap),1];
			}else{
				_returnWeap set [count(_returnWeap),0];	
			};
		}count _weaps;	
		_normalWeaps = _normalWeaps - [&quot;soldItem&quot;];
		{				
			_unit addWeaponCargoGlobal [_x, 1];				
		}count _normalWeaps;
		
		{		
			_inCargo = _normalBags find _x;
			if(_inCargo &gt; -1)then{
				_normalBags set [_inCargo, &quot;soldItem&quot;];
				_returnBag set [count(_returnBag),1];
			}else{
				_returnBag set [count(_returnBag),0];	
			};
		}count _bags;	
		_normalWeaps = _normalWeaps - [&quot;soldItem&quot;];
		{				
			_unit addBackpackCargoGlobal [_x, 1];				
		}count _normalBags;
				
		_returnVar set [0,_returnMag];
		_returnVar set [1,_returnWeap];
		_returnVar set [2,_returnBag];
		_returnVar;
	};

	Z_ChangeBuySell = {		
		_dialog = findDisplay 711197;		
		Z_Selling = !Z_Selling;	
		if(Z_Selling)then{	
			(_dialog displayCtrl 7416) ctrlSetText &quot;Buy&quot;;
			(_dialog displayCtrl 7409) ctrlSetText &quot;Selling&quot;;
			{ctrlShow [_x,true];} forEach [7401,7402,7435,7430,7431,7432,7433]; // show
			{ctrlShow [_x,false];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // hide											
		}else{
			(_dialog displayCtrl 7416) ctrlSetText &quot;Sell&quot;;
			(_dialog displayCtrl 7409) ctrlSetText &quot;Buying&quot;;
			{ctrlShow [_x,true];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // show
			{ctrlShow [_x,false];} forEach [7401,7402,7435,7430,7431,7432,7433]; // hide	
			call Z_fillBuyList;
		};	
		[2] call Z_getContainer; // default gear		
	};

	Z_removeAllFromBuyingList = {
		Z_clearBuyingList;
		Z_BuyingArray = [];
	};

	Z_removeItemFromBuyingList = {
		_index = _this select 0;
		if(!isNil&quot;_index&quot; &amp;&amp; _index &gt; -1)then {
			lbDelete [7422, _index];
			Z_BuyingArray set [_index,&quot;deleted&quot;];
			Z_BuyingArray = Z_BuyingArray - [&quot;deleted&quot;];		
			call Z_calcPrice;	
		};
	};

	Z_toBuyingList = {
		_index = _this select 0;
		_amount = parseNumber(_this select 1);		
		if(!isNil&quot;_index&quot; &amp;&amp; _index &gt; -1 &amp;&amp; (typeName _amount == &quot;SCALAR&quot;) &amp;&amp; _amount &gt; 0 )then {
			_temp = Z_BuyArray select _index;
			_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4, _amount ];
			Z_BuyingArray set [count(Z_BuyingArray),_item];		
			_index2 = lbAdd [7422, format[&quot;%1x: %2&quot;,_item select 5,_item select 3]];
			lbSetPicture [7422, _index2, _item select 4];
			call Z_calcPrice;
		};	
	};

	Z_fillBuyList = {
			call Z_clearBuyList;
			call Z_clearBuyingList;
			Z_BuyArray = [];
			Z_BuyingArray = [];
			_arrayOfTraderCat = Z_traderData;	
			_counter = 0;
			{	
						_cat =  format[&quot;Category_%1&quot;,(_arrayOfTraderCat select _forEachIndex select 1)];
						_cfgtraders = missionConfigFile &gt;&gt; &quot;CfgTraderCategory&quot;  &gt;&gt; _cat;
						for &quot;_i&quot; from 0 to (count _cfgtraders)-1 do
						{					
							_y  = _cfgtraders select _i;														
							if (isClass _y) then
							{
								_y  = configName (_y );
								_type =  getText(missionConfigFile &gt;&gt; &quot;CfgTraderCategory&quot;  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; &quot;type&quot;);
								_buy = getArray(missionConfigFile &gt;&gt; &quot;CfgTraderCategory&quot;  &gt;&gt; _cat  &gt;&gt; _y &gt;&gt; &quot;buy&quot;);
								_pic = &quot;&quot;;
								_text = &quot;&quot;;	
								if(_type == &quot;trade_items&quot;)then{
									_pic = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'picture');
									_text = getText (configFile &gt;&gt; 'CfgMagazines' &gt;&gt; _y &gt;&gt; 'displayName');
									Z_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];
									_totalPrice = _totalPrice + (_buy select 0);																				
								};
								if(_type == &quot;trade_weapons&quot;)then{
									_pic = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'picture');
									_text = getText (configFile &gt;&gt; 'CfgWeapons' &gt;&gt; _y &gt;&gt; 'displayName');
									Z_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];
									_totalPrice = _totalPrice + (_buy select 0);	
								};
							};																									
						};																	
			}forEach _arrayOfTraderCat;	
			call Z_fillBuylList;
			call Z_calcPrice;
	};

	Z_fillBuylList = {	
		{
			_index = lbAdd [7421,  _x select 3];
			lbSetPicture [7421, _index, _x select 4 ];
		}count Z_BuyArray;
	};

	Z_fillBuyingList = {
		{  		
			_index = lbAdd [7422, _x select 3];
			lbSetPicture [7422, _index,  _x select 4];
		}count Z_BuyingArray;
	};


	Z_calculateFreeSpace = {
		_selection = _this select 0;
		_returnArray = [0,0,0];
		if(_selection == 2) then{ //gear
			systemChat format[&quot;No advanced buying of weapons/backpacks currently into gear for security reasons!&quot;];
			_allowedMags = 20 - count(magazines player);
			_allowedWeapons = 0;
			_allowedBackpacks = 0;		
			_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];
		};		
		if(_selection == 1) then{ //vehicle
			_allowedMags = 0;
			_allowedWeapons = 0;
			_allowedBackpacks = 0;
			if (!isNull Z_vehicle) then {   
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxWeapons');
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxMagazines');
				_allowedBackpacks = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportmaxbackpacks ');
			};									
			_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];
		};		
		if(_selection == 0) then{ //backpack
			_allowedWeapons = 0;
			_allowedMags = 0;
			_allowedBackpacks = 0;
			_backpack = unitBackpack player;
			if (!isNil &quot;_backpack&quot;) then {   
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxWeapons');
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxMagazines');
				_allowedBackpacks = 0;
			};		
			_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];
		};				
		_dialog = findDisplay 711197;
		(_dialog displayCtrl 7404) ctrlSetText format[&quot;Free Slots: %1 / %2 / %3&quot;,_returnArray select 1,_returnArray select 0,_returnArray select 2];
	};
	
	Z_CheckCloseVehicle = {	
		Z_vehicle = objNull;
		_vehicle = objNull;
		_list = nearestObjects [(getPosATL player), [&quot;AllVehicles&quot;], Z_VehicleDistance];	
		{	
			if(!isNull _x &amp;&amp; local _x &amp;&amp; !isPlayer _x &amp;&amp; alive _x &amp;&amp; !(_x isKindOf &quot;zZombie_base&quot;))then{
				systemChat format[&quot;Selected %1&quot;,typeOf _x];
				_vehicle = _x;
			};
		}count _list;		
		_result = false;		
		if(!isNull _vehicle)then{
			Z_vehicle = _vehicle;
			_result = true;
			[format[&quot;Buying in %1.&quot;, typeOf Z_vehicle]] call Z_filleTradeTitle;				
		};						
		_result
	};
	
	Z_allowBuying = {
		//	Z_SellingFrom = 0 - backpack, 1 - car, 2 -gear
		_selection = Z_SellingFrom;
		_return = false;
		_toBuyWeaps = _this select 0;
		_toBuyMags = _this select 1;
		_toBuyBags = _this select 2;
		if(_selection == 2) then{ //gear
			systemChat format[&quot;Only 0 weapon /  backpack allowed to buy at a time for security reasons!&quot;];
			_allowedMags = 20 - count(magazines player);
			_allowedWeapons = 0;
			_allowedBackpacks = 0;	
			
			_check1 = false;
			_check2 = false;
			_check3 = false;

			if( _allowedWeapons &gt;=_toBuyWeaps)then{
				_check1 = true;
			}else{
				systemChat format[&quot;You can only buy %1 weapons in your gear.&quot;,_allowedWeapons];
			};
			if( _allowedMags &gt;= _toBuyMags)then{
				_check2 = true;
			}else{
				systemChat format[&quot;You can only buy %1 magazines  in your gear.&quot;,_allowedMags];
			};		
			if( _allowedBackpacks &gt;= _toBuyBags)then{
				_check3 = true;
			}else{
				systemChat format[&quot;You can only buy %1 backpacks  in your gear.&quot;,_allowedBackpacks];
			};
			
			if(_check1 &amp;&amp; _check2 &amp;&amp; _check3)then{
				_return = true;
			};
			
		};		
		if(_selection == 1) then{ //vehicle
			_allowedMags = 0;
			_allowedWeapons = 0;
			_allowedBackpacks = 0;
			if ( !isNull Z_vehicle) then {   
			
				_mags = getMagazineCargo Z_vehicle;
				_weaps = getWeaponCargo Z_vehicle;
				_bags = getBackpackCargo Z_vehicle;
				
				_normalMags = [];
				_normalWeaps = [];
				_normalBags = [];
				
				_kinds = _mags select 0;
				_ammmounts = _mags select 1;
				{
					_counter = 0 ;
					while{	_counter &lt; ( 	_ammmounts select _forEachIndex)}do{
					_normalMags set [count(_normalMags),_x];
							_counter = _counter + 1;
					};
				}forEach _kinds;
				
				_kinds2 = _weaps select 0;
				_ammmounts2 = _weaps select 1;
				{
					_counter = 0 ;
					while{	_counter &lt; ( 	_ammmounts2 select _forEachIndex)}do{
						_normalWeaps set [count(_normalWeaps),_x];
						_counter = _counter + 1;
					};
				}forEach _kinds2;
				
				_kinds3 = _bags select 0;
				_ammmounts3 = _bags select 1;
				{
					_counter = 0 ;
					while{	_counter &lt; ( 	_ammmounts3 select _forEachIndex)}do{
						_normalBags set [count(_normalBags),_x];
						_counter = _counter + 1;
					};
				}forEach _kinds3;
			
						
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxWeapons') - count(_normalWeaps);
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportMaxMagazines') - count(_normalMags);
				_allowedBackpacks = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf Z_vehicle) &gt;&gt; 'transportmaxbackpacks ') - count(_normalBags);
			}else{
				systemChat format[&quot;%1&quot;, typeName &quot;Z_vehicle&quot;];
			};	
			
			_check1 = false;
			_check2 = false;
			_check3 = false;

			if( _allowedWeapons &gt;= _toBuyWeaps)then{
				_check1 = true;
			}else{
				systemChat format[&quot;You can only buy %1 weapons in your vehicle.&quot;,_allowedWeapons];
			};
			if( _allowedMags &gt;= _toBuyMags)then{
				_check2 = true;
			}else{
				systemChat format[&quot;You can only buy %1 magazines in your vehicle.&quot;,_allowedMags];
			};			
			if( _allowedBackpacks &gt;= _toBuyBags)then{
				_check3 = true;
			}else{
				systemChat format[&quot;You can only buy %1 backpacks in your vehicle.&quot;,_allowedBackpacks];
			};
			
			if(_check1 &amp;&amp; _check2 &amp;&amp; _check3)then{
				_return = true;
			};					
		};		
		if(_selection == 0) then{ //backpack
			_allowedWeapons = 0;
			_allowedMags = 0;
			_allowedBackpacks = 0;
			_backpack = unitBackpack player;
			if (!isNil &quot;_backpack&quot;) then {   
				_allowedWeapons = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxWeapons');
				_allowedMags = getNumber (configFile &gt;&gt; 'CfgVehicles' &gt;&gt; (typeOf _backpack) &gt;&gt; 'transportMaxMagazines');
				_allowedBackpacks = 0;
			};		
			
			_check1 = false;
			_check2 = false;
			_check3 = false;
			_check4 = false;

			if( _allowedWeapons &gt;= _toBuyWeaps)then{
				_check1 = true;
			};
			if( _allowedMags &gt;= _toBuyMags)then{
				_check2 = true;
			};			
			if( _allowedBackpacks &gt;= _toBuyBags)then{
				_check3 = true;
			};									
			if(_check1 &amp;&amp; _check2 &amp;&amp; _check3 &amp;&amp; _check4)then{
				_return = true;			
			};	
			
			systemChat format[&quot;Buying to backpack is currently disabled for security reasons&quot;];
		};

		_return
	};

	Z_AdvancedTradingInit = true;

};

createDialog &quot;AdvancedTrading&quot;;

_dialog = findDisplay 711197;
(_dialog displayCtrl 7432) ctrlSetText &quot; &lt; &quot;;
(_dialog displayCtrl 7433) ctrlSetText &quot; &lt;&lt; &quot;;
(_dialog displayCtrl 7442) ctrlSetText &quot; &lt; &quot;;
(_dialog displayCtrl 7443) ctrlSetText &quot; &lt;&lt; &quot;;
{ctrlShow [_x,false];} forEach [7441,7436,7404,7422,7421,7436,7440,7442,7443,7404]; // hide	- double hide ( first one didn't work it seems.
call Z_getGearItems; 

" data-websharetitle="Coins and Advanced Trading" data-webshareurl="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?do=findComment&amp;comment=238702">More sharing options...</button>
</div>
</div>
</div>
</article>
</div>
<div class="ipsSpacer_both">
<div class="ipsBox ipsResponsive_pull ipsMargin_bottom">
<h2 class="ipsType_sectionTitle ipsType_reset ipsHide">0 answers to this question</h2>
<div class="ipsPadding:half ipsClearfix">
<ul class="ipsPos_right ipsButtonRow ipsClearfix sm:ipsMargin_bottom:half">
<li>
<a class="ipsButtonRow_active" href="index.html" id="elSortBy_answers">Sort by votes</a>
</li>
<li>
<a href="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?sortby=date" id="elSortBy_date">Sort by date</a>
</li>
</ul>
</div>
</div>
</div>
<div class="ipsRecommendedComments ipsHide" data-controller="core.front.core.recommendedComments" data-url="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?recommended=comments">
<div data-role="recommendedComments">
<h2 class="ipsType_sectionHead ipsType_large ipsType_bold ipsMargin_bottom">Recommended Posts</h2>
</div>
</div>
<div data-controller="core.front.core.moderation" data-role="commentFeed" id="elPostFeed">
<form action="https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/?csrfKey=bbd96aef55be1a90d685e56a4524d73a&amp;do=multimodComment" data-ipspageaction="" data-role="moderationTools" method="post">
<p class="ipsType_center ipsType_light ipsType_large ipsPad" data-role="noComments">
						There have been no answers to this question yet
					</p>
<input name="csrfKey" type="hidden" value="bbd96aef55be1a90d685e56a4524d73a">
</input></form>
</div>
<a id="replyForm"></a>
<div class="cTopicPostArea ipsBox ipsResponsive_pull ipsPadding cTopicPostArea_noSize ipsSpacer_top" data-role="replyArea">
<div>
<input name="csrfKey" type="hidden" value="bbd96aef55be1a90d685e56a4524d73a"/>
<div class="ipsType_center ipsPad">
<h2 class="ipsType_pageTitle">Please sign in to comment</h2>
<p class="ipsType_light ipsType_normal ipsType_reset ipsSpacer_top ipsSpacer_half">You will be able to leave a comment after signing in</p>
<br/>
<br/>
<a class="ipsButton ipsButton_alternate ipsButton_large" data-ipsdialog="" data-ipsdialog-remoteverify="false" data-ipsdialog-size="medium" data-ipsdialog-title="Sign In Now" href="https://epochmod.com/forum/login/?ref=aHR0cHM6Ly9kNDIyLmVwb2NobW9kLmNvbS9mb3J1bS90b3BpYy8zNTE0OS1jb2lucy1hbmQtYWR2YW5jZWQtdHJhZGluZy8jcmVwbHlGb3Jt">Sign In Now</a>
</div>
</div>
</div>
<div class="ipsBox ipsPadding ipsResponsive_pull ipsResponsive_showPhone ipsMargin_top">
<div class="ipsShareLinks">
<a class="ipsShareButton ipsButton ipsButton_verySmall ipsButton_light" data-ipsmenu="" href="#elShareItem_menu" id="elShareItem">
<span><i class="fa fa-share-alt"></i></span> Â Share
    </a>
<div class="ipsPadding ipsMenu ipsMenu_auto ipsHide" data-controller="core.front.core.sharelink" id="elShareItem_menu">
<ul class="ipsList_inline">
<li>
<a class="cShareLink cShareLink_twitter" data-ipstooltip="" data-role="shareLink" href="https://twitter.com/share?url=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F" rel="nofollow noopener" target="_blank" title="Share on Twitter">
<i class="fa fa-twitter"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_facebook" data-ipstooltip="" data-role="shareLink" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F" rel="noopener nofollow" target="_blank" title="Share on Facebook">
<i class="fa fa-facebook"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_reddit" data-ipstooltip="" href="https://www.reddit.com/submit?url=https%3A%2F%2Fepochmod.com%2Fforum%2Ftopic%2F35149-coins-and-advanced-trading%2F&amp;title=Coins+and+Advanced+Trading" rel="nofollow noopener" target="_blank" title="Share on Reddit">
<i class="fa fa-reddit"></i>
</a></li>
<li>
<a class="cShareLink cShareLink_pinterest" data-ipstooltip="" data-role="shareLink" href="https://pinterest.com/pin/create/button/?url=https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/&amp;media=https://epochmod.com/forum/uploads/monthly_2018_04/logo_only_black.png.c85695b79cad231dd136cd63c4db8256.png" rel="nofollow noopener" target="_blank" title="Share on Pinterest">
<i class="fa fa-pinterest"></i>
</a></li>
</ul>
<hr class="ipsHr"/>
<button class="ipsHide ipsButton ipsButton_verySmall ipsButton_light ipsButton_fullWidth ipsMargin_top:half" data-controller="core.front.core.webshare" data-role="webShare" data-websharetext="Coins and Advanced Trading" data-websharetitle="Coins and Advanced Trading" data-webshareurl="index.html">More sharing options...</button>
</div>
<div data-controller="core.front.core.followButton" data-followapp="forums" data-followarea="topic" data-followid="35149">
<a class="ipsFollow ipsPos_middle ipsButton ipsButton_light ipsButton_verySmall ipsButton_disabled" data-ipstooltip="" data-role="followButton" href="https://epochmod.com/forum/login/" rel="nofollow" title="Sign in to follow this">
<span>Followers</span>
<span class="ipsCommentCount">0</span>
</a>
</div>
</div>
</div>
</div>
<div class="ipsPager ipsSpacer_top">
<div class="ipsPager_prev">
<a href="../../forum/35-scripting/index.html" rel="parent" title="Go to Scripting">
<span class="ipsPager_type">Go to question listing</span>
</a>
</div>
</div>
<div class="cWidgetContainer" data-orientation="horizontal" data-role="widgetReceiver" data-widgetarea="footer">
<ul class="ipsList_reset">
<li class="ipsWidget ipsWidget_horizontal ipsBox ipsWidgetHide ipsHide" data-blockconfig="true" data-blockerrormessage="This block cannot be shown. This could be because it needs configuring, is unable to show on this page, or will show after reloading this page." data-blockid="app_core_relatedContent_sido2emh4" data-blocktitle="Similar Content" data-controller="core.front.widgets.block"></li>
<li class="ipsWidget ipsWidget_horizontal ipsBox" data-blockconfig="true" data-blockerrormessage="This block cannot be shown. This could be because it needs configuring, is unable to show on this page, or will show after reloading this page." data-blockid="app_cms_Blocks_mtkskjhzs" data-blocktitle="Custom Blocks" data-controller="core.front.widgets.block">
Advertisement


</li>
</ul>
</div>
</div>
<div class="ipsLayout_sidebarright" data-controller="core.front.widgets.sidebar" id="ipsLayout_sidebar">
<div class="cWidgetContainer" data-orientation="vertical" data-role="widgetReceiver" data-widgetarea="sidebar">
<ul class="ipsList_reset">
<li class="ipsWidget ipsWidget_vertical ipsBox" data-blockconfig="true" data-blockerrormessage="This block cannot be shown. This could be because it needs configuring, is unable to show on this page, or will show after reloading this page." data-blockid="app_cms_Wysiwyg_hbjjvq53w" data-blocktitle="WYSIWYG Editor" data-controller="core.front.widgets.block">
<div class="ipsWidget_inner ipsPad ipsType_richText" data-controller="core.front.core.lightboxedImages">
<p>
<a href="https://discord.gg/0k4ynDDCsnMzkxk7" rel="external nofollow" style="color:inherit;"><img alt="Discord" src="http://i.imgur.com/hFgq3Rt.png" style="width:300px;height:auto;"/></a>
</p>
</div>
</li>
</ul>
</div>
</div>
<nav class="ipsBreadcrumb ipsBreadcrumb_bottom ipsFaded_withHover">
<ul class="ipsList_inline ipsPos_right">
<li>
<a class="ipsType_light" data-action="defaultStream" href="https://epochmod.com/forum/discover/"><i aria-hidden="true" class="fa fa-newspaper-o"></i> <span>All Activity</span></a>
</li>
</ul>
<ul data-role="breadcrumbList">
<li>
<a href="../../index.html" title="Home">
<span>Home <i class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
<a href="../../forum/1-arma-2/index.html">
<span>ArmA 2 <i aria-hidden="true" class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
<a href="../../forum/96-qa-section/index.html">
<span>Q&amp;A Section <i aria-hidden="true" class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
<a href="../../forum/35-scripting/index.html">
<span>Scripting <i aria-hidden="true" class="fa fa-angle-right"></i></span>
</a>
</li>
<li>
				
					Coins and Advanced Trading
				
			</li>
</ul>
</nav>
</div>
</div>
</main>
<footer class="ipsClearfix" id="ipsLayout_footer">
<div class="ipsLayout_container">
<ul class="ipsList_inline ipsType_center ipsSpacer_top" id="elFooterSocialLinks">
<li class="cUserNav_icon">
<a class="cShareLink cShareLink_facebook" href="https://facebook.com/EpochMod" rel="noopener noreferrer" target="_blank"><i class="fa fa-facebook"></i></a>
</li>
<li class="cUserNav_icon">
<a class="cShareLink cShareLink_twitter" href="https://twitter.com/EpochMod" rel="noopener noreferrer" target="_blank"><i class="fa fa-twitter"></i></a>
</li>
<li class="cUserNav_icon">
<a class="cShareLink cShareLink_github" href="https://github.com/EpochModTeam/" rel="noopener noreferrer" target="_blank"><i class="fa fa-github"></i></a>
</li>
</ul>
<ul class="ipsList_inline ipsType_center ipsSpacer_top" id="elFooterLinks">
<li><a data-ipsdialog="" data-ipsdialog-flashmessage="Thanks, your message has been sent to the administrators." data-ipsdialog-remotesubmit="" data-ipsdialog-title="Contact Us" href="https://epochmod.com/forum/contact/" rel="nofollow">Contact Us</a></li>
</ul>
<p id="elCopyright">
<span id="elCopyright_userLine">Copyright Â© 2019 Epoch Mod Team</span>
<a href="https://www.invisioncommunity.com/" rel="nofollow" title="Invision Community">Powered by Invision Community</a>
</p>
</div>
</footer>
<div class="ipsDrawer ipsHide" id="elMobileDrawer">
<div class="ipsDrawer_menu">
<a class="ipsDrawer_close" data-action="close" href="#"><span>Ã</span></a>
<div class="ipsDrawer_content ipsFlex ipsFlex-fd:column">
<div class="ipsPadding ipsBorder_bottom">
<ul class="ipsToolList ipsToolList_vertical">
<li>
<a class="ipsButton ipsButton_light ipsButton_small ipsButton_fullWidth" href="https://epochmod.com/forum/login/" id="elSigninButton_mobile">Existing user? Sign In</a>
</li>
</ul>
</div>
<ul class="ipsDrawer_list ipsFlex-flex:11">
<li><a href="http://epochmod.com/">Home</a></li>
<li><a href="https://epochmod.com/forum/projects/">Downloads</a></li>
<li><a href="../../index.html">Forums</a></li>
<li><a href="http://epochmod.gamepedia.com/" rel="noopener" target="_blank">Wiki</a></li>
<li class="ipsDrawer_itemParent">
<h4 class="ipsDrawer_title"><a href="#">Browse</a></h4>
<ul class="ipsDrawer_list">
<li data-action="back"><a href="#">Back</a></li>
<li>
<a href="https://epochmod.com/forum/staff/">
					Staff
				</a>
</li>
<li>
<a href="https://epochmod.com/forum/online/">
					Online Users
				</a>
</li>
</ul>
</li>
<li class="ipsDrawer_itemParent">
<h4 class="ipsDrawer_title"><a href="#">Activity</a></h4>
<ul class="ipsDrawer_list">
<li data-action="back"><a href="#">Back</a></li>
<li>
<a href="https://epochmod.com/forum/discover/">
					All Activity
				</a>
</li>
<li>
<a href="#">
					My Activity Streams
				</a>
</li>
<li>
<a href="https://epochmod.com/forum/discover/unread/">
					Unread Content
				</a>
</li>
<li>
<a href="https://epochmod.com/forum/discover/content-started/">
					Content I Started
				</a>
</li>
<li>
<a href="https://epochmod.com/forum/search/">
					Search
				</a>
</li>
</ul>
</li>
<li><a href="https://epochmod.com/forum/leaderboard/">Leaderboard</a></li>
</ul>
</div>
</div>
</div>
<div class="ipsDrawer ipsHide" id="elMobileCreateMenuDrawer">
<div class="ipsDrawer_menu">
<a class="ipsDrawer_close" data-action="close" href="#"><span>Ã</span></a>
<div class="ipsDrawer_content ipsSpacer_bottom ipsPad">
<ul class="ipsDrawer_list">
<li class="ipsDrawer_listTitle ipsType_reset">Create New...</li>
</ul>
</div>
</div>
</div>
<script type="text/javascript">
		var ipsDebug = false;		
	
		var CKEDITOR_BASEPATH = 'http://epochmod.com/forum/applications/core/interface/ckeditor/ckeditor/';
	
		var ipsSettings = {
			
			
			cookie_path: "/forum/",
			
			cookie_prefix: "ips4_",
			
			
			cookie_ssl: true,
			
			upload_imgURL: "",
			message_imgURL: "",
			notification_imgURL: "",
			baseURL: "//epochmod.com/forum/",
			jsURL: "//epochmod.com/forum/applications/core/interface/js/js.php",
			csrfKey: "bbd96aef55be1a90d685e56a4524d73a",
			antiCache: "7f6edac1d51681449780",
			jsAntiCache: "7f6edac1d51727923486",
			disableNotificationSounds: true,
			useCompiledFiles: true,
			links_external: true,
			memberID: 0,
			lazyLoadEnabled: true,
			blankImg: "//epochmod.com/forum/applications/core/interface/js/spacer.png",
			googleAnalyticsEnabled: true,
			matomoEnabled: false,
			viewProfiles: true,
			mapProvider: 'none',
			mapApiKey: '',
			pushPublicKey: "BLY90A45HZZHrwnCKz6BVlOhu0SsCnzllubxC73QTZM5sfEOds9DfPrBRijrqkg_Tm4PSeJkPCuKkWiWNi4sOC4",
			relativeDates: true
		};
		
		
		
		
			ipsSettings['maxImageDimensions'] = {
				width: 1000,
				height: 750
			};
		
		
	</script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_global/root_library.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_global/root_js_lang_1.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_global/root_framework.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_core/global_global_core.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_global/root_front.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_core/front_front_core.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_forums/front_front_topic.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script data-ips="" src="https://epochmod.com/forum/uploads/javascript_global/root_map.js?v=7f6edac1d51727923486" type="text/javascript"></script>
<script type="text/javascript">
		
			ips.setSetting( 'date_format', jQuery.parseJSON('"mm\/dd\/yy"') );
		
			ips.setSetting( 'date_first_day', jQuery.parseJSON('0') );
		
			ips.setSetting( 'ipb_url_filter_option', jQuery.parseJSON('"none"') );
		
			ips.setSetting( 'url_filter_any_action', jQuery.parseJSON('"allow"') );
		
			ips.setSetting( 'bypass_profanity', jQuery.parseJSON('0') );
		
			ips.setSetting( 'emoji_style', jQuery.parseJSON('"native"') );
		
			ips.setSetting( 'emoji_shortcodes', jQuery.parseJSON('true') );
		
			ips.setSetting( 'emoji_ascii', jQuery.parseJSON('true') );
		
			ips.setSetting( 'emoji_cache', jQuery.parseJSON('1681342651') );
		
			ips.setSetting( 'image_jpg_quality', jQuery.parseJSON('75') );
		
			ips.setSetting( 'cloud2', jQuery.parseJSON('false') );
		
			ips.setSetting( 'isAnonymous', jQuery.parseJSON('false') );
		
		
	</script>
<script type="application/ld+json">
{
    "name": "Coins and Advanced Trading",
    "headline": "Coins and Advanced Trading",
    "text": "Hello, \n\u00a0 \nI Have a Problem with   i trade normal with the Trader i get coins for items, but if i trade with Advanced Trading with Trader he get my Items but i get no coins any ideas? \n\u00a0 \nmy advanced Trading / init.sqf -\u0026gt; \n\ndisableSerialization;\n\nZ_traderData = (_this select 3); // gets the trader data ( menu_Functionary1 )\n\nZ_Selling = true;\nZ_SellingFrom = 2;\n\nif( isNil \"Z_traderData\" || count (Z_traderData) == 0)exitWith{\n\tcutText [format[\"There went something wrong.\"], \"PLAIN DOWN\"];\n};\n\nif(isNil \"Z_AdvancedTradingInit\")then{\n// initiate the functions and variables for advanced trading -- easier for the people :) otherwise it would be in compiles or different file.\n\tZ_SellableArray = [];\n\tZ_SellArray = [];\n\tZ_BuyArray = [];\n\tZ_BuyingArray = [];\n\tZ_vehicle = objNull;\n\tZ_VehicleDistance = 30;\n\tZ_MoneyVariable = \"headShots\"; // Change this to whichever currency You are using.\n\tZ_NormalCurrency = false; // No effect yet. Not supported yet\n\t\n\tif(isNil \u0027CurrencyName\u0027)then{\n\t\tCurrencyName = \u0027Coins\u0027;\n\t};\n\n\tZ_filleTradeTitle = {\n\t\t_text = _this select 0;\n\t\tctrlSetText [7408, _text];\n\t};\n\n\tZ_clearLists = {\n\t\tlbClear 7401;\n\t\tlbClear 7402;\n\t};\n\n\tZ_clearBuyList = {\n\t  lbClear 7421;\n\t};\n\n\tZ_clearBuyingList = {\n\t  lbClear 7422;\n\t};\n\n\tZ_getContainer = {\n\t\t_dialog = findDisplay 711197;\n\t\t(_dialog displayCtrl 7404) ctrlSetText format[\"Free Slots: 0 / 0 / 0\"];\n\t\tZ_clearBuyingList;\n\t\tZ_clearLists;\n\t\tZ_SellableArray = [];\n\t\tZ_SellArray = [];\n\t\tZ_BuyingArray = [];\n\t\t\n\t\t_lbIndex= _this select 0;\n\n\t\tif(Z_Selling)then{\n\t\t\tswitch (_lbIndex) do {\n\t\t\t\tcase 0: { \n\t\t\t\t\t[\"Selling from backpack.\"] call Z_filleTradeTitle;\n\t\t\t\t\tZ_SellingFrom = 0;\n\t\t\t\t\tcall Z_getBackpackItems; \n\t\t\t\t};\n\t\t\t\tcase 1: { \n\t\t\t\t\t[\"Selling from vehicle.\"] call Z_filleTradeTitle;\n\t\t\t\t\tZ_SellingFrom = 1;\n\t\t\t\t\tcall Z_getVehicleItems; \n\t\t\t\t};\n\t\t\t\tcase 2: { \n\t\t\t\t\t[\"Selling from gear.\"] call Z_filleTradeTitle;\n\t\t\t\t\tZ_SellingFrom = 2;\n\t\t\t\t\tcall Z_getGearItems; \n\t\t\t\t};\n\t\t\t};\n\t\t}else{\n\t\t\t_ctrltext = format[\" \"];\n\t\t\tctrlSetText [7413, _ctrltext];\n\t\t\t\n\t\t\t_ctrltext = format[\"These are all the items I\u0027m selling!\"];\n\t\t\tctrlSetText [7412, _ctrltext];\n\t\t\tswitch (_lbIndex) do {\n\t\t\t\n\t\t\t\tcase 0: { \n\t\t\t\t\tZ_SellingFrom = 0;\n\t\t\t\t\t[\"Buying in backpack.\"] call Z_filleTradeTitle;\n\t\t\t\t\t[0] call Z_calculateFreeSpace;\n\t\t\t\t};\n\t\t\t\tcase 1: { \n\t\t\t\t\tZ_SellingFrom = 1;\n\t\t\t\t\t[\"Buying in vehicle.\"] call Z_filleTradeTitle;\n\t\t\t\t\t_canBuyInVehicle = call Z_CheckCloseVehicle;\n\t\t\t\t\tif(_canBuyInVehicle)then{\n\t\t\t\t\t\t[1] call Z_calculateFreeSpace; \n\t\t\t\t\t}else{\n\t\t\t\t\t\tsystemChat format[\"Get in driver seat to be able to trade to your vehicle.\"];\t\t\t\t\t\t\n\t\t\t\t\t\t(_dialog displayCtrl 7404) ctrlSetText format[\"Free Slots: %1 / %2 / %3\",0,0,0];\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tcase 2: {\n\t\t\t\t\tZ_SellingFrom = 2;\t\t\t\t\n\t\t\t\t\t[\"Buying in gear.\"] call Z_filleTradeTitle;\n\t\t\t\t\t[2] call Z_calculateFreeSpace;\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t};\n\n\tZ_getBackpackItems = {\n\t\tcall Z_clearLists;\n\t\tZ_SellableArray = [];\n\t\tZ_SellArray = [];\n\t\t_backpack = unitBackpack player;\n\t\tif (!isNil \"_backpack\") then {    \t\t\t\t\n\t\t\t_mags = getMagazineCargo _backpack;\n\t\t\t_weaps = getWeaponCargo _backpack;\t\t\n\t\t\t_normalMags = [];\n\t\t\t_normalWeaps = [];\t\t\t\n\t\t\t_kinds = _mags select 0;\n\t\t\t_ammmounts = _mags select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts select _forEachIndex)}do{\n\t\t\t\t_normalMags set [count(_normalMags),_x];\n\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds;\n\t\t\t\n\t\t\t_kinds2 = _weaps select 0;\n\t\t\t_ammmounts2 = _weaps select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts2 select _forEachIndex)}do{\n\t\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds2;\n\t\t\n\t\t\t[_normalMags,_normalWeaps, typeOf _backpack] call\tZ_checkArrayInConfig;\t\n\t\t}else{\n\t\t\t_ctrltext = format[\"I\u0027m not stupid.\"];\n\t\t\tctrlSetText [7413, _ctrltext];\n\t\t\t\n\t\t\t_ctrltext = format[\"You are not wearing a backpack.\"];\n\t\t\tctrlSetText [7412, _ctrltext];\n\t\t};\n\t};\n\n\tZ_getVehicleItems = {\n\t\tZ_vehicle = objNull;\n\t\tcall Z_clearLists;\n\t\tZ_SellableArray = [];\n\t\tZ_SellArray = [];\n\t\t_vehicle = objNull;\n\t\t\n\t\t_list = nearestObjects [(getPosATL player), [\"AllVehicles\"], Z_VehicleDistance];\t\n\t\t{\t\n\t\t\tif(!isNull _x \u0026amp;\u0026amp; local _x \u0026amp;\u0026amp; !isPlayer _x \u0026amp;\u0026amp; alive _x \u0026amp;\u0026amp; !(_x isKindOf \"zZombie_base\"))then{\n\t\t\t\tsystemChat format[\"Selected %1\",typeOf _x];\n\t\t\t\t_vehicle = _x;\n\t\t\t};\n\t\t}count _list;\n\t\t\n\t\tif(!isNull _vehicle)then{\n\t\t\tZ_vehicle = _vehicle;\n\t\t\t_mags = getMagazineCargo _vehicle;\n\t\t\t_weaps = getWeaponCargo _vehicle;\n\t\t\t\n\t\t\t_normalMags = [];\n\t\t\t_normalWeaps = [];\n\t\t\t\n\t\t\t_kinds = _mags select 0;\n\t\t\t_ammmounts = _mags select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts select _forEachIndex)}do{\n\t\t\t\t_normalMags set [count(_normalMags),_x];\n\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds;\n\t\t\t\n\t\t\t_kinds2 = _weaps select 0;\n\t\t\t_ammmounts2 = _weaps select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts2 select _forEachIndex)}do{\n\t\t\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds2;\n\t\t\t\n\t\t\t\n\t\t\t[_normalWeaps,_normalMags, typeOf _vehicle] call Z_checkArrayInConfig;\n\t\t}else{\n\t\t\t_ctrltext = format[\"Get in driver seat first!\"];\n\t\t\tctrlSetText [7413, _ctrltext];\n\t\t\t\n\t\t\t_ctrltext = format[\"I do not see any vehicle.\"];\n\t\t\tctrlSetText [7412, _ctrltext];\n\t\t};\t\n\t};\n\n\tZ_getGearItems = {\n\t\tcall Z_clearLists;\n\t\tZ_SellArray = [];\n\t\tZ_SellableArray = [];\n\t\t _mags = magazines player;\n\t\t _weaps = weapons player;\n\t\t[_weaps,_mags,\"your gear\"] call\tZ_checkArrayInConfig;\t\t\t\n\t};\n\n\tZ_checkArrayInConfig = {\n\t\t_weaps = _this select 0;\n\t\t_mags = _this select 1;\n\t\t_extraText = _this select 2;\n\t\t_all = _weaps + _mags ;\n\t\t_total = count(_all);\n\t\t_arrayOfTraderCat = Z_traderData;\n\t\t_totalPrice = 0;\n\t\tif(_total \u0026gt; 0)then{\n\t\t\t{\n\t\t\t\t_y = _x;\t\t\t\t\n\t\t\t\t{\t\n\t\t\t\t\t\t_cat =  format[\"Category_%1\",(_arrayOfTraderCat select _forEachIndex select 1)];\n\t\t\t\t\t\t_excists = false;\n\t\t\t\t\t\tif(isClass(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat \u0026gt;\u0026gt; _y ))then{\n\t\t\t\t\t\t_excists = isClass(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat \u0026gt;\u0026gt; _y );\t\t\n\t\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t\tif(_excists)exitWith{\n\t\t\t\t\t\t_pic = \"\";\n\t\t\t\t\t\t_text = \"\";\n\t\t\t\t\t\t_type = getText(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"type\");\n\t\t\t\t\t\t_sell = getArray(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"sell\");\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tswitch (true) do {\n\t\t\t\t\t\t\tcase (_type == \"trade_items\") :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase (_type == \"trade_weapons\") :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase (_type == \"trade_backpacks\") :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tif( isNil \u0027_text\u0027)then{_text = _y;};\n\t\t\t\t\t\tZ_SellableArray set [count(Z_SellableArray) , [_y,_type,_sell select 0,_text,_pic]];\n\t\t\t\t\t\t_totalPrice = _totalPrice + (_sell select 0);\t\t\t\t\n\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t}forEach _arrayOfTraderCat;\t\t\t\t\n\t\t\t}count _all;\t\n\t\t\t\t\t\n\t\t\t_backUpText = _extraText;\n\t\t\tif(Z_SellingFrom != 2)then{\n\t\t\t\t_extraText = getText (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; _extraText \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t};\n\t\t\tif (isNil \u0027_extraText\u0027)then{_extraText = _backUpText;};\n\t\t\t\n\t\t\t_ctrltext = format[\"I would offer %1 %2.\", _totalPrice,CurrencyName];\n\t\t\tctrlSetText [7413, _ctrltext];\t\t\n\t\t\t_ctrltext = format[\"I accept %1 items from %2.\", count(Z_SellableArray) , _extraText];\n\t\t\tctrlSetText [7412, _ctrltext];\t\n\t\t\tcall Z_fillSellList;\n\t\t};\t\t\n\t};\n\n\tZ_calcPrice = {\n\t\t_sellPrice = 0;\n\t\tif(Z_Selling)then{\t\n\t\t\t{  \t\t\n\t\t\t\t_sellPrice = _sellPrice +  (_x select 2);\n\t\t\t}count Z_SellArray;\n\t\t}else{\n\t\t\t{\n\t\t\t\t_sellPrice = _sellPrice +  ((_x select 2) * (_x select 5));\n\t\t\t}count Z_BuyingArray;\n\t\t};\n\t\t_ctrltext = format[\"%1 %2\", _sellPrice , CurrencyName];\n\t\tctrlSetText [7410, _ctrltext];\t\n\t};\n\n\tZ_fillSellList = {\n\t\t\n\t\t{\n\t\t\t_index = lbAdd [7401,  _x select 3];\n\t\t\tlbSetPicture [7401, _index, _x select 4 ];\n\t\t}count Z_SellableArray;\n\t};\n\n\tZ_fillSellingList = {\n\t\t{  \t\t\n\t\t\t_index = lbAdd [7402, _x select 3];\n\t\t\tlbSetPicture [7402, _index,  _x select 4];\n\t\t}count Z_SellArray;\n\t};\n\n\tZ_pushItemToList = {\n\t\t_index = _this select 0;\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1)then {\n\t\t\tlbDelete [7401, _index];\n\t\t\t_temp = Z_SellableArray select _index;\n\t\t\t//_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];\n\t\t\tZ_SellArray set [count(Z_SellArray),_temp];\n\t\t\tZ_SellableArray set [_index,\"deleted\"];\n\t\t\tZ_SellableArray = Z_SellableArray - [\"deleted\"];\n\t\t\t_index2 = lbAdd [7402, _temp select 3];\n\t\t\tlbSetPicture [7402, _index2, _temp select 4];\n\t\t\tcall Z_calcPrice;\n\t\t};\n\t};\n\n\tZ_removeItemFromList = {\n\t\t_index = _this select 0;\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1)then {\n\t\t\tlbDelete [7402, _index];\n\t\t\t_temp = Z_SellArray select _index;\n\t\t\t_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];\n\t\t\tZ_SellableArray set [count(Z_SellableArray),_item];\n\t\t\tZ_SellArray set [_index,\"deleted\"];\n\t\t\tZ_SellArray = Z_SellArray - [\"deleted\"];\n\t\t\t_index2 = lbAdd [7401,  _item select 3];\n\t\t\tlbSetPicture [7401, _index2, _item select 4];\n\t\t\tcall Z_calcPrice;\t\n\t\t};\n\t};\n\n\tZ_pushAllToList = {\n\t\tZ_SellArray = Z_SellArray + Z_SellableArray;\n\t\tZ_SellableArray = [];\n\t\tcall Z_clearLists;\n\t\tcall Z_fillSellList;\n\t\tcall Z_fillSellingList;\n\t\tcall Z_calcPrice;\n\t};\n\n\tZ_removeAllToList = {\n\t\tZ_SellableArray = Z_SellableArray + Z_SellArray;\n\t\tZ_SellArray = [];\n\t\tcall Z_clearLists;\n\t\tcall Z_fillSellList;\n\t\tcall Z_fillSellingList;\n\t\tcall Z_calcPrice;\n\t};\n\n\tZ_SellItems = {\n\t\t_index = count (Z_SellArray) - 1;\t\n\t\t_tempArray = Z_SellArray;\n\t\tif(_index \u0026gt; -1)then{\n\t\t\tsystemChat \"Selling items.\";\t\n\t\t\tcloseDialog 2;\n\t\t\t_outcome = [];\n\t\t\t_weaponsArray = [];\n\t\t\t_itemsArray = [];\t\n\t\t\t_bpArray = [];\t\n\t\t\t_bpCheckArray = [];\n\t\t\t_weaponsCheckArray = [];\n\t\t\t_itemsCheckArray = [];\n\t\t\t{ \t\t\n\t\t\t\t_type = _x select 1;\n\t\t\t\t_name = _x select 0;\t\t\t\t\t\t\n\n\t\t\t\tswitch (true) do {\n\t\t\t\t\tcase (_type == \"trade_items\") :\n\t\t\t\t\t{\n\t\t\t\t\t\t_itemsArray set [count(_itemsArray),_name];\n\t\t\t\t\t\t_itemsCheckArray set [count(_itemsCheckArray),_x select 2];\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t};\n\t\t\t\t\tcase (_type == \"trade_weapons\") :\n\t\t\t\t\t{\n\t\t\t\t\t\t_weaponsArray set [count(_weaponsArray),_name];\n\t\t\t\t\t\t_weaponsCheckArray set [count(_weaponsCheckArray),_x select 2];\n\t\t\t\t\t};\n\t\t\t\t\tcase (_type == \"trade_backpacks\") :\n\t\t\t\t\t{\n\t\t\t\t\t\t_bpArray set [count(_bpArray),_name];\n\t\t\t\t\t\t_bpCheckArray set [count(_bpCheckArray),_x select 2];\n\t\t\t\t\t};\n\t\t\t\t};\n\n\n\t\t\t\t\n\t\t\t}count Z_SellArray;\n\t\t\t\n\t\t\t// closeDialog 2;\n\t\t\t\t\t\n\t\t\tif(Z_SellingFrom == 0)then{\n\t\t\t\t_outcome = [unitBackpack player,_itemsArray,_weaponsArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;\n\t\t\t};\n\t\t\tif(Z_SellingFrom == 1)then{\t\n\t\t\t\t_outcome = [Z_vehicle,_itemsArray,_weaponsArray,_bpArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;\t\t\n\t\t\t};\n\t\t\t\t\t\t\t\t\n\t\t\t//gear\n\t\t\tif(Z_SellingFrom == 2)then{\n\t\t\t\t_wA = [];\n\t\t\t\t_mA = [];\n\t\t\t\t{\n\t\t\t\t\t_localResult = [player,(_x select 0),1] call BIS_fnc_invRemove;\n\t\t\t\t\tif( _localResult != 1)then{\n\t\t\t\t\t\tif(_x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t_mA set [count(_mA),0];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t_wA set [count(_wA),0];\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(_x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t_mA set [count(_mA),1];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t_wA set [count(_wA),1];\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t}count Z_SellArray;\n\t\t\t\t\t\n\t\t\t\t_outcome set [0,_mA];\t\n\t\t\t\t_outcome set [1,_wA];\n\t\t\t\t_outcome set [2,[]];\t\t\t\t\t\n\t\t\t};\n\t\t\t\t\n\t\t\t_money = 0;\t\t\n\t\t\t{\n\t\t\t\t_money = _money + ( ((_itemsCheckArray select _forEachIndex)) * _x) ;\t\t\t\n\t\t\t}forEach (_outcome select 0);\n\t\t\t{\n\t\t\t\t_money = _money + ( ((_weaponsCheckArray select _forEachIndex)) * _x) ;\t\t\t\t\n\t\t\t}forEach (_outcome select 1);\n\t\t\t\n\t\t\t{\n\t\t\t\t_money = _money + ( ( (_bpCheckArray select _forEachIndex) ) * _x) ;\t\n\t\t\t}forEach (_outcome select 2);\n\t\t\t\n\t\t\tif(typeName _money  == \"SCALAR\")then{\n\t\t\t\t[player,_money] call SC_fnc_addCoins;\t\n\t\t\t\tsystemChat format[\"Received %1 %2\", _money , CurrencyName];\t\t\t\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"Money is not a number. Something went wrong.\"];\t\t\t\n\t\t\t};\t\t\t\t\t\t\t\t\t\n\t\t}else{\n\t\t\tsystemChat format[\"No Items to Sell\"];\n\t\t};\t\t\t\t\t\t\n\t};\n\t\n\tZ_BuyItems = {\t\n\t\t_magazinesToBuy = 0;\n\t\t_weaponsToBuy = 0;\n\t\t_backpacksToBuy = 0;\n\t\t\n\t\t_priceToBuy = 0;\n\t\t\n\t\t{\n\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t_weaponsToBuy = _weaponsToBuy + (_x select 5) ;\n\t\t\t\t_priceToBuy\t= _priceToBuy + ((_x select 5)*(_x select 2));\t\t\t\n\t\t\t};\n\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t_magazinesToBuy = _magazinesToBuy + (_x select 5) ;\n\t\t\t\t_priceToBuy\t= _priceToBuy + ((_x select 2)*(_x select 5));\n\t\t\t};\n\t\t\tif( _x select 1 == \"trade_backpacks\")then{\n\t\t\t\t_backpacksToBuy = _backpacksToBuy + (_x select 5) ;\n\t\t\t\t_priceToBuy\t= _priceToBuy + ((_x select 2)*(_x select 5));\n\t\t\t};\t\n\t\t} count Z_BuyingArray;\n\n\t\t//recheck if there is enough space -\u0026gt; not that some douche put extra stuff in.\n\t\t\n\t\t_canBuy = [_weaponsToBuy,_magazinesToBuy,_backpacksToBuy] call Z_allowBuying;\n\t\t\n\t\t_myMoney = player getVariable[Z_MoneyVariable,0];\n\t\t\n\t\tif(_myMoney \u0026gt;= _priceToBuy)then{\n\t\t    \n\t\t\t\n\t\t\n\t\t\tif(_canBuy)then{\t\n\t\t\tsystemChat format[\"Start Buying for %1 %2\",_priceToBuy,CurrencyName];\n\t\t\t\n\t\t\tcloseDialog 2;\n\t\t\t\n\t\t\t\tif(Z_SellingFrom == 0)then{//backpack\n\t\t\t\tsystemChat format[\"Adding %1 Items in backpack\",count (Z_BuyingArray)];\n\t\t\t\t\t{\n\t\t\t\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t\t\t\t(unitBackpack player) addWeaponCargoGlobal [_x select 0, _x select 5];\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\t\t\t\t\t\t\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t(unitBackpack player) addMagazineCargoGlobal  [_x select 0, _x select 5];\t\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\n\t\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t\t} count Z_BuyingArray;\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(Z_SellingFrom == 1)then{//vehicle\n\t\t\t\t\t{\n\t\t\t\t\t\tsystemChat format[\"Adding %1 Items in %2\",count (Z_BuyingArray), typeOf Z_vehicle];\n\t\t\t\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t\t\t\tZ_vehicle addWeaponCargoGlobal [_x select 0, _x select 5];\t\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\tZ_vehicle addMagazineCargoGlobal [_x select 0, _x select 5];\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\t\t\n\t\t\t\t\t\t};\t\n\t\t\t\t\t\tif( _x select 1 == \"trade_backpacks\")then{\n\t\t\t\t\t\t\tZ_vehicle addBackpackCargoGlobal [_x select 0, _x select 5];\t\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\n\t\t\t\t\t\t};\t\n\t\t\t\t\t} count Z_BuyingArray;\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(Z_SellingFrom == 2)then{//gear\t\n\t\t\t\t\tsystemChat format[\"Adding %1 Items in gear\",count (Z_BuyingArray)];\n\t\t\t\t\t{\n\t\t\t\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t\t\t\t_count = 0;\n\t\t\t\t\t\t\twhile(_count \u0026lt; _x select 5)do{\n\t\t\t\t\t\t\t\tplayer addWeapon (_x select 0);\t\n\t\t\t\t\t\t\t\tdiag_log format [\"%1 added\", _x select 0];\t\n\t\t\t\t\t\t\t\t_count = _count + 1;\n\t\t\t\t\t\t\t};\t\t\t\t\t\t\t \n\t\t\t\t\t\t};\n\t\t\t\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t_count = 0;\t\t\t\t\t\t\n\t\t\t\t\t\t\t while{_count \u0026lt; _x select 5}do{\n\t\t\t\t\t\t\t\tplayer addMagazine (_x select 0);\t\n\t\t\t\t\t\t\t\tdiag_log format [\"%1 added\", _x select 0];\t\n\t\t\t\t\t\t\t\t_count = _count + 1;\n\t\t\t\t\t\t\t};\t\n\t\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t\t} count Z_BuyingArray;\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t};\t\n\t\t\t\tsystemChat format[\"removing %1 coins \",_priceToBuy];\n\t\t\t\t[player,_priceToBuy] call SC_fnc_removeCoins;\t\n\t\t\t\tsystemChat format[\"removed %1 coins \",_priceToBuy];\t\t\t\t\n\t\t\t};\t\t\t\t\n\t\t}else{\n\t\t\tsystemChat format[\"You need %1 %2 to buy all these items.\",_priceToBuy,CurrencyName];\n\t\t};\n\t\n\t};\n\n\t/* ----------------------------------------------------------------------------\n\tExamples:\n\t   _result = [_backpack, [\"SmokeShell\",\"M16_AMMO\"],[\"M16\",\"M16\",\"M240\"]] call ZUPA_fnc_removeWeaponsAndMagazinesCargo; \n\t   _result == [[1,0,0,1,1,1,0],[1,0,0,1],[1,0]]; // 1 = success, 0 = fail -\u0026gt;( item was not in cargo)\n\t   \n\tAuthor:\n\t   Zupa 2014-09-30\n\t---------------------------------------------------------------------------- */\n\tZUPA_fnc_removeWeaponsAndMagazinesCargo = {\n\t\tprivate [\"_unit\", \"_items\",\"_weaps\",\"_normalItems\",\"_normalWeaps\", \"_count\", \"_i\", \"_unit_allItems\", \"_unit_allItems_types\", \"_unit_allItems_count\", \"_item_type\", \"_item_count\", \"__returnVar\"];\n\t\t_unit = _this select 0;\n\t\t_items = _this select 1; \n\t\t_weaps = _this select 2; \n\t\t_bags = [];\n\t\tif(count _this \u0026gt; 3)then{\n\t\t\t_bags = _this select 3; \n\t\t};\n\t\t\n\t\t_normalItems = [];\n\t\t_normalWeaps = [];\n\t\t_normalBags = [];\n\t\t\n\t\t_unit_allItems = getMagazineCargo _unit; //  [[type1, typeN, ...],[count1, countN, ...]]\n\t\t_unit_allItems_types = _unit_allItems select 0;\n\t\t_unit_allItems_count = _unit_allItems select 1;\t\n\t\t\n\t\t_unit_allWeaps = getWeaponCargo _unit; \n\t\t_unit_allWeaps_types = _unit_allWeaps select 0;\n\t\t_unit_allWeaps_count = _unit_allWeaps select 1;\t\n\t\t\n\t\t_unit_allBags = getBackpackCargo _unit; \n\t\t_unit_allBags_types = _unit_allBags select 0;\n\t\t_unit_allBags_count = _unit_allBags select 1;\t\n\t\t\n\t\tclearMagazineCargoGlobal _unit;\t\n\t\tclearWeaponCargoGlobal _unit;\n\t\t\n\t\tif( count _bags \u0026gt; 0 )then{\t\t\t\t\t\n\t\t\tclearBackpackCargoGlobal  _unit;\n\t\t};\t\n\t\t\n\t\t{\n\t\t\t_counter = 0 ;\n\t\t\twhile{\t_counter \u0026lt; ( _unit_allItems_count select _forEachIndex)}do{\n\t\t\t_normalItems set [count(_normalItems),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t};\n\t\t}forEach _unit_allItems_types;\t\t\t\t\n\t\t{\n\t\t\t_counter = 0 ;\n\t\t\twhile{\t_counter \u0026lt; ( _unit_allWeaps_count select _forEachIndex)}do{\n\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t};\n\t\t}forEach _unit_allWeaps_types;\t\n\t\t{\n\t\t\t_counter = 0 ;\n\t\t\twhile{\t_counter \u0026lt; ( _unit_allBags_count select _forEachIndex)}do{\n\t\t\t_normalBagss set [count(_normalBags),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t};\n\t\t}forEach _unit_allBags_types;\t\n\t\t\n\t\t_returnVar = [];\t\n\t\t_returnMag = [];\t\n\t\t_returnWeap = [];\n\t\t_returnBag = [];\n\t\t{\t\t\n\t\t\t_inCargo = _normalItems find _x;\n\t\t\tif(_inCargo \u0026gt; -1)then{\n\t\t\t\t_normalItems set [_inCargo, \"soldItem\"];\n\t\t\t\t_returnMag set [count(_returnMag),1];\n\t\t\t}else{\n\t\t\t\t_returnMag set [count(_returnMag),0];\t\n\t\t\t};\n\t\t}count _items;\t\n\t\t_normalItems = _normalItems - [\"soldItem\"];\n\t\t{\t\t\t\t\n\t\t\t_unit addMagazineCargoGlobal [_x, 1];\t\t\t\t\n\t\t}count _normalItems;\t\n\t\t\n\t\t{\t\t\n\t\t\t_inCargo = _normalWeaps find _x;\n\t\t\tif(_inCargo \u0026gt; -1)then{\n\t\t\t\t_normalWeaps set [_inCargo, \"soldItem\"];\n\t\t\t\t_returnWeap set [count(_returnWeap),1];\n\t\t\t}else{\n\t\t\t\t_returnWeap set [count(_returnWeap),0];\t\n\t\t\t};\n\t\t}count _weaps;\t\n\t\t_normalWeaps = _normalWeaps - [\"soldItem\"];\n\t\t{\t\t\t\t\n\t\t\t_unit addWeaponCargoGlobal [_x, 1];\t\t\t\t\n\t\t}count _normalWeaps;\n\t\t\n\t\t{\t\t\n\t\t\t_inCargo = _normalBags find _x;\n\t\t\tif(_inCargo \u0026gt; -1)then{\n\t\t\t\t_normalBags set [_inCargo, \"soldItem\"];\n\t\t\t\t_returnBag set [count(_returnBag),1];\n\t\t\t}else{\n\t\t\t\t_returnBag set [count(_returnBag),0];\t\n\t\t\t};\n\t\t}count _bags;\t\n\t\t_normalWeaps = _normalWeaps - [\"soldItem\"];\n\t\t{\t\t\t\t\n\t\t\t_unit addBackpackCargoGlobal [_x, 1];\t\t\t\t\n\t\t}count _normalBags;\n\t\t\t\t\n\t\t_returnVar set [0,_returnMag];\n\t\t_returnVar set [1,_returnWeap];\n\t\t_returnVar set [2,_returnBag];\n\t\t_returnVar;\n\t};\n\n\tZ_ChangeBuySell = {\t\t\n\t\t_dialog = findDisplay 711197;\t\t\n\t\tZ_Selling = !Z_Selling;\t\n\t\tif(Z_Selling)then{\t\n\t\t\t(_dialog displayCtrl 7416) ctrlSetText \"Buy\";\n\t\t\t(_dialog displayCtrl 7409) ctrlSetText \"Selling\";\n\t\t\t{ctrlShow [_x,true];} forEach [7401,7402,7435,7430,7431,7432,7433]; // show\n\t\t\t{ctrlShow [_x,false];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // hide\t\t\t\t\t\t\t\t\t\t\t\n\t\t}else{\n\t\t\t(_dialog displayCtrl 7416) ctrlSetText \"Sell\";\n\t\t\t(_dialog displayCtrl 7409) ctrlSetText \"Buying\";\n\t\t\t{ctrlShow [_x,true];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // show\n\t\t\t{ctrlShow [_x,false];} forEach [7401,7402,7435,7430,7431,7432,7433]; // hide\t\n\t\t\tcall Z_fillBuyList;\n\t\t};\t\n\t\t[2] call Z_getContainer; // default gear\t\t\n\t};\n\n\tZ_removeAllFromBuyingList = {\n\t\tZ_clearBuyingList;\n\t\tZ_BuyingArray = [];\n\t};\n\n\tZ_removeItemFromBuyingList = {\n\t\t_index = _this select 0;\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1)then {\n\t\t\tlbDelete [7422, _index];\n\t\t\tZ_BuyingArray set [_index,\"deleted\"];\n\t\t\tZ_BuyingArray = Z_BuyingArray - [\"deleted\"];\t\t\n\t\t\tcall Z_calcPrice;\t\n\t\t};\n\t};\n\n\tZ_toBuyingList = {\n\t\t_index = _this select 0;\n\t\t_amount = parseNumber(_this select 1);\t\t\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1 \u0026amp;\u0026amp; (typeName _amount == \"SCALAR\") \u0026amp;\u0026amp; _amount \u0026gt; 0 )then {\n\t\t\t_temp = Z_BuyArray select _index;\n\t\t\t_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4, _amount ];\n\t\t\tZ_BuyingArray set [count(Z_BuyingArray),_item];\t\t\n\t\t\t_index2 = lbAdd [7422, format[\"%1x: %2\",_item select 5,_item select 3]];\n\t\t\tlbSetPicture [7422, _index2, _item select 4];\n\t\t\tcall Z_calcPrice;\n\t\t};\t\n\t};\n\n\tZ_fillBuyList = {\n\t\t\tcall Z_clearBuyList;\n\t\t\tcall Z_clearBuyingList;\n\t\t\tZ_BuyArray = [];\n\t\t\tZ_BuyingArray = [];\n\t\t\t_arrayOfTraderCat = Z_traderData;\t\n\t\t\t_counter = 0;\n\t\t\t{\t\n\t\t\t\t\t\t_cat =  format[\"Category_%1\",(_arrayOfTraderCat select _forEachIndex select 1)];\n\t\t\t\t\t\t_cfgtraders = missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat;\n\t\t\t\t\t\tfor \"_i\" from 0 to (count _cfgtraders)-1 do\n\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t_y  = _cfgtraders select _i;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (isClass _y) then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_y  = configName (_y );\n\t\t\t\t\t\t\t\t_type =  getText(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"type\");\n\t\t\t\t\t\t\t\t_buy = getArray(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"buy\");\n\t\t\t\t\t\t\t\t_pic = \"\";\n\t\t\t\t\t\t\t\t_text = \"\";\t\n\t\t\t\t\t\t\t\tif(_type == \"trade_items\")then{\n\t\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t\t\tZ_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];\n\t\t\t\t\t\t\t\t\t_totalPrice = _totalPrice + (_buy select 0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tif(_type == \"trade_weapons\")then{\n\t\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t\t\tZ_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];\n\t\t\t\t\t\t\t\t\t_totalPrice = _totalPrice + (_buy select 0);\t\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t};\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t};\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t}forEach _arrayOfTraderCat;\t\n\t\t\tcall Z_fillBuylList;\n\t\t\tcall Z_calcPrice;\n\t};\n\n\tZ_fillBuylList = {\t\n\t\t{\n\t\t\t_index = lbAdd [7421,  _x select 3];\n\t\t\tlbSetPicture [7421, _index, _x select 4 ];\n\t\t}count Z_BuyArray;\n\t};\n\n\tZ_fillBuyingList = {\n\t\t{  \t\t\n\t\t\t_index = lbAdd [7422, _x select 3];\n\t\t\tlbSetPicture [7422, _index,  _x select 4];\n\t\t}count Z_BuyingArray;\n\t};\n\n\n\tZ_calculateFreeSpace = {\n\t\t_selection = _this select 0;\n\t\t_returnArray = [0,0,0];\n\t\tif(_selection == 2) then{ //gear\n\t\t\tsystemChat format[\"No advanced buying of weapons/backpacks currently into gear for security reasons!\"];\n\t\t\t_allowedMags = 20 - count(magazines player);\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\t\t\n\t\t\t_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];\n\t\t};\t\t\n\t\tif(_selection == 1) then{ //vehicle\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\tif (!isNull Z_vehicle) then {   \n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027);\n\t\t\t\t_allowedBackpacks = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportmaxbackpacks \u0027);\n\t\t\t};\t\t\t\t\t\t\t\t\t\n\t\t\t_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];\n\t\t};\t\t\n\t\tif(_selection == 0) then{ //backpack\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\t_backpack = unitBackpack player;\n\t\t\tif (!isNil \"_backpack\") then {   \n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027);\n\t\t\t\t_allowedBackpacks = 0;\n\t\t\t};\t\t\n\t\t\t_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];\n\t\t};\t\t\t\t\n\t\t_dialog = findDisplay 711197;\n\t\t(_dialog displayCtrl 7404) ctrlSetText format[\"Free Slots: %1 / %2 / %3\",_returnArray select 1,_returnArray select 0,_returnArray select 2];\n\t};\n\t\n\tZ_CheckCloseVehicle = {\t\n\t\tZ_vehicle = objNull;\n\t\t_vehicle = objNull;\n\t\t_list = nearestObjects [(getPosATL player), [\"AllVehicles\"], Z_VehicleDistance];\t\n\t\t{\t\n\t\t\tif(!isNull _x \u0026amp;\u0026amp; local _x \u0026amp;\u0026amp; !isPlayer _x \u0026amp;\u0026amp; alive _x \u0026amp;\u0026amp; !(_x isKindOf \"zZombie_base\"))then{\n\t\t\t\tsystemChat format[\"Selected %1\",typeOf _x];\n\t\t\t\t_vehicle = _x;\n\t\t\t};\n\t\t}count _list;\t\t\n\t\t_result = false;\t\t\n\t\tif(!isNull _vehicle)then{\n\t\t\tZ_vehicle = _vehicle;\n\t\t\t_result = true;\n\t\t\t[format[\"Buying in %1.\", typeOf Z_vehicle]] call Z_filleTradeTitle;\t\t\t\t\n\t\t};\t\t\t\t\t\t\n\t\t_result\n\t};\n\t\n\tZ_allowBuying = {\n\t\t//\tZ_SellingFrom = 0 - backpack, 1 - car, 2 -gear\n\t\t_selection = Z_SellingFrom;\n\t\t_return = false;\n\t\t_toBuyWeaps = _this select 0;\n\t\t_toBuyMags = _this select 1;\n\t\t_toBuyBags = _this select 2;\n\t\tif(_selection == 2) then{ //gear\n\t\t\tsystemChat format[\"Only 0 weapon /  backpack allowed to buy at a time for security reasons!\"];\n\t\t\t_allowedMags = 20 - count(magazines player);\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\t\n\t\t\t\n\t\t\t_check1 = false;\n\t\t\t_check2 = false;\n\t\t\t_check3 = false;\n\n\t\t\tif( _allowedWeapons \u0026gt;=_toBuyWeaps)then{\n\t\t\t\t_check1 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 weapons in your gear.\",_allowedWeapons];\n\t\t\t};\n\t\t\tif( _allowedMags \u0026gt;= _toBuyMags)then{\n\t\t\t\t_check2 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 magazines  in your gear.\",_allowedMags];\n\t\t\t};\t\t\n\t\t\tif( _allowedBackpacks \u0026gt;= _toBuyBags)then{\n\t\t\t\t_check3 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 backpacks  in your gear.\",_allowedBackpacks];\n\t\t\t};\n\t\t\t\n\t\t\tif(_check1 \u0026amp;\u0026amp; _check2 \u0026amp;\u0026amp; _check3)then{\n\t\t\t\t_return = true;\n\t\t\t};\n\t\t\t\n\t\t};\t\t\n\t\tif(_selection == 1) then{ //vehicle\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\tif ( !isNull Z_vehicle) then {   \n\t\t\t\n\t\t\t\t_mags = getMagazineCargo Z_vehicle;\n\t\t\t\t_weaps = getWeaponCargo Z_vehicle;\n\t\t\t\t_bags = getBackpackCargo Z_vehicle;\n\t\t\t\t\n\t\t\t\t_normalMags = [];\n\t\t\t\t_normalWeaps = [];\n\t\t\t\t_normalBags = [];\n\t\t\t\t\n\t\t\t\t_kinds = _mags select 0;\n\t\t\t\t_ammmounts = _mags select 1;\n\t\t\t\t{\n\t\t\t\t\t_counter = 0 ;\n\t\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts select _forEachIndex)}do{\n\t\t\t\t\t_normalMags set [count(_normalMags),_x];\n\t\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t\t};\n\t\t\t\t}forEach _kinds;\n\t\t\t\t\n\t\t\t\t_kinds2 = _weaps select 0;\n\t\t\t\t_ammmounts2 = _weaps select 1;\n\t\t\t\t{\n\t\t\t\t\t_counter = 0 ;\n\t\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts2 select _forEachIndex)}do{\n\t\t\t\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t\t};\n\t\t\t\t}forEach _kinds2;\n\t\t\t\t\n\t\t\t\t_kinds3 = _bags select 0;\n\t\t\t\t_ammmounts3 = _bags select 1;\n\t\t\t\t{\n\t\t\t\t\t_counter = 0 ;\n\t\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts3 select _forEachIndex)}do{\n\t\t\t\t\t\t_normalBags set [count(_normalBags),_x];\n\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t\t};\n\t\t\t\t}forEach _kinds3;\n\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027) - count(_normalWeaps);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027) - count(_normalMags);\n\t\t\t\t_allowedBackpacks = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportmaxbackpacks \u0027) - count(_normalBags);\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"%1\", typeName \"Z_vehicle\"];\n\t\t\t};\t\n\t\t\t\n\t\t\t_check1 = false;\n\t\t\t_check2 = false;\n\t\t\t_check3 = false;\n\n\t\t\tif( _allowedWeapons \u0026gt;= _toBuyWeaps)then{\n\t\t\t\t_check1 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 weapons in your vehicle.\",_allowedWeapons];\n\t\t\t};\n\t\t\tif( _allowedMags \u0026gt;= _toBuyMags)then{\n\t\t\t\t_check2 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 magazines in your vehicle.\",_allowedMags];\n\t\t\t};\t\t\t\n\t\t\tif( _allowedBackpacks \u0026gt;= _toBuyBags)then{\n\t\t\t\t_check3 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 backpacks in your vehicle.\",_allowedBackpacks];\n\t\t\t};\n\t\t\t\n\t\t\tif(_check1 \u0026amp;\u0026amp; _check2 \u0026amp;\u0026amp; _check3)then{\n\t\t\t\t_return = true;\n\t\t\t};\t\t\t\t\t\n\t\t};\t\t\n\t\tif(_selection == 0) then{ //backpack\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\t_backpack = unitBackpack player;\n\t\t\tif (!isNil \"_backpack\") then {   \n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027);\n\t\t\t\t_allowedBackpacks = 0;\n\t\t\t};\t\t\n\t\t\t\n\t\t\t_check1 = false;\n\t\t\t_check2 = false;\n\t\t\t_check3 = false;\n\t\t\t_check4 = false;\n\n\t\t\tif( _allowedWeapons \u0026gt;= _toBuyWeaps)then{\n\t\t\t\t_check1 = true;\n\t\t\t};\n\t\t\tif( _allowedMags \u0026gt;= _toBuyMags)then{\n\t\t\t\t_check2 = true;\n\t\t\t};\t\t\t\n\t\t\tif( _allowedBackpacks \u0026gt;= _toBuyBags)then{\n\t\t\t\t_check3 = true;\n\t\t\t};\t\t\t\t\t\t\t\t\t\n\t\t\tif(_check1 \u0026amp;\u0026amp; _check2 \u0026amp;\u0026amp; _check3 \u0026amp;\u0026amp; _check4)then{\n\t\t\t\t_return = true;\t\t\t\n\t\t\t};\t\n\t\t\t\n\t\t\tsystemChat format[\"Buying to backpack is currently disabled for security reasons\"];\n\t\t};\n\n\t\t_return\n\t};\n\n\tZ_AdvancedTradingInit = true;\n\n};\n\ncreateDialog \"AdvancedTrading\";\n\n_dialog = findDisplay 711197;\n(_dialog displayCtrl 7432) ctrlSetText \" \u0026lt; \";\n(_dialog displayCtrl 7433) ctrlSetText \" \u0026lt;\u0026lt; \";\n(_dialog displayCtrl 7442) ctrlSetText \" \u0026lt; \";\n(_dialog displayCtrl 7443) ctrlSetText \" \u0026lt;\u0026lt; \";\n{ctrlShow [_x,false];} forEach [7441,7436,7404,7422,7421,7436,7440,7442,7443,7404]; // hide\t- double hide ( first one didn\u0027t work it seems.\ncall Z_getGearItems; \n\n",
    "dateCreated": "2015-05-09T07:19:12+0000",
    "datePublished": "2015-05-09T07:19:12+0000",
    "dateModified": "2015-05-09T07:19:12+0000",
    "image": "https://epochmod.com/forum/applications/core/interface/email/default_photo.png",
    "author": {
        "@type": "Person",
        "name": "flashback",
        "image": "https://epochmod.com/forum/applications/core/interface/email/default_photo.png",
        "url": "https://epochmod.com/forum/profile/11373-flashback/"
    },
    "interactionStatistic": [
        {
            "@type": "InteractionCounter",
            "interactionType": "http://schema.org/ViewAction",
            "userInteractionCount": 1136
        },
        {
            "@type": "InteractionCounter",
            "interactionType": "http://schema.org/CommentAction",
            "userInteractionCount": 0
        },
        {
            "@type": "InteractionCounter",
            "interactionType": "http://schema.org/FollowAction",
            "userInteractionCount": 0
        }
    ],
    "@context": "http://schema.org",
    "@type": "QAPage",
    "@id": "https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/",
    "url": "https://epochmod.com/forum/topic/35149-coins-and-advanced-trading/",
    "mainEntity": {
        "@type": "Question",
        "name": "Coins and Advanced Trading",
        "text": "Hello, \n\u00a0 \nI Have a Problem with   i trade normal with the Trader i get coins for items, but if i trade with Advanced Trading with Trader he get my Items but i get no coins any ideas? \n\u00a0 \nmy advanced Trading / init.sqf -\u0026gt; \n\ndisableSerialization;\n\nZ_traderData = (_this select 3); // gets the trader data ( menu_Functionary1 )\n\nZ_Selling = true;\nZ_SellingFrom = 2;\n\nif( isNil \"Z_traderData\" || count (Z_traderData) == 0)exitWith{\n\tcutText [format[\"There went something wrong.\"], \"PLAIN DOWN\"];\n};\n\nif(isNil \"Z_AdvancedTradingInit\")then{\n// initiate the functions and variables for advanced trading -- easier for the people :) otherwise it would be in compiles or different file.\n\tZ_SellableArray = [];\n\tZ_SellArray = [];\n\tZ_BuyArray = [];\n\tZ_BuyingArray = [];\n\tZ_vehicle = objNull;\n\tZ_VehicleDistance = 30;\n\tZ_MoneyVariable = \"headShots\"; // Change this to whichever currency You are using.\n\tZ_NormalCurrency = false; // No effect yet. Not supported yet\n\t\n\tif(isNil \u0027CurrencyName\u0027)then{\n\t\tCurrencyName = \u0027Coins\u0027;\n\t};\n\n\tZ_filleTradeTitle = {\n\t\t_text = _this select 0;\n\t\tctrlSetText [7408, _text];\n\t};\n\n\tZ_clearLists = {\n\t\tlbClear 7401;\n\t\tlbClear 7402;\n\t};\n\n\tZ_clearBuyList = {\n\t  lbClear 7421;\n\t};\n\n\tZ_clearBuyingList = {\n\t  lbClear 7422;\n\t};\n\n\tZ_getContainer = {\n\t\t_dialog = findDisplay 711197;\n\t\t(_dialog displayCtrl 7404) ctrlSetText format[\"Free Slots: 0 / 0 / 0\"];\n\t\tZ_clearBuyingList;\n\t\tZ_clearLists;\n\t\tZ_SellableArray = [];\n\t\tZ_SellArray = [];\n\t\tZ_BuyingArray = [];\n\t\t\n\t\t_lbIndex= _this select 0;\n\n\t\tif(Z_Selling)then{\n\t\t\tswitch (_lbIndex) do {\n\t\t\t\tcase 0: { \n\t\t\t\t\t[\"Selling from backpack.\"] call Z_filleTradeTitle;\n\t\t\t\t\tZ_SellingFrom = 0;\n\t\t\t\t\tcall Z_getBackpackItems; \n\t\t\t\t};\n\t\t\t\tcase 1: { \n\t\t\t\t\t[\"Selling from vehicle.\"] call Z_filleTradeTitle;\n\t\t\t\t\tZ_SellingFrom = 1;\n\t\t\t\t\tcall Z_getVehicleItems; \n\t\t\t\t};\n\t\t\t\tcase 2: { \n\t\t\t\t\t[\"Selling from gear.\"] call Z_filleTradeTitle;\n\t\t\t\t\tZ_SellingFrom = 2;\n\t\t\t\t\tcall Z_getGearItems; \n\t\t\t\t};\n\t\t\t};\n\t\t}else{\n\t\t\t_ctrltext = format[\" \"];\n\t\t\tctrlSetText [7413, _ctrltext];\n\t\t\t\n\t\t\t_ctrltext = format[\"These are all the items I\u0027m selling!\"];\n\t\t\tctrlSetText [7412, _ctrltext];\n\t\t\tswitch (_lbIndex) do {\n\t\t\t\n\t\t\t\tcase 0: { \n\t\t\t\t\tZ_SellingFrom = 0;\n\t\t\t\t\t[\"Buying in backpack.\"] call Z_filleTradeTitle;\n\t\t\t\t\t[0] call Z_calculateFreeSpace;\n\t\t\t\t};\n\t\t\t\tcase 1: { \n\t\t\t\t\tZ_SellingFrom = 1;\n\t\t\t\t\t[\"Buying in vehicle.\"] call Z_filleTradeTitle;\n\t\t\t\t\t_canBuyInVehicle = call Z_CheckCloseVehicle;\n\t\t\t\t\tif(_canBuyInVehicle)then{\n\t\t\t\t\t\t[1] call Z_calculateFreeSpace; \n\t\t\t\t\t}else{\n\t\t\t\t\t\tsystemChat format[\"Get in driver seat to be able to trade to your vehicle.\"];\t\t\t\t\t\t\n\t\t\t\t\t\t(_dialog displayCtrl 7404) ctrlSetText format[\"Free Slots: %1 / %2 / %3\",0,0,0];\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tcase 2: {\n\t\t\t\t\tZ_SellingFrom = 2;\t\t\t\t\n\t\t\t\t\t[\"Buying in gear.\"] call Z_filleTradeTitle;\n\t\t\t\t\t[2] call Z_calculateFreeSpace;\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t};\n\n\tZ_getBackpackItems = {\n\t\tcall Z_clearLists;\n\t\tZ_SellableArray = [];\n\t\tZ_SellArray = [];\n\t\t_backpack = unitBackpack player;\n\t\tif (!isNil \"_backpack\") then {    \t\t\t\t\n\t\t\t_mags = getMagazineCargo _backpack;\n\t\t\t_weaps = getWeaponCargo _backpack;\t\t\n\t\t\t_normalMags = [];\n\t\t\t_normalWeaps = [];\t\t\t\n\t\t\t_kinds = _mags select 0;\n\t\t\t_ammmounts = _mags select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts select _forEachIndex)}do{\n\t\t\t\t_normalMags set [count(_normalMags),_x];\n\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds;\n\t\t\t\n\t\t\t_kinds2 = _weaps select 0;\n\t\t\t_ammmounts2 = _weaps select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts2 select _forEachIndex)}do{\n\t\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds2;\n\t\t\n\t\t\t[_normalMags,_normalWeaps, typeOf _backpack] call\tZ_checkArrayInConfig;\t\n\t\t}else{\n\t\t\t_ctrltext = format[\"I\u0027m not stupid.\"];\n\t\t\tctrlSetText [7413, _ctrltext];\n\t\t\t\n\t\t\t_ctrltext = format[\"You are not wearing a backpack.\"];\n\t\t\tctrlSetText [7412, _ctrltext];\n\t\t};\n\t};\n\n\tZ_getVehicleItems = {\n\t\tZ_vehicle = objNull;\n\t\tcall Z_clearLists;\n\t\tZ_SellableArray = [];\n\t\tZ_SellArray = [];\n\t\t_vehicle = objNull;\n\t\t\n\t\t_list = nearestObjects [(getPosATL player), [\"AllVehicles\"], Z_VehicleDistance];\t\n\t\t{\t\n\t\t\tif(!isNull _x \u0026amp;\u0026amp; local _x \u0026amp;\u0026amp; !isPlayer _x \u0026amp;\u0026amp; alive _x \u0026amp;\u0026amp; !(_x isKindOf \"zZombie_base\"))then{\n\t\t\t\tsystemChat format[\"Selected %1\",typeOf _x];\n\t\t\t\t_vehicle = _x;\n\t\t\t};\n\t\t}count _list;\n\t\t\n\t\tif(!isNull _vehicle)then{\n\t\t\tZ_vehicle = _vehicle;\n\t\t\t_mags = getMagazineCargo _vehicle;\n\t\t\t_weaps = getWeaponCargo _vehicle;\n\t\t\t\n\t\t\t_normalMags = [];\n\t\t\t_normalWeaps = [];\n\t\t\t\n\t\t\t_kinds = _mags select 0;\n\t\t\t_ammmounts = _mags select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts select _forEachIndex)}do{\n\t\t\t\t_normalMags set [count(_normalMags),_x];\n\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds;\n\t\t\t\n\t\t\t_kinds2 = _weaps select 0;\n\t\t\t_ammmounts2 = _weaps select 1;\n\t\t\t{\n\t\t\t\t_counter = 0 ;\n\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts2 select _forEachIndex)}do{\n\t\t\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t};\n\t\t\t}forEach _kinds2;\n\t\t\t\n\t\t\t\n\t\t\t[_normalWeaps,_normalMags, typeOf _vehicle] call Z_checkArrayInConfig;\n\t\t}else{\n\t\t\t_ctrltext = format[\"Get in driver seat first!\"];\n\t\t\tctrlSetText [7413, _ctrltext];\n\t\t\t\n\t\t\t_ctrltext = format[\"I do not see any vehicle.\"];\n\t\t\tctrlSetText [7412, _ctrltext];\n\t\t};\t\n\t};\n\n\tZ_getGearItems = {\n\t\tcall Z_clearLists;\n\t\tZ_SellArray = [];\n\t\tZ_SellableArray = [];\n\t\t _mags = magazines player;\n\t\t _weaps = weapons player;\n\t\t[_weaps,_mags,\"your gear\"] call\tZ_checkArrayInConfig;\t\t\t\n\t};\n\n\tZ_checkArrayInConfig = {\n\t\t_weaps = _this select 0;\n\t\t_mags = _this select 1;\n\t\t_extraText = _this select 2;\n\t\t_all = _weaps + _mags ;\n\t\t_total = count(_all);\n\t\t_arrayOfTraderCat = Z_traderData;\n\t\t_totalPrice = 0;\n\t\tif(_total \u0026gt; 0)then{\n\t\t\t{\n\t\t\t\t_y = _x;\t\t\t\t\n\t\t\t\t{\t\n\t\t\t\t\t\t_cat =  format[\"Category_%1\",(_arrayOfTraderCat select _forEachIndex select 1)];\n\t\t\t\t\t\t_excists = false;\n\t\t\t\t\t\tif(isClass(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat \u0026gt;\u0026gt; _y ))then{\n\t\t\t\t\t\t_excists = isClass(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat \u0026gt;\u0026gt; _y );\t\t\n\t\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t\tif(_excists)exitWith{\n\t\t\t\t\t\t_pic = \"\";\n\t\t\t\t\t\t_text = \"\";\n\t\t\t\t\t\t_type = getText(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"type\");\n\t\t\t\t\t\t_sell = getArray(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"sell\");\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tswitch (true) do {\n\t\t\t\t\t\t\tcase (_type == \"trade_items\") :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase (_type == \"trade_weapons\") :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcase (_type == \"trade_backpacks\") :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tif( isNil \u0027_text\u0027)then{_text = _y;};\n\t\t\t\t\t\tZ_SellableArray set [count(Z_SellableArray) , [_y,_type,_sell select 0,_text,_pic]];\n\t\t\t\t\t\t_totalPrice = _totalPrice + (_sell select 0);\t\t\t\t\n\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t}forEach _arrayOfTraderCat;\t\t\t\t\n\t\t\t}count _all;\t\n\t\t\t\t\t\n\t\t\t_backUpText = _extraText;\n\t\t\tif(Z_SellingFrom != 2)then{\n\t\t\t\t_extraText = getText (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; _extraText \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t};\n\t\t\tif (isNil \u0027_extraText\u0027)then{_extraText = _backUpText;};\n\t\t\t\n\t\t\t_ctrltext = format[\"I would offer %1 %2.\", _totalPrice,CurrencyName];\n\t\t\tctrlSetText [7413, _ctrltext];\t\t\n\t\t\t_ctrltext = format[\"I accept %1 items from %2.\", count(Z_SellableArray) , _extraText];\n\t\t\tctrlSetText [7412, _ctrltext];\t\n\t\t\tcall Z_fillSellList;\n\t\t};\t\t\n\t};\n\n\tZ_calcPrice = {\n\t\t_sellPrice = 0;\n\t\tif(Z_Selling)then{\t\n\t\t\t{  \t\t\n\t\t\t\t_sellPrice = _sellPrice +  (_x select 2);\n\t\t\t}count Z_SellArray;\n\t\t}else{\n\t\t\t{\n\t\t\t\t_sellPrice = _sellPrice +  ((_x select 2) * (_x select 5));\n\t\t\t}count Z_BuyingArray;\n\t\t};\n\t\t_ctrltext = format[\"%1 %2\", _sellPrice , CurrencyName];\n\t\tctrlSetText [7410, _ctrltext];\t\n\t};\n\n\tZ_fillSellList = {\n\t\t\n\t\t{\n\t\t\t_index = lbAdd [7401,  _x select 3];\n\t\t\tlbSetPicture [7401, _index, _x select 4 ];\n\t\t}count Z_SellableArray;\n\t};\n\n\tZ_fillSellingList = {\n\t\t{  \t\t\n\t\t\t_index = lbAdd [7402, _x select 3];\n\t\t\tlbSetPicture [7402, _index,  _x select 4];\n\t\t}count Z_SellArray;\n\t};\n\n\tZ_pushItemToList = {\n\t\t_index = _this select 0;\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1)then {\n\t\t\tlbDelete [7401, _index];\n\t\t\t_temp = Z_SellableArray select _index;\n\t\t\t//_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];\n\t\t\tZ_SellArray set [count(Z_SellArray),_temp];\n\t\t\tZ_SellableArray set [_index,\"deleted\"];\n\t\t\tZ_SellableArray = Z_SellableArray - [\"deleted\"];\n\t\t\t_index2 = lbAdd [7402, _temp select 3];\n\t\t\tlbSetPicture [7402, _index2, _temp select 4];\n\t\t\tcall Z_calcPrice;\n\t\t};\n\t};\n\n\tZ_removeItemFromList = {\n\t\t_index = _this select 0;\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1)then {\n\t\t\tlbDelete [7402, _index];\n\t\t\t_temp = Z_SellArray select _index;\n\t\t\t_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4  ];\n\t\t\tZ_SellableArray set [count(Z_SellableArray),_item];\n\t\t\tZ_SellArray set [_index,\"deleted\"];\n\t\t\tZ_SellArray = Z_SellArray - [\"deleted\"];\n\t\t\t_index2 = lbAdd [7401,  _item select 3];\n\t\t\tlbSetPicture [7401, _index2, _item select 4];\n\t\t\tcall Z_calcPrice;\t\n\t\t};\n\t};\n\n\tZ_pushAllToList = {\n\t\tZ_SellArray = Z_SellArray + Z_SellableArray;\n\t\tZ_SellableArray = [];\n\t\tcall Z_clearLists;\n\t\tcall Z_fillSellList;\n\t\tcall Z_fillSellingList;\n\t\tcall Z_calcPrice;\n\t};\n\n\tZ_removeAllToList = {\n\t\tZ_SellableArray = Z_SellableArray + Z_SellArray;\n\t\tZ_SellArray = [];\n\t\tcall Z_clearLists;\n\t\tcall Z_fillSellList;\n\t\tcall Z_fillSellingList;\n\t\tcall Z_calcPrice;\n\t};\n\n\tZ_SellItems = {\n\t\t_index = count (Z_SellArray) - 1;\t\n\t\t_tempArray = Z_SellArray;\n\t\tif(_index \u0026gt; -1)then{\n\t\t\tsystemChat \"Selling items.\";\t\n\t\t\tcloseDialog 2;\n\t\t\t_outcome = [];\n\t\t\t_weaponsArray = [];\n\t\t\t_itemsArray = [];\t\n\t\t\t_bpArray = [];\t\n\t\t\t_bpCheckArray = [];\n\t\t\t_weaponsCheckArray = [];\n\t\t\t_itemsCheckArray = [];\n\t\t\t{ \t\t\n\t\t\t\t_type = _x select 1;\n\t\t\t\t_name = _x select 0;\t\t\t\t\t\t\n\n\t\t\t\tswitch (true) do {\n\t\t\t\t\tcase (_type == \"trade_items\") :\n\t\t\t\t\t{\n\t\t\t\t\t\t_itemsArray set [count(_itemsArray),_name];\n\t\t\t\t\t\t_itemsCheckArray set [count(_itemsCheckArray),_x select 2];\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t};\n\t\t\t\t\tcase (_type == \"trade_weapons\") :\n\t\t\t\t\t{\n\t\t\t\t\t\t_weaponsArray set [count(_weaponsArray),_name];\n\t\t\t\t\t\t_weaponsCheckArray set [count(_weaponsCheckArray),_x select 2];\n\t\t\t\t\t};\n\t\t\t\t\tcase (_type == \"trade_backpacks\") :\n\t\t\t\t\t{\n\t\t\t\t\t\t_bpArray set [count(_bpArray),_name];\n\t\t\t\t\t\t_bpCheckArray set [count(_bpCheckArray),_x select 2];\n\t\t\t\t\t};\n\t\t\t\t};\n\n\n\t\t\t\t\n\t\t\t}count Z_SellArray;\n\t\t\t\n\t\t\t// closeDialog 2;\n\t\t\t\t\t\n\t\t\tif(Z_SellingFrom == 0)then{\n\t\t\t\t_outcome = [unitBackpack player,_itemsArray,_weaponsArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;\n\t\t\t};\n\t\t\tif(Z_SellingFrom == 1)then{\t\n\t\t\t\t_outcome = [Z_vehicle,_itemsArray,_weaponsArray,_bpArray] call ZUPA_fnc_removeWeaponsAndMagazinesCargo;\t\t\n\t\t\t};\n\t\t\t\t\t\t\t\t\n\t\t\t//gear\n\t\t\tif(Z_SellingFrom == 2)then{\n\t\t\t\t_wA = [];\n\t\t\t\t_mA = [];\n\t\t\t\t{\n\t\t\t\t\t_localResult = [player,(_x select 0),1] call BIS_fnc_invRemove;\n\t\t\t\t\tif( _localResult != 1)then{\n\t\t\t\t\t\tif(_x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t_mA set [count(_mA),0];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t_wA set [count(_wA),0];\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(_x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t_mA set [count(_mA),1];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t_wA set [count(_wA),1];\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t}count Z_SellArray;\n\t\t\t\t\t\n\t\t\t\t_outcome set [0,_mA];\t\n\t\t\t\t_outcome set [1,_wA];\n\t\t\t\t_outcome set [2,[]];\t\t\t\t\t\n\t\t\t};\n\t\t\t\t\n\t\t\t_money = 0;\t\t\n\t\t\t{\n\t\t\t\t_money = _money + ( ((_itemsCheckArray select _forEachIndex)) * _x) ;\t\t\t\n\t\t\t}forEach (_outcome select 0);\n\t\t\t{\n\t\t\t\t_money = _money + ( ((_weaponsCheckArray select _forEachIndex)) * _x) ;\t\t\t\t\n\t\t\t}forEach (_outcome select 1);\n\t\t\t\n\t\t\t{\n\t\t\t\t_money = _money + ( ( (_bpCheckArray select _forEachIndex) ) * _x) ;\t\n\t\t\t}forEach (_outcome select 2);\n\t\t\t\n\t\t\tif(typeName _money  == \"SCALAR\")then{\n\t\t\t\t[player,_money] call SC_fnc_addCoins;\t\n\t\t\t\tsystemChat format[\"Received %1 %2\", _money , CurrencyName];\t\t\t\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"Money is not a number. Something went wrong.\"];\t\t\t\n\t\t\t};\t\t\t\t\t\t\t\t\t\n\t\t}else{\n\t\t\tsystemChat format[\"No Items to Sell\"];\n\t\t};\t\t\t\t\t\t\n\t};\n\t\n\tZ_BuyItems = {\t\n\t\t_magazinesToBuy = 0;\n\t\t_weaponsToBuy = 0;\n\t\t_backpacksToBuy = 0;\n\t\t\n\t\t_priceToBuy = 0;\n\t\t\n\t\t{\n\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t_weaponsToBuy = _weaponsToBuy + (_x select 5) ;\n\t\t\t\t_priceToBuy\t= _priceToBuy + ((_x select 5)*(_x select 2));\t\t\t\n\t\t\t};\n\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t_magazinesToBuy = _magazinesToBuy + (_x select 5) ;\n\t\t\t\t_priceToBuy\t= _priceToBuy + ((_x select 2)*(_x select 5));\n\t\t\t};\n\t\t\tif( _x select 1 == \"trade_backpacks\")then{\n\t\t\t\t_backpacksToBuy = _backpacksToBuy + (_x select 5) ;\n\t\t\t\t_priceToBuy\t= _priceToBuy + ((_x select 2)*(_x select 5));\n\t\t\t};\t\n\t\t} count Z_BuyingArray;\n\n\t\t//recheck if there is enough space -\u0026gt; not that some douche put extra stuff in.\n\t\t\n\t\t_canBuy = [_weaponsToBuy,_magazinesToBuy,_backpacksToBuy] call Z_allowBuying;\n\t\t\n\t\t_myMoney = player getVariable[Z_MoneyVariable,0];\n\t\t\n\t\tif(_myMoney \u0026gt;= _priceToBuy)then{\n\t\t    \n\t\t\t\n\t\t\n\t\t\tif(_canBuy)then{\t\n\t\t\tsystemChat format[\"Start Buying for %1 %2\",_priceToBuy,CurrencyName];\n\t\t\t\n\t\t\tcloseDialog 2;\n\t\t\t\n\t\t\t\tif(Z_SellingFrom == 0)then{//backpack\n\t\t\t\tsystemChat format[\"Adding %1 Items in backpack\",count (Z_BuyingArray)];\n\t\t\t\t\t{\n\t\t\t\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t\t\t\t(unitBackpack player) addWeaponCargoGlobal [_x select 0, _x select 5];\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\t\t\t\t\t\t\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t(unitBackpack player) addMagazineCargoGlobal  [_x select 0, _x select 5];\t\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\n\t\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t\t} count Z_BuyingArray;\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(Z_SellingFrom == 1)then{//vehicle\n\t\t\t\t\t{\n\t\t\t\t\t\tsystemChat format[\"Adding %1 Items in %2\",count (Z_BuyingArray), typeOf Z_vehicle];\n\t\t\t\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t\t\t\tZ_vehicle addWeaponCargoGlobal [_x select 0, _x select 5];\t\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\tZ_vehicle addMagazineCargoGlobal [_x select 0, _x select 5];\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\t\t\n\t\t\t\t\t\t};\t\n\t\t\t\t\t\tif( _x select 1 == \"trade_backpacks\")then{\n\t\t\t\t\t\t\tZ_vehicle addBackpackCargoGlobal [_x select 0, _x select 5];\t\n\t\t\t\t\t\t\tdiag_log format [\"%1 x %2 added\", _x select 0, _x select 5];\t\n\t\t\t\t\t\t};\t\n\t\t\t\t\t} count Z_BuyingArray;\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(Z_SellingFrom == 2)then{//gear\t\n\t\t\t\t\tsystemChat format[\"Adding %1 Items in gear\",count (Z_BuyingArray)];\n\t\t\t\t\t{\n\t\t\t\t\t\tif( _x select 1 == \"trade_weapons\")then{\n\t\t\t\t\t\t\t_count = 0;\n\t\t\t\t\t\t\twhile(_count \u0026lt; _x select 5)do{\n\t\t\t\t\t\t\t\tplayer addWeapon (_x select 0);\t\n\t\t\t\t\t\t\t\tdiag_log format [\"%1 added\", _x select 0];\t\n\t\t\t\t\t\t\t\t_count = _count + 1;\n\t\t\t\t\t\t\t};\t\t\t\t\t\t\t \n\t\t\t\t\t\t};\n\t\t\t\t\t\tif( _x select 1 == \"trade_items\")then{\n\t\t\t\t\t\t\t_count = 0;\t\t\t\t\t\t\n\t\t\t\t\t\t\t while{_count \u0026lt; _x select 5}do{\n\t\t\t\t\t\t\t\tplayer addMagazine (_x select 0);\t\n\t\t\t\t\t\t\t\tdiag_log format [\"%1 added\", _x select 0];\t\n\t\t\t\t\t\t\t\t_count = _count + 1;\n\t\t\t\t\t\t\t};\t\n\t\t\t\t\t\t};\t\t\t\t\t\n\t\t\t\t\t} count Z_BuyingArray;\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t};\t\n\t\t\t\tsystemChat format[\"removing %1 coins \",_priceToBuy];\n\t\t\t\t[player,_priceToBuy] call SC_fnc_removeCoins;\t\n\t\t\t\tsystemChat format[\"removed %1 coins \",_priceToBuy];\t\t\t\t\n\t\t\t};\t\t\t\t\n\t\t}else{\n\t\t\tsystemChat format[\"You need %1 %2 to buy all these items.\",_priceToBuy,CurrencyName];\n\t\t};\n\t\n\t};\n\n\t/* ----------------------------------------------------------------------------\n\tExamples:\n\t   _result = [_backpack, [\"SmokeShell\",\"M16_AMMO\"],[\"M16\",\"M16\",\"M240\"]] call ZUPA_fnc_removeWeaponsAndMagazinesCargo; \n\t   _result == [[1,0,0,1,1,1,0],[1,0,0,1],[1,0]]; // 1 = success, 0 = fail -\u0026gt;( item was not in cargo)\n\t   \n\tAuthor:\n\t   Zupa 2014-09-30\n\t---------------------------------------------------------------------------- */\n\tZUPA_fnc_removeWeaponsAndMagazinesCargo = {\n\t\tprivate [\"_unit\", \"_items\",\"_weaps\",\"_normalItems\",\"_normalWeaps\", \"_count\", \"_i\", \"_unit_allItems\", \"_unit_allItems_types\", \"_unit_allItems_count\", \"_item_type\", \"_item_count\", \"__returnVar\"];\n\t\t_unit = _this select 0;\n\t\t_items = _this select 1; \n\t\t_weaps = _this select 2; \n\t\t_bags = [];\n\t\tif(count _this \u0026gt; 3)then{\n\t\t\t_bags = _this select 3; \n\t\t};\n\t\t\n\t\t_normalItems = [];\n\t\t_normalWeaps = [];\n\t\t_normalBags = [];\n\t\t\n\t\t_unit_allItems = getMagazineCargo _unit; //  [[type1, typeN, ...],[count1, countN, ...]]\n\t\t_unit_allItems_types = _unit_allItems select 0;\n\t\t_unit_allItems_count = _unit_allItems select 1;\t\n\t\t\n\t\t_unit_allWeaps = getWeaponCargo _unit; \n\t\t_unit_allWeaps_types = _unit_allWeaps select 0;\n\t\t_unit_allWeaps_count = _unit_allWeaps select 1;\t\n\t\t\n\t\t_unit_allBags = getBackpackCargo _unit; \n\t\t_unit_allBags_types = _unit_allBags select 0;\n\t\t_unit_allBags_count = _unit_allBags select 1;\t\n\t\t\n\t\tclearMagazineCargoGlobal _unit;\t\n\t\tclearWeaponCargoGlobal _unit;\n\t\t\n\t\tif( count _bags \u0026gt; 0 )then{\t\t\t\t\t\n\t\t\tclearBackpackCargoGlobal  _unit;\n\t\t};\t\n\t\t\n\t\t{\n\t\t\t_counter = 0 ;\n\t\t\twhile{\t_counter \u0026lt; ( _unit_allItems_count select _forEachIndex)}do{\n\t\t\t_normalItems set [count(_normalItems),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t};\n\t\t}forEach _unit_allItems_types;\t\t\t\t\n\t\t{\n\t\t\t_counter = 0 ;\n\t\t\twhile{\t_counter \u0026lt; ( _unit_allWeaps_count select _forEachIndex)}do{\n\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t};\n\t\t}forEach _unit_allWeaps_types;\t\n\t\t{\n\t\t\t_counter = 0 ;\n\t\t\twhile{\t_counter \u0026lt; ( _unit_allBags_count select _forEachIndex)}do{\n\t\t\t_normalBagss set [count(_normalBags),_x];\n\t\t\t\t\t_counter = _counter + 1;\n\t\t\t};\n\t\t}forEach _unit_allBags_types;\t\n\t\t\n\t\t_returnVar = [];\t\n\t\t_returnMag = [];\t\n\t\t_returnWeap = [];\n\t\t_returnBag = [];\n\t\t{\t\t\n\t\t\t_inCargo = _normalItems find _x;\n\t\t\tif(_inCargo \u0026gt; -1)then{\n\t\t\t\t_normalItems set [_inCargo, \"soldItem\"];\n\t\t\t\t_returnMag set [count(_returnMag),1];\n\t\t\t}else{\n\t\t\t\t_returnMag set [count(_returnMag),0];\t\n\t\t\t};\n\t\t}count _items;\t\n\t\t_normalItems = _normalItems - [\"soldItem\"];\n\t\t{\t\t\t\t\n\t\t\t_unit addMagazineCargoGlobal [_x, 1];\t\t\t\t\n\t\t}count _normalItems;\t\n\t\t\n\t\t{\t\t\n\t\t\t_inCargo = _normalWeaps find _x;\n\t\t\tif(_inCargo \u0026gt; -1)then{\n\t\t\t\t_normalWeaps set [_inCargo, \"soldItem\"];\n\t\t\t\t_returnWeap set [count(_returnWeap),1];\n\t\t\t}else{\n\t\t\t\t_returnWeap set [count(_returnWeap),0];\t\n\t\t\t};\n\t\t}count _weaps;\t\n\t\t_normalWeaps = _normalWeaps - [\"soldItem\"];\n\t\t{\t\t\t\t\n\t\t\t_unit addWeaponCargoGlobal [_x, 1];\t\t\t\t\n\t\t}count _normalWeaps;\n\t\t\n\t\t{\t\t\n\t\t\t_inCargo = _normalBags find _x;\n\t\t\tif(_inCargo \u0026gt; -1)then{\n\t\t\t\t_normalBags set [_inCargo, \"soldItem\"];\n\t\t\t\t_returnBag set [count(_returnBag),1];\n\t\t\t}else{\n\t\t\t\t_returnBag set [count(_returnBag),0];\t\n\t\t\t};\n\t\t}count _bags;\t\n\t\t_normalWeaps = _normalWeaps - [\"soldItem\"];\n\t\t{\t\t\t\t\n\t\t\t_unit addBackpackCargoGlobal [_x, 1];\t\t\t\t\n\t\t}count _normalBags;\n\t\t\t\t\n\t\t_returnVar set [0,_returnMag];\n\t\t_returnVar set [1,_returnWeap];\n\t\t_returnVar set [2,_returnBag];\n\t\t_returnVar;\n\t};\n\n\tZ_ChangeBuySell = {\t\t\n\t\t_dialog = findDisplay 711197;\t\t\n\t\tZ_Selling = !Z_Selling;\t\n\t\tif(Z_Selling)then{\t\n\t\t\t(_dialog displayCtrl 7416) ctrlSetText \"Buy\";\n\t\t\t(_dialog displayCtrl 7409) ctrlSetText \"Selling\";\n\t\t\t{ctrlShow [_x,true];} forEach [7401,7402,7435,7430,7431,7432,7433]; // show\n\t\t\t{ctrlShow [_x,false];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // hide\t\t\t\t\t\t\t\t\t\t\t\n\t\t}else{\n\t\t\t(_dialog displayCtrl 7416) ctrlSetText \"Sell\";\n\t\t\t(_dialog displayCtrl 7409) ctrlSetText \"Buying\";\n\t\t\t{ctrlShow [_x,true];} forEach [7421,7422,7436,7440,7441,7442,7443,7404]; // show\n\t\t\t{ctrlShow [_x,false];} forEach [7401,7402,7435,7430,7431,7432,7433]; // hide\t\n\t\t\tcall Z_fillBuyList;\n\t\t};\t\n\t\t[2] call Z_getContainer; // default gear\t\t\n\t};\n\n\tZ_removeAllFromBuyingList = {\n\t\tZ_clearBuyingList;\n\t\tZ_BuyingArray = [];\n\t};\n\n\tZ_removeItemFromBuyingList = {\n\t\t_index = _this select 0;\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1)then {\n\t\t\tlbDelete [7422, _index];\n\t\t\tZ_BuyingArray set [_index,\"deleted\"];\n\t\t\tZ_BuyingArray = Z_BuyingArray - [\"deleted\"];\t\t\n\t\t\tcall Z_calcPrice;\t\n\t\t};\n\t};\n\n\tZ_toBuyingList = {\n\t\t_index = _this select 0;\n\t\t_amount = parseNumber(_this select 1);\t\t\n\t\tif(!isNil\"_index\" \u0026amp;\u0026amp; _index \u0026gt; -1 \u0026amp;\u0026amp; (typeName _amount == \"SCALAR\") \u0026amp;\u0026amp; _amount \u0026gt; 0 )then {\n\t\t\t_temp = Z_BuyArray select _index;\n\t\t\t_item = [_temp select 0,_temp select 1 ,_temp select 2,_temp select 3, _temp select 4, _amount ];\n\t\t\tZ_BuyingArray set [count(Z_BuyingArray),_item];\t\t\n\t\t\t_index2 = lbAdd [7422, format[\"%1x: %2\",_item select 5,_item select 3]];\n\t\t\tlbSetPicture [7422, _index2, _item select 4];\n\t\t\tcall Z_calcPrice;\n\t\t};\t\n\t};\n\n\tZ_fillBuyList = {\n\t\t\tcall Z_clearBuyList;\n\t\t\tcall Z_clearBuyingList;\n\t\t\tZ_BuyArray = [];\n\t\t\tZ_BuyingArray = [];\n\t\t\t_arrayOfTraderCat = Z_traderData;\t\n\t\t\t_counter = 0;\n\t\t\t{\t\n\t\t\t\t\t\t_cat =  format[\"Category_%1\",(_arrayOfTraderCat select _forEachIndex select 1)];\n\t\t\t\t\t\t_cfgtraders = missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat;\n\t\t\t\t\t\tfor \"_i\" from 0 to (count _cfgtraders)-1 do\n\t\t\t\t\t\t{\t\t\t\t\t\n\t\t\t\t\t\t\t_y  = _cfgtraders select _i;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (isClass _y) then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_y  = configName (_y );\n\t\t\t\t\t\t\t\t_type =  getText(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"type\");\n\t\t\t\t\t\t\t\t_buy = getArray(missionConfigFile \u0026gt;\u0026gt; \"CfgTraderCategory\"  \u0026gt;\u0026gt; _cat  \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \"buy\");\n\t\t\t\t\t\t\t\t_pic = \"\";\n\t\t\t\t\t\t\t\t_text = \"\";\t\n\t\t\t\t\t\t\t\tif(_type == \"trade_items\")then{\n\t\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgMagazines\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t\t\tZ_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];\n\t\t\t\t\t\t\t\t\t_totalPrice = _totalPrice + (_buy select 0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tif(_type == \"trade_weapons\")then{\n\t\t\t\t\t\t\t\t\t_pic = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027picture\u0027);\n\t\t\t\t\t\t\t\t\t_text = getText (configFile \u0026gt;\u0026gt; \u0027CfgWeapons\u0027 \u0026gt;\u0026gt; _y \u0026gt;\u0026gt; \u0027displayName\u0027);\n\t\t\t\t\t\t\t\t\tZ_BuyArray set [count(Z_BuyArray) , [_y,_type,_buy select 0,_text,_pic]];\n\t\t\t\t\t\t\t\t\t_totalPrice = _totalPrice + (_buy select 0);\t\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t};\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t};\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t}forEach _arrayOfTraderCat;\t\n\t\t\tcall Z_fillBuylList;\n\t\t\tcall Z_calcPrice;\n\t};\n\n\tZ_fillBuylList = {\t\n\t\t{\n\t\t\t_index = lbAdd [7421,  _x select 3];\n\t\t\tlbSetPicture [7421, _index, _x select 4 ];\n\t\t}count Z_BuyArray;\n\t};\n\n\tZ_fillBuyingList = {\n\t\t{  \t\t\n\t\t\t_index = lbAdd [7422, _x select 3];\n\t\t\tlbSetPicture [7422, _index,  _x select 4];\n\t\t}count Z_BuyingArray;\n\t};\n\n\n\tZ_calculateFreeSpace = {\n\t\t_selection = _this select 0;\n\t\t_returnArray = [0,0,0];\n\t\tif(_selection == 2) then{ //gear\n\t\t\tsystemChat format[\"No advanced buying of weapons/backpacks currently into gear for security reasons!\"];\n\t\t\t_allowedMags = 20 - count(magazines player);\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\t\t\n\t\t\t_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];\n\t\t};\t\t\n\t\tif(_selection == 1) then{ //vehicle\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\tif (!isNull Z_vehicle) then {   \n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027);\n\t\t\t\t_allowedBackpacks = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportmaxbackpacks \u0027);\n\t\t\t};\t\t\t\t\t\t\t\t\t\n\t\t\t_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];\n\t\t};\t\t\n\t\tif(_selection == 0) then{ //backpack\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\t_backpack = unitBackpack player;\n\t\t\tif (!isNil \"_backpack\") then {   \n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027);\n\t\t\t\t_allowedBackpacks = 0;\n\t\t\t};\t\t\n\t\t\t_returnArray = [_allowedMags,_allowedWeapons,_allowedBackpacks];\n\t\t};\t\t\t\t\n\t\t_dialog = findDisplay 711197;\n\t\t(_dialog displayCtrl 7404) ctrlSetText format[\"Free Slots: %1 / %2 / %3\",_returnArray select 1,_returnArray select 0,_returnArray select 2];\n\t};\n\t\n\tZ_CheckCloseVehicle = {\t\n\t\tZ_vehicle = objNull;\n\t\t_vehicle = objNull;\n\t\t_list = nearestObjects [(getPosATL player), [\"AllVehicles\"], Z_VehicleDistance];\t\n\t\t{\t\n\t\t\tif(!isNull _x \u0026amp;\u0026amp; local _x \u0026amp;\u0026amp; !isPlayer _x \u0026amp;\u0026amp; alive _x \u0026amp;\u0026amp; !(_x isKindOf \"zZombie_base\"))then{\n\t\t\t\tsystemChat format[\"Selected %1\",typeOf _x];\n\t\t\t\t_vehicle = _x;\n\t\t\t};\n\t\t}count _list;\t\t\n\t\t_result = false;\t\t\n\t\tif(!isNull _vehicle)then{\n\t\t\tZ_vehicle = _vehicle;\n\t\t\t_result = true;\n\t\t\t[format[\"Buying in %1.\", typeOf Z_vehicle]] call Z_filleTradeTitle;\t\t\t\t\n\t\t};\t\t\t\t\t\t\n\t\t_result\n\t};\n\t\n\tZ_allowBuying = {\n\t\t//\tZ_SellingFrom = 0 - backpack, 1 - car, 2 -gear\n\t\t_selection = Z_SellingFrom;\n\t\t_return = false;\n\t\t_toBuyWeaps = _this select 0;\n\t\t_toBuyMags = _this select 1;\n\t\t_toBuyBags = _this select 2;\n\t\tif(_selection == 2) then{ //gear\n\t\t\tsystemChat format[\"Only 0 weapon /  backpack allowed to buy at a time for security reasons!\"];\n\t\t\t_allowedMags = 20 - count(magazines player);\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\t\n\t\t\t\n\t\t\t_check1 = false;\n\t\t\t_check2 = false;\n\t\t\t_check3 = false;\n\n\t\t\tif( _allowedWeapons \u0026gt;=_toBuyWeaps)then{\n\t\t\t\t_check1 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 weapons in your gear.\",_allowedWeapons];\n\t\t\t};\n\t\t\tif( _allowedMags \u0026gt;= _toBuyMags)then{\n\t\t\t\t_check2 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 magazines  in your gear.\",_allowedMags];\n\t\t\t};\t\t\n\t\t\tif( _allowedBackpacks \u0026gt;= _toBuyBags)then{\n\t\t\t\t_check3 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 backpacks  in your gear.\",_allowedBackpacks];\n\t\t\t};\n\t\t\t\n\t\t\tif(_check1 \u0026amp;\u0026amp; _check2 \u0026amp;\u0026amp; _check3)then{\n\t\t\t\t_return = true;\n\t\t\t};\n\t\t\t\n\t\t};\t\t\n\t\tif(_selection == 1) then{ //vehicle\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\tif ( !isNull Z_vehicle) then {   \n\t\t\t\n\t\t\t\t_mags = getMagazineCargo Z_vehicle;\n\t\t\t\t_weaps = getWeaponCargo Z_vehicle;\n\t\t\t\t_bags = getBackpackCargo Z_vehicle;\n\t\t\t\t\n\t\t\t\t_normalMags = [];\n\t\t\t\t_normalWeaps = [];\n\t\t\t\t_normalBags = [];\n\t\t\t\t\n\t\t\t\t_kinds = _mags select 0;\n\t\t\t\t_ammmounts = _mags select 1;\n\t\t\t\t{\n\t\t\t\t\t_counter = 0 ;\n\t\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts select _forEachIndex)}do{\n\t\t\t\t\t_normalMags set [count(_normalMags),_x];\n\t\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t\t};\n\t\t\t\t}forEach _kinds;\n\t\t\t\t\n\t\t\t\t_kinds2 = _weaps select 0;\n\t\t\t\t_ammmounts2 = _weaps select 1;\n\t\t\t\t{\n\t\t\t\t\t_counter = 0 ;\n\t\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts2 select _forEachIndex)}do{\n\t\t\t\t\t\t_normalWeaps set [count(_normalWeaps),_x];\n\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t\t};\n\t\t\t\t}forEach _kinds2;\n\t\t\t\t\n\t\t\t\t_kinds3 = _bags select 0;\n\t\t\t\t_ammmounts3 = _bags select 1;\n\t\t\t\t{\n\t\t\t\t\t_counter = 0 ;\n\t\t\t\t\twhile{\t_counter \u0026lt; ( \t_ammmounts3 select _forEachIndex)}do{\n\t\t\t\t\t\t_normalBags set [count(_normalBags),_x];\n\t\t\t\t\t\t_counter = _counter + 1;\n\t\t\t\t\t};\n\t\t\t\t}forEach _kinds3;\n\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027) - count(_normalWeaps);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027) - count(_normalMags);\n\t\t\t\t_allowedBackpacks = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf Z_vehicle) \u0026gt;\u0026gt; \u0027transportmaxbackpacks \u0027) - count(_normalBags);\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"%1\", typeName \"Z_vehicle\"];\n\t\t\t};\t\n\t\t\t\n\t\t\t_check1 = false;\n\t\t\t_check2 = false;\n\t\t\t_check3 = false;\n\n\t\t\tif( _allowedWeapons \u0026gt;= _toBuyWeaps)then{\n\t\t\t\t_check1 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 weapons in your vehicle.\",_allowedWeapons];\n\t\t\t};\n\t\t\tif( _allowedMags \u0026gt;= _toBuyMags)then{\n\t\t\t\t_check2 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 magazines in your vehicle.\",_allowedMags];\n\t\t\t};\t\t\t\n\t\t\tif( _allowedBackpacks \u0026gt;= _toBuyBags)then{\n\t\t\t\t_check3 = true;\n\t\t\t}else{\n\t\t\t\tsystemChat format[\"You can only buy %1 backpacks in your vehicle.\",_allowedBackpacks];\n\t\t\t};\n\t\t\t\n\t\t\tif(_check1 \u0026amp;\u0026amp; _check2 \u0026amp;\u0026amp; _check3)then{\n\t\t\t\t_return = true;\n\t\t\t};\t\t\t\t\t\n\t\t};\t\t\n\t\tif(_selection == 0) then{ //backpack\n\t\t\t_allowedWeapons = 0;\n\t\t\t_allowedMags = 0;\n\t\t\t_allowedBackpacks = 0;\n\t\t\t_backpack = unitBackpack player;\n\t\t\tif (!isNil \"_backpack\") then {   \n\t\t\t\t_allowedWeapons = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxWeapons\u0027);\n\t\t\t\t_allowedMags = getNumber (configFile \u0026gt;\u0026gt; \u0027CfgVehicles\u0027 \u0026gt;\u0026gt; (typeOf _backpack) \u0026gt;\u0026gt; \u0027transportMaxMagazines\u0027);\n\t\t\t\t_allowedBackpacks = 0;\n\t\t\t};\t\t\n\t\t\t\n\t\t\t_check1 = false;\n\t\t\t_check2 = false;\n\t\t\t_check3 = false;\n\t\t\t_check4 = false;\n\n\t\t\tif( _allowedWeapons \u0026gt;= _toBuyWeaps)then{\n\t\t\t\t_check1 = true;\n\t\t\t};\n\t\t\tif( _allowedMags \u0026gt;= _toBuyMags)then{\n\t\t\t\t_check2 = true;\n\t\t\t};\t\t\t\n\t\t\tif( _allowedBackpacks \u0026gt;= _toBuyBags)then{\n\t\t\t\t_check3 = true;\n\t\t\t};\t\t\t\t\t\t\t\t\t\n\t\t\tif(_check1 \u0026amp;\u0026amp; _check2 \u0026amp;\u0026amp; _check3 \u0026amp;\u0026amp; _check4)then{\n\t\t\t\t_return = true;\t\t\t\n\t\t\t};\t\n\t\t\t\n\t\t\tsystemChat format[\"Buying to backpack is currently disabled for security reasons\"];\n\t\t};\n\n\t\t_return\n\t};\n\n\tZ_AdvancedTradingInit = true;\n\n};\n\ncreateDialog \"AdvancedTrading\";\n\n_dialog = findDisplay 711197;\n(_dialog displayCtrl 7432) ctrlSetText \" \u0026lt; \";\n(_dialog displayCtrl 7433) ctrlSetText \" \u0026lt;\u0026lt; \";\n(_dialog displayCtrl 7442) ctrlSetText \" \u0026lt; \";\n(_dialog displayCtrl 7443) ctrlSetText \" \u0026lt;\u0026lt; \";\n{ctrlShow [_x,false];} forEach [7441,7436,7404,7422,7421,7436,7440,7442,7443,7404]; // hide\t- double hide ( first one didn\u0027t work it seems.\ncall Z_getGearItems; \n\n",
        "answerCount": 0,
        "dateCreated": "2015-05-09T07:19:12+0000",
        "author": {
            "@type": "Person",
            "name": "flashback"
        }
    },
    "publisher": {
        "member": {
            "@type": "Person",
            "name": "flashback",
            "image": "https://epochmod.com/forum/applications/core/interface/email/default_photo.png",
            "url": "https://epochmod.com/forum/profile/11373-flashback/"
        }
    }
}	
</script>
<script type="application/ld+json">
{
    "@context": "http://www.schema.org",
    "publisher": "https://epochmod.com/forum/#organization",
    "@type": "WebSite",
    "@id": "https://epochmod.com/forum/#website",
    "mainEntityOfPage": "https://epochmod.com/forum/",
    "name": "Epoch Mod Community",
    "url": "https://epochmod.com/forum/",
    "potentialAction": {
        "type": "SearchAction",
        "query-input": "required name=query",
        "target": "https://epochmod.com/forum/search/?q={query}"
    },
    "inLanguage": [
        {
            "@type": "Language",
            "name": "English (USA)",
            "alternateName": "en-US"
        }
    ]
}	
</script>
<script type="application/ld+json">
{
    "@context": "http://www.schema.org",
    "@type": "Organization",
    "@id": "https://epochmod.com/forum/#organization",
    "mainEntityOfPage": "https://epochmod.com/forum/",
    "name": "Epoch Mod Community",
    "url": "https://epochmod.com/forum/",
    "logo": {
        "@type": "ImageObject",
        "@id": "https://epochmod.com/forum/#logo",
        "url": "https://epochmod.com/forum/uploads/monthly_2023_04/text_only.png.512d7d1c1eb3e42e7aae78351fa37e02.png"
    },
    "sameAs": [
        "https://facebook.com/EpochMod",
        "https://twitter.com/EpochMod",
        "https://github.com/EpochModTeam/"
    ]
}	
</script>
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "item": {
                "@id": "https://epochmod.com/forum/forum/1-arma-2/",
                "name": "ArmA 2"
            }
        },
        {
            "@type": "ListItem",
            "position": 2,
            "item": {
                "@id": "https://epochmod.com/forum/forum/96-qa-section/",
                "name": "Q&amp;A Section"
            }
        },
        {
            "@type": "ListItem",
            "position": 3,
            "item": {
                "@id": "https://epochmod.com/forum/forum/35-scripting/",
                "name": "Scripting"
            }
        }
    ]
}	
</script>
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "ContactPage",
    "url": "https://epochmod.com/forum/contact/"
}	
</script>
<script type="text/javascript">
    (() => {
        let gqlKeys = [];
        for (let [k, v] of Object.entries(gqlKeys)) {
            ips.setGraphQlData(k, v);
        }
    })();
</script>
<!--ipsQueryLog-->
<!--ipsCachingLog-->
</body>

</html>